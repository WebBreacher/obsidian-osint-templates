/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck and Clare Macrae

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var Nb=Object.create;var ji=Object.defineProperty,Ib=Object.defineProperties,Fb=Object.getOwnPropertyDescriptor,Lb=Object.getOwnPropertyDescriptors,Ub=Object.getOwnPropertyNames,Sp=Object.getOwnPropertySymbols,Wb=Object.getPrototypeOf,Rp=Object.prototype.hasOwnProperty,qb=Object.prototype.propertyIsEnumerable;var Dp=(r,e,t)=>e in r?ji(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,he=(r,e)=>{for(var t in e||(e={}))Rp.call(e,t)&&Dp(r,t,e[t]);if(Sp)for(var t of Sp(e))qb.call(e,t)&&Dp(r,t,e[t]);return r},gt=(r,e)=>Ib(r,Lb(e));var b=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Yb=(r,e)=>{for(var t in e)ji(r,t,{get:e[t],enumerable:!0})},Mp=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ub(e))!Rp.call(r,i)&&i!==t&&ji(r,i,{get:()=>e[i],enumerable:!(n=Fb(e,i))||n.enumerable});return r};var zn=(r,e,t)=>(t=r!=null?Nb(Wb(r)):{},Mp(e||!r||!r.__esModule?ji(t,"default",{value:r,enumerable:!0}):t,r)),$b=r=>Mp(ji({},"__esModule",{value:!0}),r);var W=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var we=b(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.matchAnyPattern=Br.extractTerms=Br.repeatedTimeunitPattern=void 0;function Hb(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}Br.repeatedTimeunitPattern=Hb;function xp(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}Br.extractTerms=xp;function zb(r){return`(?:${xp(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}Br.matchAnyPattern=zb});var Te=b((wu,ku)=>{(function(r,e){typeof wu=="object"&&typeof ku!="undefined"?ku.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(wu,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",f="year",h="date",T="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,E=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,D={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},A=function(B,C,w){var H=String(B);return!H||H.length>=C?B:""+Array(C+1-H.length).join(w)+B},P={s:A,z:function(B){var C=-B.utcOffset(),w=Math.abs(C),H=Math.floor(w/60),N=w%60;return(C<=0?"+":"-")+A(H,2,"0")+":"+A(N,2,"0")},m:function B(C,w){if(C.date()<w.date())return-B(w,C);var H=12*(w.year()-C.year())+(w.month()-C.month()),N=C.clone().add(H,l),J=w-N<0,d=C.clone().add(H+(J?-1:1),l);return+(-(H+(w-N)/(J?N-d:d-N))||0)},a:function(B){return B<0?Math.ceil(B)||0:Math.floor(B)},p:function(B){return{M:l,y:f,w:u,d:o,D:h,h:a,m:s,s:i,ms:n,Q:c}[B]||String(B||"").toLowerCase().replace(/s$/,"")},u:function(B){return B===void 0}},F="en",Z={};Z[F]=D;var Q=function(B){return B instanceof Pe},me=function(B,C,w){var H;if(!B)return F;if(typeof B=="string")Z[B]&&(H=B),C&&(Z[B]=C,H=B);else{var N=B.name;Z[N]=B,H=N}return!w&&H&&(F=H),H||!w&&F},j=function(B,C){if(Q(B))return B.clone();var w=typeof C=="object"?C:{};return w.date=B,w.args=arguments,new Pe(w)},G=P;G.l=me,G.i=Q,G.w=function(B,C){return j(B,{locale:C.$L,utc:C.$u,x:C.$x,$offset:C.$offset})};var Pe=function(){function B(w){this.$L=me(w.locale,null,!0),this.parse(w)}var C=B.prototype;return C.parse=function(w){this.$d=function(H){var N=H.date,J=H.utc;if(N===null)return new Date(NaN);if(G.u(N))return new Date;if(N instanceof Date)return new Date(N);if(typeof N=="string"&&!/Z$/i.test(N)){var d=N.match(y);if(d){var p=d[2]-1||0,m=(d[7]||"0").substring(0,3);return J?new Date(Date.UTC(d[1],p,d[3]||1,d[4]||0,d[5]||0,d[6]||0,m)):new Date(d[1],p,d[3]||1,d[4]||0,d[5]||0,d[6]||0,m)}}return new Date(N)}(w),this.$x=w.x||{},this.init()},C.init=function(){var w=this.$d;this.$y=w.getFullYear(),this.$M=w.getMonth(),this.$D=w.getDate(),this.$W=w.getDay(),this.$H=w.getHours(),this.$m=w.getMinutes(),this.$s=w.getSeconds(),this.$ms=w.getMilliseconds()},C.$utils=function(){return G},C.isValid=function(){return this.$d.toString()!==T},C.isSame=function(w,H){var N=j(w);return this.startOf(H)<=N&&N<=this.endOf(H)},C.isAfter=function(w,H){return j(w)<this.startOf(H)},C.isBefore=function(w,H){return this.endOf(H)<j(w)},C.$g=function(w,H,N){return G.u(w)?this[H]:this.set(N,w)},C.unix=function(){return Math.floor(this.valueOf()/1e3)},C.valueOf=function(){return this.$d.getTime()},C.startOf=function(w,H){var N=this,J=!!G.u(H)||H,d=G.p(w),p=function(S,I){var ge=G.w(N.$u?Date.UTC(N.$y,I,S):new Date(N.$y,I,S),N);return J?ge:ge.endOf(o)},m=function(S,I){return G.w(N.toDate()[S].apply(N.toDate("s"),(J?[0,0,0,0]:[23,59,59,999]).slice(I)),N)},g=this.$W,_=this.$M,v=this.$D,k="set"+(this.$u?"UTC":"");switch(d){case f:return J?p(1,0):p(31,11);case l:return J?p(1,_):p(0,_+1);case u:var R=this.$locale().weekStart||0,O=(g<R?g+7:g)-R;return p(J?v-O:v+(6-O),_);case o:case h:return m(k+"Hours",0);case a:return m(k+"Minutes",1);case s:return m(k+"Seconds",2);case i:return m(k+"Milliseconds",3);default:return this.clone()}},C.endOf=function(w){return this.startOf(w,!1)},C.$set=function(w,H){var N,J=G.p(w),d="set"+(this.$u?"UTC":""),p=(N={},N[o]=d+"Date",N[h]=d+"Date",N[l]=d+"Month",N[f]=d+"FullYear",N[a]=d+"Hours",N[s]=d+"Minutes",N[i]=d+"Seconds",N[n]=d+"Milliseconds",N)[J],m=J===o?this.$D+(H-this.$W):H;if(J===l||J===f){var g=this.clone().set(h,1);g.$d[p](m),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](m);return this.init(),this},C.set=function(w,H){return this.clone().$set(w,H)},C.get=function(w){return this[G.p(w)]()},C.add=function(w,H){var N,J=this;w=Number(w);var d=G.p(H),p=function(_){var v=j(J);return G.w(v.date(v.date()+Math.round(_*w)),J)};if(d===l)return this.set(l,this.$M+w);if(d===f)return this.set(f,this.$y+w);if(d===o)return p(1);if(d===u)return p(7);var m=(N={},N[s]=e,N[a]=t,N[i]=r,N)[d]||1,g=this.$d.getTime()+w*m;return G.w(g,this)},C.subtract=function(w,H){return this.add(-1*w,H)},C.format=function(w){var H=this,N=this.$locale();if(!this.isValid())return N.invalidDate||T;var J=w||"YYYY-MM-DDTHH:mm:ssZ",d=G.z(this),p=this.$H,m=this.$m,g=this.$M,_=N.weekdays,v=N.months,k=function(I,ge,ae,ne){return I&&(I[ge]||I(H,J))||ae[ge].substr(0,ne)},R=function(I){return G.s(p%12||12,I,"0")},O=N.meridiem||function(I,ge,ae){var ne=I<12?"AM":"PM";return ae?ne.toLowerCase():ne},S={YY:String(this.$y).slice(-2),YYYY:this.$y,M:g+1,MM:G.s(g+1,2,"0"),MMM:k(N.monthsShort,g,v,3),MMMM:k(v,g),D:this.$D,DD:G.s(this.$D,2,"0"),d:String(this.$W),dd:k(N.weekdaysMin,this.$W,_,2),ddd:k(N.weekdaysShort,this.$W,_,3),dddd:_[this.$W],H:String(p),HH:G.s(p,2,"0"),h:R(1),hh:R(2),a:O(p,m,!0),A:O(p,m,!1),m:String(m),mm:G.s(m,2,"0"),s:String(this.$s),ss:G.s(this.$s,2,"0"),SSS:G.s(this.$ms,3,"0"),Z:d};return J.replace(E,function(I,ge){return ge||S[I]||d.replace(":","")})},C.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},C.diff=function(w,H,N){var J,d=G.p(H),p=j(w),m=(p.utcOffset()-this.utcOffset())*e,g=this-p,_=G.m(this,p);return _=(J={},J[f]=_/12,J[l]=_,J[c]=_/3,J[u]=(g-m)/6048e5,J[o]=(g-m)/864e5,J[a]=g/t,J[s]=g/e,J[i]=g/r,J)[d]||g,N?_:G.a(_)},C.daysInMonth=function(){return this.endOf(l).$D},C.$locale=function(){return Z[this.$L]},C.locale=function(w,H){if(!w)return this.$L;var N=this.clone(),J=me(w,H,!0);return J&&(N.$L=J),N},C.clone=function(){return G.w(this.$d,this)},C.toDate=function(){return new Date(this.valueOf())},C.toJSON=function(){return this.isValid()?this.toISOString():null},C.toISOString=function(){return this.$d.toISOString()},C.toString=function(){return this.$d.toUTCString()},B}(),Fe=Pe.prototype;return j.prototype=Fe,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",f],["$D",h]].forEach(function(B){Fe[B[1]]=function(C){return this.$g(C,B[0],B[1])}}),j.extend=function(B,C){return B.$i||(B(C,Pe,j),B.$i=!0),j},j.locale=me,j.isDayjs=Q,j.unix=function(B){return j(1e3*B)},j.en=Z[F],j.Ls=Z,j.p={},j})});var nt=b(Hr=>{"use strict";var Kb=Hr&&Hr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.findYearClosestToRef=Hr.findMostLikelyADYear=void 0;var Vb=Kb(Te());function Qb(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}Hr.findMostLikelyADYear=Qb;function Xb(r,e,t){let n=Vb.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}Hr.findYearClosestToRef=Xb});var it=b(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.parseTimeUnits=ie.TIME_UNITS_PATTERN=ie.parseYear=ie.YEAR_PATTERN=ie.parseOrdinalNumberPattern=ie.ORDINAL_NUMBER_PATTERN=ie.parseNumberPattern=ie.NUMBER_PATTERN=ie.TIME_UNIT_DICTIONARY=ie.ORDINAL_WORD_DICTIONARY=ie.INTEGER_WORD_DICTIONARY=ie.MONTH_DICTIONARY=ie.FULL_MONTH_NAME_DICTIONARY=ie.WEEKDAY_DICTIONARY=void 0;var Sa=we(),Zb=nt();ie.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};ie.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};ie.MONTH_DICTIONARY=Object.assign(Object.assign({},ie.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});ie.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};ie.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};ie.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};ie.NUMBER_PATTERN=`(?:${Sa.matchAnyPattern(ie.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function Cp(r){let e=r.toLowerCase();return ie.INTEGER_WORD_DICTIONARY[e]!==void 0?ie.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}ie.parseNumberPattern=Cp;ie.ORDINAL_NUMBER_PATTERN=`(?:${Sa.matchAnyPattern(ie.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function Jb(r){let e=r.toLowerCase();return ie.ORDINAL_WORD_DICTIONARY[e]!==void 0?ie.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}ie.parseOrdinalNumberPattern=Jb;ie.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function ev(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return Zb.findMostLikelyADYear(e)}ie.parseYear=ev;var Pp=`(${ie.NUMBER_PATTERN})\\s{0,3}(${Sa.matchAnyPattern(ie.TIME_UNIT_DICTIONARY)})`,Ap=new RegExp(Pp,"i");ie.TIME_UNITS_PATTERN=Sa.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",Pp);function tv(r){let e={},t=r,n=Ap.exec(t);for(;n;)rv(e,n),t=t.substring(n[0].length).trim(),n=Ap.exec(t);return e}ie.parseTimeUnits=tv;function rv(r,e){let t=Cp(e[1]),n=ie.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Np=b((Ou,Su)=>{(function(r,e){typeof Ou=="object"&&typeof Su!="undefined"?Su.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(Ou,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var f=this.quarter()-1;return c?this.month(3*f).startOf(r).startOf("day"):this.month(3*f+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var Wt=b(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.implySimilarTime=lr.assignSimilarTime=lr.assignSimilarDate=lr.assignTheNextDay=void 0;var Ip=Be();function nv(r,e){e=e.add(1,"day"),Fp(r,e),Lp(r,e)}lr.assignTheNextDay=nv;function Fp(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}lr.assignSimilarDate=Fp;function iv(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",Ip.Meridiem.AM):r.assign("meridiem",Ip.Meridiem.PM)}lr.assignSimilarTime=iv;function Lp(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}lr.implySimilarTime=Lp});var Up=b(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.toTimezoneOffset=fn.TIMEZONE_ABBR_MAP=void 0;fn.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function sv(r){var e;return r==null?null:typeof r=="number"?r:(e=fn.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}fn.toTimezoneOffset=sv});var Ne=b(cr=>{"use strict";var Wp=cr&&cr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cr,"__esModule",{value:!0});cr.ParsingResult=cr.ParsingComponents=cr.ReferenceWithTimezone=void 0;var av=Wp(Np()),Da=Wp(Te()),Du=Wt(),ov=Up();Da.default.extend(av.default);var Ru=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=ov.toTimezoneOffset(e.timezone))}};cr.ReferenceWithTimezone=Ru;var pn=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=Da.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new pn(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return Da.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=Da.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new pn(e);return t.hour||t.minute||t.second?(Du.assignSimilarTime(i,n),Du.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(Du.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};cr.ParsingComponents=pn;var Gi=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new pn(e),this.end=s}clone(){let e=new Gi(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};cr.ParsingResult=Gi});var q=b(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.AbstractParserWithWordBoundaryChecking=void 0;var Mu=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};Ra.AbstractParserWithWordBoundaryChecking=Mu});var qp=b(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});var Au=it(),uv=Ne(),lv=q(),cv=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Au.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),dv=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Au.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),xu=class extends lv.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?dv:cv}innerExtract(e,t){let n=Au.parseTimeUnits(t[1]);return uv.ParsingComponents.createRelativeFromReference(e.reference,n)}};Cu.default=xu});var Hp=b(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});var fv=nt(),Gp=it(),Bp=it(),Ma=it(),pv=we(),hv=q(),mv=new RegExp(`(?:on\\s{0,3})?(${Ma.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${Ma.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${pv.matchAnyPattern(Gp.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${Bp.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Yp=1,$p=2,gv=3,jp=4,Pu=class extends hv.AbstractParserWithWordBoundaryChecking{innerPattern(){return mv}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Gp.MONTH_DICTIONARY[t[gv].toLowerCase()],s=Ma.parseOrdinalNumberPattern(t[Yp]);if(s>31)return t.index=t.index+t[Yp].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[jp]){let a=Bp.parseYear(t[jp]);n.start.assign("year",a)}else{let a=fv.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[$p]){let a=Ma.parseOrdinalNumberPattern(t[$p]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Nu.default=Pu});var Xp=b(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});var yv=nt(),Vp=it(),xa=it(),Qp=it(),Tv=we(),_v=q(),bv=new RegExp(`(${Tv.matchAnyPattern(Vp.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${xa.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${xa.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Qp.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),vv=1,Ev=2,zp=3,Kp=4,Iu=class extends _v.AbstractParserWithWordBoundaryChecking{innerPattern(){return bv}innerExtract(e,t){let n=Vp.MONTH_DICTIONARY[t[vv].toLowerCase()],i=xa.parseOrdinalNumberPattern(t[Ev]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[Kp]){let u=Qp.parseYear(t[Kp]);s.assign("year",u)}else{let u=yv.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[zp])return s;let a=xa.parseOrdinalNumberPattern(t[zp]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Fu.default=Iu});var eh=b(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});var Lu=it(),wv=nt(),kv=we(),Jp=it(),Ov=q(),Sv=new RegExp(`((?:in)\\s*)?(${kv.matchAnyPattern(Lu.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Jp.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),Dv=1,Rv=2,Zp=3,Uu=class extends Ov.AbstractParserWithWordBoundaryChecking{innerPattern(){return Sv}innerExtract(e,t){let n=t[Rv].toLowerCase();if(t[0].length<=3&&!Lu.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[Dv]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=Lu.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Zp]){let a=Jp.parseYear(t[Zp]);i.start.assign("year",a)}else{let a=wv.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Wu.default=Uu});var nh=b(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});var rh=it(),Mv=we(),xv=q(),Av=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${Mv.matchAnyPattern(rh.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),Cv=1,Pv=2,th=3,Nv=4,qu=class extends xv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Av}innerExtract(e,t){let n=t[th]?parseInt(t[th]):rh.MONTH_DICTIONARY[t[Pv].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[Cv]);return{day:parseInt(t[Nv]),month:n,year:i}}};Yu.default=qu});var ih=b(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});var Iv=q(),Fv=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),Lv=1,Uv=2,$u=class extends Iv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Fv}innerExtract(e,t){let n=parseInt(t[Uv]),i=parseInt(t[Lv]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};ju.default=$u});var hn=b(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.AbstractTimeExpressionParser=void 0;var yt=Be();function Wv(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function qv(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var sh=2,Kn=3,Aa=4,Ca=5,Bi=6,Gu=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[sh]);if(o>100){if(this.strictMode||t[Kn]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[Kn]!=null){if(t[Kn].length==1&&!t[Bi])return null;s=parseInt(t[Kn])}if(s>=60)return null;if(o>12&&(a=yt.Meridiem.PM),t[Bi]!=null){if(o>12)return null;let u=t[Bi][0].toLowerCase();u=="a"&&(a=yt.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=yt.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",yt.Meridiem.AM):i.imply("meridiem",yt.Meridiem.PM),t[Ca]!=null){let u=parseInt(t[Ca].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Aa]!=null){let u=parseInt(t[Aa]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[Ca]!=null){let u=parseInt(t[Ca].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Aa]!=null){let u=parseInt(t[Aa]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[sh]),a=0,o=-1;if(t[Kn]!=null?a=parseInt(t[Kn]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=yt.Meridiem.PM),t[Bi]!=null){if(s>12)return null;let u=t[Bi][0].toLowerCase();u=="a"&&(o=yt.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=yt.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==yt.Meridiem.AM?(n.start.imply("meridiem",yt.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",yt.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",yt.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",yt.Meridiem.PM)):s>12?i.imply("meridiem",yt.Meridiem.PM):s<=12&&i.imply("meridiem",yt.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=Wv(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=qv(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};Pa.AbstractTimeExpressionParser=Gu});var ah=b(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});var Na=Be(),Yv=hn(),Bu=class extends Yv.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Na.Meridiem.PM)):i<6&&n.assign("meridiem",Na.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",Na.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",Na.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Hu.default=Bu});var qt=b(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.addImpliedTimeUnits=Vn.reverseTimeUnits=void 0;function $v(r){let e={};for(let t in r)e[t]=-r[t];return e}Vn.reverseTimeUnits=$v;function jv(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}Vn.addImpliedTimeUnits=jv});var oh=b(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});var Ku=it(),Gv=Ne(),Bv=q(),Hv=qt(),zv=new RegExp(`(${Ku.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),Kv=new RegExp(`(${Ku.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),zu=class extends Bv.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Kv:zv}innerExtract(e,t){let n=Ku.parseTimeUnits(t[1]),i=Hv.reverseTimeUnits(n);return Gv.ParsingComponents.createRelativeFromReference(e.reference,i)}};Vu.default=zu});var uh=b(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});var Xu=it(),Vv=Ne(),Qv=q(),Xv=new RegExp(`(${Xu.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),Zv=new RegExp("("+Xu.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),Jv=1,Qu=class extends Qv.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Zv:Xv}innerExtract(e,t){let n=Xu.parseTimeUnits(t[Jv]);return Vv.ParsingComponents.createRelativeFromReference(e.reference,n)}};Zu.default=Qu});var Xn=b(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.MergingRefiner=Qn.Filter=void 0;var Ju=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};Qn.Filter=Ju;var el=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};Qn.MergingRefiner=el});var dr=b(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var eE=Xn(),tl=class extends eE.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};rl.default=tl});var lh=b(Hi=>{"use strict";var tE=Hi&&Hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Hi,"__esModule",{value:!0});var rE=tE(dr()),nl=class extends rE.default{patternBetween(){return/^\s*(to|-)\s*$/i}};Hi.default=nl});var ch=b(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.mergeDateTimeComponent=Zn.mergeDateTimeResult=void 0;var nE=Be();function iE(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=il(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=il(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}Zn.mergeDateTimeResult=iE;function il(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==nE.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}Zn.mergeDateTimeComponent=il});var Er=b(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});var sE=Xn(),dh=ch(),sl=class extends sE.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?dh.mergeDateTimeResult(t,n):dh.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};al.default=sl});var fh=b(zi=>{"use strict";var aE=zi&&zi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zi,"__esModule",{value:!0});var oE=aE(Er()),ol=class extends oE.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};zi.default=ol});var ph=b(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});var uE=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),lE={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},ul=class{constructor(e){this.timezone=Object.assign(Object.assign({},lE),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=uE.exec(u);if(!l)return;let c=l[1].toUpperCase(),f=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(f===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${f} for: ${s.start}`)});let h=s.start.get("timezoneOffset");h!==null&&f!=h&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",f),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",f))}),t}};ll.default=ul});var Ia=b(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});var cE=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),dE=1,fE=2,pE=3,cl=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=cE.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[fE]),o=parseInt(s[pE]||"0"),u=a*60+o;u>14*60||(s[dE]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};dl.default=cl});var hh=b(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});var fl=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};pl.default=fl});var mh=b(Ki=>{"use strict";var hE=Ki&&Ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ki,"__esModule",{value:!0});var mE=hE(Te()),hl=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=mE.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};Ki.default=hl});var gh=b(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});var gE=Xn(),ml=class extends gE.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};gl.default=ml});var _l=b(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});var yE=q(),TE=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),_E=1,bE=2,vE=3,yh=4,EE=5,Th=6,_h=7,bh=8,vh=9,yl=class extends yE.AbstractParserWithWordBoundaryChecking{innerPattern(){return TE}innerExtract(e,t){let n={};if(n.year=parseInt(t[_E]),n.month=parseInt(t[bE]),n.day=parseInt(t[vE]),t[yh]!=null)if(n.hour=parseInt(t[yh]),n.minute=parseInt(t[EE]),t[Th]!=null&&(n.second=parseInt(t[Th])),t[_h]!=null&&(n.millisecond=parseInt(t[_h])),t[bh]==null)n.timezoneOffset=0;else{let i=parseInt(t[bh]),s=0;t[vh]!=null&&(s=parseInt(t[vh]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};Tl.default=yl});var Eh=b(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});var wE=Xn(),bl=class extends wE.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};vl.default=bl});var wr=b(Jn=>{"use strict";var mn=Jn&&Jn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.includeCommonConfiguration=void 0;var kE=mn(ph()),OE=mn(Ia()),wh=mn(hh()),SE=mn(mh()),DE=mn(gh()),RE=mn(_l()),ME=mn(Eh());function xE(r,e=!1){return r.parsers.unshift(new RE.default),r.refiners.unshift(new ME.default),r.refiners.unshift(new kE.default),r.refiners.unshift(new OE.default),r.refiners.unshift(new wh.default),r.refiners.push(new wh.default),r.refiners.push(new SE.default),r.refiners.push(new DE.default(e)),r}Jn.includeCommonConfiguration=xE});var Or=b(ve=>{"use strict";var AE=ve&&ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ve,"__esModule",{value:!0});ve.noon=ve.morning=ve.midnight=ve.yesterdayEvening=ve.evening=ve.lastNight=ve.tonight=ve.theDayAfter=ve.tomorrow=ve.theDayBefore=ve.yesterday=ve.today=ve.now=void 0;var fr=Ne(),ei=AE(Te()),kr=Wt(),Vi=Be();function CE(r){let e=ei.default(r.instant),t=new fr.ParsingComponents(r,{});return kr.assignSimilarDate(t,e),kr.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}ve.now=CE;function PE(r){let e=ei.default(r.instant),t=new fr.ParsingComponents(r,{});return kr.assignSimilarDate(t,e),kr.implySimilarTime(t,e),t}ve.today=PE;function NE(r){return kh(r,1)}ve.yesterday=NE;function kh(r,e){return El(r,-e)}ve.theDayBefore=kh;function IE(r){return El(r,1)}ve.tomorrow=IE;function El(r,e){let t=ei.default(r.instant),n=new fr.ParsingComponents(r,{});return t=t.add(e,"day"),kr.assignSimilarDate(n,t),kr.implySimilarTime(n,t),n}ve.theDayAfter=El;function FE(r,e=22){let t=ei.default(r.instant),n=new fr.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",Vi.Meridiem.PM),kr.assignSimilarDate(n,t),n}ve.tonight=FE;function LE(r,e=0){let t=ei.default(r.instant),n=new fr.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),kr.assignSimilarDate(n,t),n.imply("hour",e),n}ve.lastNight=LE;function UE(r,e=20){let t=new fr.ParsingComponents(r,{});return t.imply("meridiem",Vi.Meridiem.PM),t.imply("hour",e),t}ve.evening=UE;function WE(r,e=20){let t=ei.default(r.instant),n=new fr.ParsingComponents(r,{});return t=t.add(-1,"day"),kr.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",Vi.Meridiem.PM),n}ve.yesterdayEvening=WE;function qE(r){let e=new fr.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}ve.midnight=qE;function YE(r,e=6){let t=new fr.ParsingComponents(r,{});return t.imply("meridiem",Vi.Meridiem.AM),t.imply("hour",e),t}ve.morning=YE;function $E(r){let e=new fr.ParsingComponents(r,{});return e.imply("meridiem",Vi.Meridiem.AM),e.imply("hour",12),e}ve.noon=$E});var Oh=b(Xt=>{"use strict";var jE=Xt&&Xt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),GE=Xt&&Xt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),BE=Xt&&Xt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&jE(e,r,t);return GE(e,r),e},HE=Xt&&Xt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xt,"__esModule",{value:!0});var zE=HE(Te()),KE=q(),VE=Wt(),Qi=BE(Or()),QE=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,wl=class extends KE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return QE}innerExtract(e,t){let n=zE.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return Qi.now(e.reference);case"today":return Qi.today(e.reference);case"yesterday":return Qi.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return Qi.tomorrow(e.reference);case"tonight":return Qi.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),VE.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};Xt.default=wl});var Sh=b(Xi=>{"use strict";var XE=Xi&&Xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xi,"__esModule",{value:!0});var Fa=Be(),ZE=q(),JE=XE(Te()),ew=Wt(),tw=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,kl=class extends ZE.AbstractParserWithWordBoundaryChecking{innerPattern(){return tw}innerExtract(e,t){let n=JE.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",Fa.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",Fa.Meridiem.PM),i.imply("hour",20);break;case"midnight":ew.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",Fa.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",Fa.Meridiem.AM),i.imply("hour",12);break}return i}};Xi.default=kl});var gn=b(zr=>{"use strict";var rw=zr&&zr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zr,"__esModule",{value:!0});zr.toDayJSClosestWeekday=zr.toDayJSWeekday=void 0;var Dh=rw(Te());function nw(r,e,t){if(!t)return Rh(r,e);let n=Dh.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}zr.toDayJSWeekday=nw;function Rh(r,e){let t=Dh.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}zr.toDayJSClosestWeekday=Rh});var xh=b(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var Mh=it(),iw=we(),sw=q(),aw=gn(),ow=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${iw.matchAnyPattern(Mh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),uw=1,lw=2,cw=3,Ol=class extends sw.AbstractParserWithWordBoundaryChecking{innerPattern(){return ow}innerExtract(e,t){let n=t[lw].toLowerCase(),i=Mh.WEEKDAY_DICTIONARY[n],s=t[uw],a=t[cw],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=aw.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Sl.default=Ol});var Ph=b(Zi=>{"use strict";var dw=Zi&&Zi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zi,"__esModule",{value:!0});var Ch=it(),Ah=Ne(),fw=dw(Te()),pw=q(),hw=we(),mw=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${hw.matchAnyPattern(Ch.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),gw=1,yw=2,Dl=class extends pw.AbstractParserWithWordBoundaryChecking{innerPattern(){return mw}innerExtract(e,t){let n=t[gw].toLowerCase(),i=t[yw].toLowerCase(),s=Ch.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,Ah.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,Ah.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=fw.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Zi.default=Dl});var Zt=b(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.ParsingContext=ni.Chrono=void 0;var ti=Ne(),Tw=Rl(),ri=class{constructor(e){e=e||Tw.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new ri({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new La(e,t,n),s=[];return this.parsers.forEach(a=>{let o=ri.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof ti.ParsingResult?c=l:l instanceof ti.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};ni.Chrono=ri;var La=class{constructor(e,t,n){this.text=e,this.reference=new ti.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof ti.ParsingComponents?e:new ti.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new ti.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};ni.ParsingContext=La});var yn=b(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});var Nh=nt(),_w=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Ua=1,Ih=5,Fh=2,Lh=3,Ml=4,xl=class{constructor(e){this.groupNumberMonth=e?Lh:Fh,this.groupNumberDay=e?Fh:Lh}pattern(){return _w}extract(e,t){if(t[Ua]=="/"||t[Ih]=="/"){t.index+=t[0].length;return}let n=t.index+t[Ua].length,i=t[0].substr(t[Ua].length,t[0].length-t[Ua].length-t[Ih].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[Ml]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[Ml]){let u=parseInt(t[Ml]),l=Nh.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=Nh.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};Al.default=xl});var Wh=b(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});var Uh=it(),bw=Ne(),vw=q(),Ew=qt(),ww=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Uh.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Cl=class extends vw.AbstractParserWithWordBoundaryChecking{innerPattern(){return ww}innerExtract(e,t){let n=t[1].toLowerCase(),i=Uh.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=Ew.reverseTimeUnits(i);break}return bw.ParsingComponents.createRelativeFromReference(e.reference,i)}};Pl.default=Cl});var Yh=b(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});var kw=Xn(),Nl=Ne(),Ow=it(),Sw=qt();function qh(r){return r.text.match(/\s+(before|from)$/i)!=null}function Dw(r){return r.text.match(/\s+(after|since)$/i)!=null}var Il=class extends kw.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!qh(t)&&!Dw(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=Ow.parseTimeUnits(t.text);qh(t)&&(i=Sw.reverseTimeUnits(i));let s=Nl.ParsingComponents.createRelativeFromReference(new Nl.ReferenceWithTimezone(n.start.date()),i);return new Nl.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};Fl.default=Il});var Rl=b(qe=>{"use strict";var ze=qe&&qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qe,"__esModule",{value:!0});qe.createConfiguration=qe.createCasualConfiguration=qe.parseDate=qe.parse=qe.GB=qe.strict=qe.casual=void 0;var Rw=ze(qp()),Mw=ze(Hp()),xw=ze(Xp()),Aw=ze(eh()),Cw=ze(nh()),Pw=ze(ih()),Nw=ze(ah()),Iw=ze(oh()),Fw=ze(uh()),Lw=ze(lh()),Uw=ze(fh()),Ww=wr(),qw=ze(Oh()),Yw=ze(Sh()),$w=ze(xh()),jw=ze(Ph()),Ll=Zt(),Gw=ze(yn()),Bw=ze(Wh()),Hw=ze(Yh());qe.casual=new Ll.Chrono($h(!1));qe.strict=new Ll.Chrono(Wa(!0,!1));qe.GB=new Ll.Chrono(Wa(!1,!0));function zw(r,e,t){return qe.casual.parse(r,e,t)}qe.parse=zw;function Kw(r,e,t){return qe.casual.parseDate(r,e,t)}qe.parseDate=Kw;function $h(r=!1){let e=Wa(!1,r);return e.parsers.unshift(new qw.default),e.parsers.unshift(new Yw.default),e.parsers.unshift(new Aw.default),e.parsers.unshift(new jw.default),e.parsers.unshift(new Bw.default),e}qe.createCasualConfiguration=$h;function Wa(r=!0,e=!1){return Ww.includeCommonConfiguration({parsers:[new Gw.default(e),new Rw.default,new Mw.default,new xw.default,new $w.default,new Cw.default,new Pw.default,new Nw.default(r),new Iw.default(r),new Fw.default(r)],refiners:[new Hw.default,new Uw.default,new Lw.default]},r)}qe.createConfiguration=Wa});var jh=b(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});var Vw=hn(),Ul=class extends Vw.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Wl.default=Ul});var Ji=b(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.parseTimeUnits=Se.TIME_UNITS_PATTERN=Se.parseYear=Se.YEAR_PATTERN=Se.parseNumberPattern=Se.NUMBER_PATTERN=Se.TIME_UNIT_DICTIONARY=Se.INTEGER_WORD_DICTIONARY=Se.MONTH_DICTIONARY=Se.WEEKDAY_DICTIONARY=void 0;var ql=we(),Qw=nt();Se.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};Se.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};Se.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};Se.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};Se.NUMBER_PATTERN=`(?:${ql.matchAnyPattern(Se.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function Bh(r){let e=r.toLowerCase();return Se.INTEGER_WORD_DICTIONARY[e]!==void 0?Se.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}Se.parseNumberPattern=Bh;Se.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function Xw(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return Qw.findMostLikelyADYear(e)}Se.parseYear=Xw;var Hh=`(${Se.NUMBER_PATTERN})\\s{0,5}(${ql.matchAnyPattern(Se.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Gh=new RegExp(Hh,"i");Se.TIME_UNITS_PATTERN=ql.repeatedTimeunitPattern("",Hh);function Zw(r){let e={},t=r,n=Gh.exec(t);for(;n;)Jw(e,n),t=t.substring(n[0].length),n=Gh.exec(t);return e}Se.parseTimeUnits=Zw;function Jw(r,e){let t=Bh(e[1]),n=Se.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Kh=b($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});var zh=Ji(),ek=we(),tk=q(),rk=gn(),nk=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${ek.matchAnyPattern(zh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),ik=1,sk=3,ak=2,Yl=class extends tk.AbstractParserWithWordBoundaryChecking{innerPattern(){return nk}innerExtract(e,t){let n=t[ak].toLowerCase(),i=zh.WEEKDAY_DICTIONARY[n],s=t[ik],a=t[sk],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=rk.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};$l.default=Yl});var Zh=b(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});var Kr=Be(),ok=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),uk=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),lk=2,Vh=3,Qh=4,Xh=5,ii=class{pattern(e){return ok}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=ii.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=uk.exec(i);return s&&(n.end=ii.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[lk]),t[Vh]!=null&&(i=parseInt(t[Vh])),i>=60||n>24)return null;if(n>=12&&(s=Kr.Meridiem.PM),t[Xh]!=null){if(n>12)return null;let a=t[Xh].toLowerCase();a.match(/morgen|vormittag/)&&(s=Kr.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=Kr.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=Kr.Meridiem.AM,n=0):n<6?s=Kr.Meridiem.AM:(s=Kr.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Kr.Meridiem.AM):e.imply("meridiem",Kr.Meridiem.PM),t[Qh]!=null){let a=parseInt(t[Qh]);if(a>=60)return null;e.assign("second",a)}return e}};jl.default=ii});var Jh=b(es=>{"use strict";var ck=es&&es.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(es,"__esModule",{value:!0});var dk=ck(dr()),Gl=class extends dk.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};es.default=Gl});var em=b(ts=>{"use strict";var fk=ts&&ts.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ts,"__esModule",{value:!0});var pk=fk(Er()),Bl=class extends pk.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};ts.default=Bl});var Hl=b(ns=>{"use strict";var hk=ns&&ns.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ns,"__esModule",{value:!0});var mk=hk(Te()),Tn=Be(),gk=q(),yk=Wt(),Tk=qt(),rs=class extends gk.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=mk.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return yk.implySimilarTime(s,n),rs.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Tn.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Tn.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Tn.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Tn.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Tn.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Tn.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=Tk.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Tn.Meridiem.AM);break}return e}};ns.default=rs});var nm=b(Jt=>{"use strict";var _k=Jt&&Jt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),bk=Jt&&Jt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),vk=Jt&&Jt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&_k(e,r,t);return bk(e,r),e},rm=Jt&&Jt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jt,"__esModule",{value:!0});var Ek=rm(Te()),wk=q(),_n=Wt(),kk=rm(Hl()),tm=vk(Or()),Ok=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),Sk=1,Dk=2,zl=class extends wk.AbstractParserWithWordBoundaryChecking{innerPattern(e){return Ok}innerExtract(e,t){let n=Ek.default(e.refDate),i=(t[Sk]||"").toLowerCase(),s=(t[Dk]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=tm.now(e.reference);break;case"heute":a=tm.today(e.reference);break;case"morgen":_n.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),_n.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),_n.assignSimilarDate(a,n),_n.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),_n.assignSimilarDate(a,n),_n.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),_n.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=kk.default.extractTimeComponents(a,s)),a}};Jt.default=zl});var lm=b(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});var Rk=nt(),om=Ji(),um=Ji(),Mk=we(),xk=q(),Ak=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${Mk.matchAnyPattern(om.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${um.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),im=1,sm=2,Ck=3,am=4,Kl=class extends xk.AbstractParserWithWordBoundaryChecking{innerPattern(){return Ak}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=om.MONTH_DICTIONARY[t[Ck].toLowerCase()],s=parseInt(t[im]);if(s>31)return t.index=t.index+t[im].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[am]){let a=um.parseYear(t[am]);n.start.assign("year",a)}else{let a=Rk.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[sm]){let a=parseInt(t[sm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Vl.default=Kl});var cm=b(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});var qa=Ji(),Pk=Ne(),Nk=q(),Ik=qt(),Fk=we(),Ql=class extends Nk.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${qa.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${Fk.matchAnyPattern(qa.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?qa.parseNumberPattern(t[2]):1,i=qa.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=Ik.reverseTimeUnits(s)),Pk.ParsingComponents.createRelativeFromReference(e.reference,s)}};Xl.default=Ql});var pm=b(Ke=>{"use strict";var er=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.createConfiguration=Ke.createCasualConfiguration=Ke.parseDate=Ke.parse=Ke.strict=Ke.casual=void 0;var Lk=wr(),dm=Zt(),Uk=er(yn()),Wk=er(_l()),qk=er(jh()),Yk=er(Kh()),$k=er(Zh()),jk=er(Jh()),Gk=er(em()),Bk=er(nm()),Hk=er(Hl()),zk=er(lm()),Kk=er(cm());Ke.casual=new dm.Chrono(fm());Ke.strict=new dm.Chrono(Zl(!0));function Vk(r,e,t){return Ke.casual.parse(r,e,t)}Ke.parse=Vk;function Qk(r,e,t){return Ke.casual.parseDate(r,e,t)}Ke.parseDate=Qk;function fm(r=!0){let e=Zl(!1,r);return e.parsers.unshift(new Hk.default),e.parsers.unshift(new Bk.default),e.parsers.unshift(new Kk.default),e}Ke.createCasualConfiguration=fm;function Zl(r=!0,e=!0){return Lk.includeCommonConfiguration({parsers:[new Wk.default,new Uk.default(e),new qk.default,new $k.default,new zk.default,new Yk.default],refiners:[new jk.default,new Gk.default]},r)}Ke.createConfiguration=Zl});var mm=b(tr=>{"use strict";var Xk=tr&&tr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Zk=tr&&tr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Jk=tr&&tr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Xk(e,r,t);return Zk(e,r),e},e1=tr&&tr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(tr,"__esModule",{value:!0});var t1=e1(Te()),r1=Be(),n1=q(),hm=Wt(),Ya=Jk(Or()),Jl=class extends n1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=t1.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return Ya.now(e.reference);case"aujourd'hui":return Ya.today(e.reference);case"hier":return Ya.yesterday(e.reference);case"demain":return Ya.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(hm.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",r1.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),hm.assignSimilarDate(s,n),s.imply("hour",0))}return s}};tr.default=Jl});var gm=b(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});var is=Be(),i1=q(),ec=class extends i1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",is.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",is.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",is.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",is.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",is.Meridiem.AM);break}return i}};tc.default=ec});var ym=b(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});var s1=hn(),rc=class extends s1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};nc.default=rc});var Tm=b(ss=>{"use strict";var a1=ss&&ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ss,"__esModule",{value:!0});var o1=a1(Er()),ic=class extends o1.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};ss.default=ic});var _m=b(as=>{"use strict";var u1=as&&as.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(as,"__esModule",{value:!0});var l1=u1(dr()),sc=class extends l1.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};as.default=sc});var Vr=b(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.parseTimeUnits=_e.TIME_UNITS_PATTERN=_e.parseYear=_e.YEAR_PATTERN=_e.parseOrdinalNumberPattern=_e.ORDINAL_NUMBER_PATTERN=_e.parseNumberPattern=_e.NUMBER_PATTERN=_e.TIME_UNIT_DICTIONARY=_e.INTEGER_WORD_DICTIONARY=_e.MONTH_DICTIONARY=_e.WEEKDAY_DICTIONARY=void 0;var ac=we();_e.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};_e.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};_e.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};_e.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};_e.NUMBER_PATTERN=`(?:${ac.matchAnyPattern(_e.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function vm(r){let e=r.toLowerCase();return _e.INTEGER_WORD_DICTIONARY[e]!==void 0?_e.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}_e.parseNumberPattern=vm;_e.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function c1(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}_e.parseOrdinalNumberPattern=c1;_e.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function d1(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}_e.parseYear=d1;var Em=`(${_e.NUMBER_PATTERN})\\s{0,5}(${ac.matchAnyPattern(_e.TIME_UNIT_DICTIONARY)})\\s{0,5}`,bm=new RegExp(Em,"i");_e.TIME_UNITS_PATTERN=ac.repeatedTimeunitPattern("",Em);function f1(r){let e={},t=r,n=bm.exec(t);for(;n;)p1(e,n),t=t.substring(n[0].length),n=bm.exec(t);return e}_e.parseTimeUnits=f1;function p1(r,e){let t=vm(e[1]),n=_e.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var km=b(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});var wm=Vr(),h1=we(),m1=q(),g1=gn(),y1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${h1.matchAnyPattern(wm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),T1=1,_1=2,oc=class extends m1.AbstractParserWithWordBoundaryChecking{innerPattern(){return y1}innerExtract(e,t){let n=t[T1].toLowerCase(),i=wm.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[_1];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=g1.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};uc.default=oc});var Rm=b(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});var os=Be(),b1=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),v1=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),E1=2,Om=3,Sm=4,Dm=5,si=class{pattern(e){return b1}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=si.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=v1.exec(i);return s&&(n.end=si.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[E1]),t[Om]!=null&&(i=parseInt(t[Om])),i>=60||n>24)return null;if(n>=12&&(s=os.Meridiem.PM),t[Dm]!=null){if(n>12)return null;let a=t[Dm][0].toLowerCase();a=="a"&&(s=os.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=os.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",os.Meridiem.AM):e.imply("meridiem",os.Meridiem.PM),t[Sm]!=null){let a=parseInt(t[Sm]);if(a>=60)return null;e.assign("second",a)}return e}};lc.default=si});var Nm=b(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});var w1=nt(),Cm=Vr(),Pm=Vr(),$a=Vr(),k1=we(),O1=q(),S1=new RegExp(`(?:on\\s*?)?(${$a.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${$a.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${k1.matchAnyPattern(Cm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Pm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Mm=1,xm=2,D1=3,Am=4,cc=class extends O1.AbstractParserWithWordBoundaryChecking{innerPattern(){return S1}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Cm.MONTH_DICTIONARY[t[D1].toLowerCase()],s=$a.parseOrdinalNumberPattern(t[Mm]);if(s>31)return t.index=t.index+t[Mm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Am]){let a=Pm.parseYear(t[Am]);n.start.assign("year",a)}else{let a=w1.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[xm]){let a=$a.parseOrdinalNumberPattern(t[xm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};dc.default=cc});var Fm=b(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});var Im=Vr(),R1=Ne(),M1=q(),x1=qt(),fc=class extends M1.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${Im.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=Im.parseTimeUnits(t[1]),i=x1.reverseTimeUnits(n);return R1.ParsingComponents.createRelativeFromReference(e.reference,i)}};pc.default=fc});var Um=b(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});var Lm=Vr(),A1=Ne(),C1=q(),hc=class extends C1.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${Lm.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=Lm.parseTimeUnits(t[1]);return A1.ParsingComponents.createRelativeFromReference(e.reference,n)}};mc.default=hc});var Wm=b(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});var ja=Vr(),P1=Ne(),N1=q(),I1=qt(),F1=we(),gc=class extends N1.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${ja.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${F1.matchAnyPattern(ja.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?ja.parseNumberPattern(t[1]):1,i=ja.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=I1.reverseTimeUnits(s)),P1.ParsingComponents.createRelativeFromReference(e.reference,s)}};yc.default=gc});var $m=b(Ve=>{"use strict";var Yt=Ve&&Ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.createConfiguration=Ve.createCasualConfiguration=Ve.parseDate=Ve.parse=Ve.strict=Ve.casual=void 0;var L1=wr(),qm=Zt(),U1=Yt(mm()),W1=Yt(gm()),q1=Yt(yn()),Y1=Yt(ym()),$1=Yt(Tm()),j1=Yt(_m()),G1=Yt(km()),B1=Yt(Rm()),H1=Yt(Nm()),z1=Yt(Fm()),K1=Yt(Um()),V1=Yt(Wm());Ve.casual=new qm.Chrono(Ym());Ve.strict=new qm.Chrono(Tc(!0));function Q1(r,e,t){return Ve.casual.parse(r,e,t)}Ve.parse=Q1;function X1(r,e,t){return Ve.casual.parseDate(r,e,t)}Ve.parseDate=X1;function Ym(r=!0){let e=Tc(!1,r);return e.parsers.unshift(new U1.default),e.parsers.unshift(new W1.default),e.parsers.unshift(new V1.default),e}Ve.createCasualConfiguration=Ym;function Tc(r=!0,e=!0){return L1.includeCommonConfiguration({parsers:[new q1.default(e),new H1.default,new Y1.default,new B1.default,new z1.default,new K1.default,new G1.default],refiners:[new $1.default,new j1.default]},r)}Ve.createConfiguration=Tc});var jm=b(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.toHankaku=void 0;function Z1(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,J1)}Ga.toHankaku=Z1;function J1(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var Bm=b(us=>{"use strict";var eO=us&&us.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(us,"__esModule",{value:!0});var _c=jm(),tO=nt(),rO=eO(Te()),nO=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,Gm=1,iO=2,bc=3,sO=4,aO=5,oO=6,vc=class{pattern(){return nO}extract(e,t){let n=parseInt(_c.toHankaku(t[aO])),i=parseInt(_c.toHankaku(t[oO])),s=e.createParsingComponents({day:i,month:n});if(t[Gm]&&t[Gm].match("\u540C|\u4ECA|\u672C")){let a=rO.default(e.refDate);s.assign("year",a.year())}if(t[iO]){let a=t[sO],o=a=="\u5143"?1:parseInt(_c.toHankaku(a));t[bc]=="\u4EE4\u548C"?o+=2018:t[bc]=="\u5E73\u6210"?o+=1988:t[bc]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=tO.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};us.default=vc});var Hm=b(ls=>{"use strict";var uO=ls&&ls.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ls,"__esModule",{value:!0});var lO=uO(dr()),Ec=class extends lO.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};ls.default=Ec});var Km=b(rr=>{"use strict";var cO=rr&&rr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),dO=rr&&rr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),fO=rr&&rr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&cO(e,r,t);return dO(e,r),e},pO=rr&&rr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rr,"__esModule",{value:!0});var hO=pO(Te()),zm=Be(),wc=fO(Or()),mO=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,kc=class{pattern(){return mO}extract(e,t){let n=t[0],i=hO.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return wc.yesterday(e.reference);case"\u660E\u65E5":return wc.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return wc.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",zm.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",zm.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};rr.default=kc});var Xm=b(Qe=>{"use strict";var Oc=Qe&&Qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.createConfiguration=Qe.createCasualConfiguration=Qe.parseDate=Qe.parse=Qe.strict=Qe.casual=void 0;var gO=Oc(Bm()),yO=Oc(Hm()),TO=Oc(Km()),Vm=Zt();Qe.casual=new Vm.Chrono(Qm());Qe.strict=new Vm.Chrono(Sc());function _O(r,e,t){return Qe.casual.parse(r,e,t)}Qe.parse=_O;function bO(r,e,t){return Qe.casual.parseDate(r,e,t)}Qe.parseDate=bO;function Qm(){let r=Sc();return r.parsers.unshift(new TO.default),r}Qe.createCasualConfiguration=Qm;function Sc(){return{parsers:[new gO.default],refiners:[new yO.default]}}Qe.createConfiguration=Sc});var Ba=b(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.parseYear=pr.YEAR_PATTERN=pr.MONTH_DICTIONARY=pr.WEEKDAY_DICTIONARY=void 0;pr.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};pr.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};pr.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function vO(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}pr.parseYear=vO});var Jm=b(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});var Zm=Ba(),EO=we(),wO=q(),kO=gn(),OO=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${EO.matchAnyPattern(Zm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),SO=1,DO=2,RO=3,Dc=class extends wO.AbstractParserWithWordBoundaryChecking{innerPattern(){return OO}innerExtract(e,t){let n=t[DO].toLowerCase(),i=Zm.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[SO],a=t[RO],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=kO.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Rc.default=Dc});var eg=b(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});var MO=hn(),Mc=class extends MO.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};xc.default=Mc});var tg=b(cs=>{"use strict";var xO=cs&&cs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cs,"__esModule",{value:!0});var AO=xO(Er()),Ac=class extends AO.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};cs.default=Ac});var rg=b(ds=>{"use strict";var CO=ds&&ds.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ds,"__esModule",{value:!0});var PO=CO(dr()),Cc=class extends PO.default{patternBetween(){return/^\s*(?:-)\s*$/i}};ds.default=Cc});var ug=b(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});var NO=nt(),ag=Ba(),og=Ba(),IO=we(),FO=q(),LO=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${IO.matchAnyPattern(ag.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${og.YEAR_PATTERN}))?(?=\\W|$)`,"i"),ng=1,ig=2,UO=3,sg=4,Pc=class extends FO.AbstractParserWithWordBoundaryChecking{innerPattern(){return LO}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=ag.MONTH_DICTIONARY[t[UO].toLowerCase()],s=parseInt(t[ng]);if(s>31)return t.index=t.index+t[ng].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[sg]){let a=og.parseYear(t[sg]);n.start.assign("year",a)}else{let a=NO.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[ig]){let a=parseInt(t[ig]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Nc.default=Pc});var lg=b(Sr=>{"use strict";var WO=Sr&&Sr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),qO=Sr&&Sr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),YO=Sr&&Sr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&WO(e,r,t);return qO(e,r),e};Object.defineProperty(Sr,"__esModule",{value:!0});var $O=q(),Ha=YO(Or()),Ic=class extends $O.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return Ha.now(e.reference);case"hoje":return Ha.today(e.reference);case"amanha":case"amanh\xE3":return Ha.tomorrow(e.reference);case"ontem":return Ha.yesterday(e.reference)}return i}};Sr.default=Ic});var cg=b(fs=>{"use strict";var jO=fs&&fs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fs,"__esModule",{value:!0});var za=Be(),GO=q(),BO=Wt(),HO=jO(Te()),Fc=class extends GO.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=HO.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",za.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",za.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",za.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":BO.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",za.Meridiem.AM),i.imply("hour",12);break}return i}};fs.default=Fc});var pg=b(Xe=>{"use strict";var Qr=Xe&&Xe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.createConfiguration=Xe.createCasualConfiguration=Xe.parseDate=Xe.parse=Xe.strict=Xe.casual=void 0;var zO=wr(),dg=Zt(),KO=Qr(yn()),VO=Qr(Jm()),QO=Qr(eg()),XO=Qr(tg()),ZO=Qr(rg()),JO=Qr(ug()),eS=Qr(lg()),tS=Qr(cg());Xe.casual=new dg.Chrono(fg());Xe.strict=new dg.Chrono(Lc(!0));function rS(r,e,t){return Xe.casual.parse(r,e,t)}Xe.parse=rS;function nS(r,e,t){return Xe.casual.parseDate(r,e,t)}Xe.parseDate=nS;function fg(r=!0){let e=Lc(!1,r);return e.parsers.push(new eS.default),e.parsers.push(new tS.default),e}Xe.createCasualConfiguration=fg;function Lc(r=!0,e=!0){return zO.includeCommonConfiguration({parsers:[new KO.default(e),new VO.default,new QO.default,new JO.default],refiners:[new XO.default,new ZO.default]},r)}Xe.createConfiguration=Lc});var hg=b(ps=>{"use strict";var iS=ps&&ps.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ps,"__esModule",{value:!0});var sS=iS(dr()),Uc=class extends sS.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};ps.default=Uc});var mg=b(hs=>{"use strict";var aS=hs&&hs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hs,"__esModule",{value:!0});var oS=aS(Er()),Wc=class extends oS.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};hs.default=Wc});var gg=b(Dr=>{"use strict";var uS=Dr&&Dr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),lS=Dr&&Dr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),cS=Dr&&Dr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&uS(e,r,t);return lS(e,r),e};Object.defineProperty(Dr,"__esModule",{value:!0});var dS=q(),Ka=cS(Or()),qc=class extends dS.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return Ka.now(e.reference);case"vandaag":return Ka.today(e.reference);case"morgen":case"morgend":return Ka.tomorrow(e.reference);case"gisteren":return Ka.yesterday(e.reference)}return i}};Dr.default=qc});var yg=b(ms=>{"use strict";var fS=ms&&ms.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ms,"__esModule",{value:!0});var Va=Be(),pS=q(),hS=fS(Te()),mS=Wt(),gS=1,yS=2,Yc=class extends pS.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=hS.default(e.refDate),i=e.createParsingComponents();switch(t[gS]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[yS].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",Va.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",Va.Meridiem.PM),i.imply("hour",20);break;case"middernacht":mS.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",Va.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",Va.Meridiem.AM),i.imply("hour",12);break}return i}};ms.default=Yc});var Rt=b(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.parseTimeUnits=ue.TIME_UNITS_PATTERN=ue.parseYear=ue.YEAR_PATTERN=ue.parseOrdinalNumberPattern=ue.ORDINAL_NUMBER_PATTERN=ue.parseNumberPattern=ue.NUMBER_PATTERN=ue.TIME_UNIT_DICTIONARY=ue.ORDINAL_WORD_DICTIONARY=ue.INTEGER_WORD_DICTIONARY=ue.MONTH_DICTIONARY=ue.WEEKDAY_DICTIONARY=void 0;var Qa=we(),TS=nt();ue.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};ue.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};ue.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};ue.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};ue.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};ue.NUMBER_PATTERN=`(?:${Qa.matchAnyPattern(ue.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function _g(r){let e=r.toLowerCase();return ue.INTEGER_WORD_DICTIONARY[e]!==void 0?ue.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}ue.parseNumberPattern=_g;ue.ORDINAL_NUMBER_PATTERN=`(?:${Qa.matchAnyPattern(ue.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function _S(r){let e=r.toLowerCase();return ue.ORDINAL_WORD_DICTIONARY[e]!==void 0?ue.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}ue.parseOrdinalNumberPattern=_S;ue.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function bS(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return TS.findMostLikelyADYear(e)}ue.parseYear=bS;var bg=`(${ue.NUMBER_PATTERN})\\s{0,5}(${Qa.matchAnyPattern(ue.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Tg=new RegExp(bg,"i");ue.TIME_UNITS_PATTERN=Qa.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",bg);function vS(r){let e={},t=r,n=Tg.exec(t);for(;n;)ES(e,n),t=t.substring(n[0].length),n=Tg.exec(t);return e}ue.parseTimeUnits=vS;function ES(r,e){let t=_g(e[1]),n=ue.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Eg=b(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});var vg=Rt(),wS=Ne(),kS=q(),$c=class extends kS.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+vg.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=vg.parseTimeUnits(t[1]);return wS.ParsingComponents.createRelativeFromReference(e.reference,n)}};jc.default=$c});var kg=b(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});var wg=Rt(),OS=we(),SS=q(),DS=gn(),RS=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${OS.matchAnyPattern(wg.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),MS=1,xS=2,AS=3,Gc=class extends SS.AbstractParserWithWordBoundaryChecking{innerPattern(){return RS}innerExtract(e,t){let n=t[xS].toLowerCase(),i=wg.WEEKDAY_DICTIONARY[n],s=t[MS],a=t[AS],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=DS.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Bc.default=Gc});var xg=b(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});var CS=nt(),Rg=Rt(),Xa=Rt(),Mg=Rt(),PS=we(),NS=q(),IS=new RegExp(`(?:on\\s*?)?(${Xa.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${Xa.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+PS.matchAnyPattern(Rg.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${Mg.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),FS=3,Og=1,Sg=2,Dg=4,Hc=class extends NS.AbstractParserWithWordBoundaryChecking{innerPattern(){return IS}innerExtract(e,t){let n=Rg.MONTH_DICTIONARY[t[FS].toLowerCase()],i=Xa.parseOrdinalNumberPattern(t[Og]);if(i>31)return t.index=t.index+t[Og].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[Dg]){let u=Mg.parseYear(t[Dg]);s.assign("year",u)}else{let u=CS.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Sg])return s;let a=Xa.parseOrdinalNumberPattern(t[Sg]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};zc.default=Hc});var Ng=b(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});var Cg=Rt(),LS=nt(),US=we(),Pg=Rt(),WS=q(),qS=new RegExp(`(${US.matchAnyPattern(Cg.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Pg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),YS=1,Ag=2,Kc=class extends WS.AbstractParserWithWordBoundaryChecking{innerPattern(){return qS}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[YS],s=Cg.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[Ag]){let a=Pg.parseYear(t[Ag]);n.assign("year",a)}else{let a=LS.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};Vc.default=Kc});var Ig=b(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});var $S=q(),jS=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),GS=1,BS=2,Qc=class extends $S.AbstractParserWithWordBoundaryChecking{innerPattern(){return jS}innerExtract(e,t){let n=parseInt(t[BS]),i=parseInt(t[GS]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Xc.default=Qc});var Fg=b(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});var HS=hn(),Zc=class extends HS.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Jc.default=Zc});var Wg=b(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});var Ug=Rt(),zS=we(),KS=q(),VS=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${zS.matchAnyPattern(Ug.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),QS=1,XS=2,Lg=3,ZS=4,ed=class extends KS.AbstractParserWithWordBoundaryChecking{innerPattern(){return VS}innerExtract(e,t){let n=t[Lg]?parseInt(t[Lg]):Ug.MONTH_DICTIONARY[t[XS].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[QS]);return{day:parseInt(t[ZS]),month:n,year:i}}};td.default=ed});var qg=b(gs=>{"use strict";var JS=gs&&gs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gs,"__esModule",{value:!0});var eD=q(),Za=Be(),rd=Wt(),tD=JS(Te()),rD=1,nD=2,nd=class extends eD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[rD].toLowerCase(),i=t[nD].toLowerCase(),s=e.createParsingComponents(),a=tD.default(e.refDate);switch(n){case"gisteren":rd.assignSimilarDate(s,a.add(-1,"day"));break;case"van":rd.assignSimilarDate(s,a);break;case"morgen":rd.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",Za.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",Za.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",Za.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",Za.Meridiem.PM),s.imply("hour",20);break}return s}};gs.default=nd});var $g=b(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});var Yg=Rt(),iD=Ne(),sD=q(),aD=qt(),oD=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${Yg.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),id=class extends sD.AbstractParserWithWordBoundaryChecking{innerPattern(){return oD}innerExtract(e,t){let n=t[1].toLowerCase(),i=Yg.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=aD.reverseTimeUnits(i);break}return iD.ParsingComponents.createRelativeFromReference(e.reference,i)}};sd.default=id});var Bg=b(ys=>{"use strict";var uD=ys&&ys.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ys,"__esModule",{value:!0});var Gg=Rt(),jg=Ne(),lD=uD(Te()),cD=q(),dD=we(),fD=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${dD.matchAnyPattern(Gg.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),pD=1,hD=2,ad=class extends cD.AbstractParserWithWordBoundaryChecking{innerPattern(){return fD}innerExtract(e,t){let n=t[pD].toLowerCase(),i=t[hD].toLowerCase(),s=Gg.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,jg.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,jg.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=lD.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};ys.default=ad});var Hg=b(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});var ud=Rt(),mD=Ne(),gD=q(),yD=qt(),TD=new RegExp("("+ud.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),_D=new RegExp("("+ud.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),od=class extends gD.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?_D:TD}innerExtract(e,t){let n=ud.parseTimeUnits(t[1]),i=yD.reverseTimeUnits(n);return mD.ParsingComponents.createRelativeFromReference(e.reference,i)}};ld.default=od});var zg=b(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});var dd=Rt(),bD=Ne(),vD=q(),ED=new RegExp("("+dd.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),wD=new RegExp("("+dd.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),kD=1,cd=class extends vD.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?wD:ED}innerExtract(e,t){let n=dd.parseTimeUnits(t[kD]);return bD.ParsingComponents.createRelativeFromReference(e.reference,n)}};fd.default=cd});var Xg=b(Ze=>{"use strict";var st=Ze&&Ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.createConfiguration=Ze.createCasualConfiguration=Ze.parseDate=Ze.parse=Ze.strict=Ze.casual=void 0;var OD=wr(),Kg=Zt(),SD=st(hg()),DD=st(mg()),RD=st(gg()),MD=st(yg()),xD=st(yn()),AD=st(Eg()),CD=st(kg()),PD=st(xg()),Vg=st(Ng()),ND=st(Ig()),ID=st(Fg()),FD=st(Wg()),LD=st(qg()),UD=st($g()),WD=st(Bg()),qD=st(Hg()),YD=st(zg());Ze.casual=new Kg.Chrono(Qg());Ze.strict=new Kg.Chrono(pd(!0));function $D(r,e,t){return Ze.casual.parse(r,e,t)}Ze.parse=$D;function jD(r,e,t){return Ze.casual.parseDate(r,e,t)}Ze.parseDate=jD;function Qg(r=!0){let e=pd(!1,r);return e.parsers.unshift(new RD.default),e.parsers.unshift(new MD.default),e.parsers.unshift(new LD.default),e.parsers.unshift(new Vg.default),e.parsers.unshift(new WD.default),e.parsers.unshift(new UD.default),e}Ze.createCasualConfiguration=Qg;function pd(r=!0,e=!0){return OD.includeCommonConfiguration({parsers:[new xD.default(e),new AD.default,new PD.default,new Vg.default,new CD.default,new FD.default,new ND.default,new ID.default(r),new qD.default(r),new YD.default(r)],refiners:[new DD.default,new SD.default]},r)}Ze.createConfiguration=pd});var ty=b(Ts=>{"use strict";var GD=Ts&&Ts.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ts,"__esModule",{value:!0});var BD=GD(Te()),HD=q(),zD=1,Zg=2,KD=3,Jg=4,ey=5,VD=6,hd=class extends HD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=BD.default(e.refDate),a=s;if(t[zD])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[Zg]){let o=t[Zg],u=t[KD];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Jg]){let u=t[Jg][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[ey]){let o=t[ey];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[VD];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Ts.default=hd});var ai=b(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.zhStringToYear=wt.zhStringToNumber=wt.WEEKDAY_OFFSET=wt.NUMBER=void 0;wt.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};wt.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function QD(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?wt.NUMBER[n]:e*wt.NUMBER[n]:e+=wt.NUMBER[n]}return e}wt.zhStringToNumber=QD;function XD(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+wt.NUMBER[n]}return parseInt(e)}wt.zhStringToYear=XD});var ny=b(_s=>{"use strict";var ZD=_s&&_s.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_s,"__esModule",{value:!0});var JD=ZD(Te()),e0=q(),bn=ai(),md=1,ry=2,gd=3,yd=class extends e0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(bn.NUMBER).join("")+"]{4}|["+Object.keys(bn.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(bn.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(bn.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=JD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[ry]);if(isNaN(s)&&(s=bn.zhStringToNumber(t[ry])),i.start.assign("month",s),t[gd]){let a=parseInt(t[gd]);isNaN(a)&&(a=bn.zhStringToNumber(t[gd])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[md]){let a=parseInt(t[md]);isNaN(a)&&(a=bn.zhStringToYear(t[md])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};_s.default=yd});var sy=b(bs=>{"use strict";var t0=bs&&bs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bs,"__esModule",{value:!0});var r0=t0(Te()),n0=q(),iy=ai(),i0=new RegExp("(\\d+|["+Object.keys(iy.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),Td=1,s0=2,_d=class extends n0.AbstractParserWithWordBoundaryChecking{innerPattern(){return i0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Td]);if(isNaN(i)&&(i=iy.zhStringToNumber(t[Td])),isNaN(i)){let u=t[Td];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=r0.default(e.refDate),o=t[s0][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};bs.default=_d});var oy=b(vs=>{"use strict";var a0=vs&&vs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vs,"__esModule",{value:!0});var o0=a0(Te()),u0=q(),ay=ai(),l0=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(ay.WEEKDAY_OFFSET).join("|")+")"),bd=class extends u0.AbstractParserWithWordBoundaryChecking{innerPattern(){return l0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=ay.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=o0.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};vs.default=bd});var uy=b(Es=>{"use strict";var c0=Es&&Es.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Es,"__esModule",{value:!0});var d0=c0(Te()),f0=q(),jt=ai(),p0=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(jt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(jt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(jt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),h0=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(jt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(jt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(jt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Ja=1,eo=2,to=3,ro=4,no=5,io=6,$t=7,oi=8,so=9,vd=class extends f0.AbstractParserWithWordBoundaryChecking{innerPattern(){return p0}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=d0.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Ja]){var a=t[Ja];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[ro]){var o=t[ro];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[oi]){var f=parseInt(t[oi]);if(isNaN(f)&&(f=jt.zhStringToNumber(t[oi])),f>=60)return null;i.start.assign("second",f)}if(u=parseInt(t[io]),isNaN(u)&&(u=jt.zhStringToNumber(t[io])),t[$t]?t[$t]=="\u534A"?l=30:t[$t]=="\u6B63"||t[$t]=="\u6574"?l=0:(l=parseInt(t[$t]),isNaN(l)&&(l=jt.zhStringToNumber(t[$t]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[so]){if(u>12)return null;var h=t[so][0].toLowerCase();h=="a"&&(c=0,u==12&&(u=0)),h=="p"&&(c=1,u!=12&&(u+=12))}else if(t[eo]){var T=t[eo],y=T[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[to]){var E=t[to],D=E[0];D=="\u4E0A"||D=="\u671D"||D=="\u65E9"||D=="\u51CC"?(c=0,u==12&&(u=0)):(D=="\u4E0B"||D=="\u664F"||D=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[no]){var A=t[no],P=A[0];P=="\u4E0A"||P=="\u671D"||P=="\u65E9"||P=="\u51CC"?(c=0,u==12&&(u=0)):(P=="\u4E0B"||P=="\u664F"||P=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=h0.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let F=s.clone();if(i.end=e.createParsingComponents(),t[Ja]){var a=t[Ja];a=="\u660E"||a=="\u807D"?n.hour()>1&&F.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?F.add(-1,"day"):a=="\u524D"?F.add(-2,"day"):a=="\u5927\u524D"?F.add(-3,"day"):a=="\u5F8C"?F.add(2,"day"):a=="\u5927\u5F8C"&&F.add(3,"day"),i.end.assign("day",F.date()),i.end.assign("month",F.month()+1),i.end.assign("year",F.year())}else if(t[ro]){var o=t[ro];o=="\u660E"||o=="\u807D"?F.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?F.add(-1,"day"):o=="\u524D"?F.add(-2,"day"):o=="\u5927\u524D"?F.add(-3,"day"):o=="\u5F8C"?F.add(2,"day"):o=="\u5927\u5F8C"&&F.add(3,"day"),i.end.assign("day",F.date()),i.end.assign("month",F.month()+1),i.end.assign("year",F.year())}else i.end.imply("day",F.date()),i.end.imply("month",F.month()+1),i.end.imply("year",F.year());if(u=0,l=0,c=-1,t[oi]){var f=parseInt(t[oi]);if(isNaN(f)&&(f=jt.zhStringToNumber(t[oi])),f>=60)return null;i.end.assign("second",f)}if(u=parseInt(t[io]),isNaN(u)&&(u=jt.zhStringToNumber(t[io])),t[$t]?t[$t]=="\u534A"?l=30:t[$t]=="\u6B63"||t[$t]=="\u6574"?l=0:(l=parseInt(t[$t]),isNaN(l)&&(l=jt.zhStringToNumber(t[$t]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[so]){if(u>12)return null;var h=t[so][0].toLowerCase();h=="a"&&(c=0,u==12&&(u=0)),h=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[eo]){var T=t[eo],y=T[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[to]){var E=t[to],D=E[0];D=="\u4E0A"||D=="\u671D"||D=="\u65E9"||D=="\u51CC"?(c=0,u==12&&(u=0)):(D=="\u4E0B"||D=="\u664F"||D=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[no]){var A=t[no],P=A[0];P=="\u4E0A"||P=="\u671D"||P=="\u65E9"||P=="\u51CC"?(c=0,u==12&&(u=0)):(P=="\u4E0B"||P=="\u664F"||P=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Es.default=vd});var cy=b(ws=>{"use strict";var m0=ws&&ws.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ws,"__esModule",{value:!0});var g0=m0(Te()),y0=q(),ly=ai(),T0=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(ly.WEEKDAY_OFFSET).join("|")+")"),Ed=class extends y0.AbstractParserWithWordBoundaryChecking{innerPattern(){return T0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=ly.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=g0.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};ws.default=Ed});var dy=b(ks=>{"use strict";var _0=ks&&ks.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ks,"__esModule",{value:!0});var b0=_0(dr()),wd=class extends b0.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};ks.default=wd});var fy=b(Os=>{"use strict";var v0=Os&&Os.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Os,"__esModule",{value:!0});var E0=v0(Er()),kd=class extends E0.default{patternBetween(){return/^\s*$/i}};Os.default=kd});var py=b(Ye=>{"use strict";var Rr=Ye&&Ye.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.createConfiguration=Ye.createCasualConfiguration=Ye.parseDate=Ye.parse=Ye.strict=Ye.casual=Ye.hant=void 0;var Od=Zt(),w0=Rr(Ia()),k0=wr(),O0=Rr(ty()),S0=Rr(ny()),D0=Rr(sy()),R0=Rr(oy()),M0=Rr(uy()),x0=Rr(cy()),A0=Rr(dy()),C0=Rr(fy());Ye.hant=new Od.Chrono(Sd());Ye.casual=new Od.Chrono(Sd());Ye.strict=new Od.Chrono(Dd());function P0(r,e,t){return Ye.casual.parse(r,e,t)}Ye.parse=P0;function N0(r,e,t){return Ye.casual.parseDate(r,e,t)}Ye.parseDate=N0;function Sd(){let r=Dd();return r.parsers.unshift(new O0.default),r}Ye.createCasualConfiguration=Sd;function Dd(){let r=k0.includeCommonConfiguration({parsers:[new S0.default,new R0.default,new x0.default,new M0.default,new D0.default],refiners:[new A0.default,new C0.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof w0.default)),r}Ye.createConfiguration=Dd});var yy=b(Ss=>{"use strict";var I0=Ss&&Ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ss,"__esModule",{value:!0});var F0=I0(Te()),L0=q(),U0=1,hy=2,W0=3,my=4,gy=5,q0=6,Rd=class extends L0.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=F0.default(e.refDate),a=s;if(t[U0])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[hy]){let o=t[hy],u=t[W0];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[my]){let u=t[my][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[gy]){let o=t[gy];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[q0];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Ss.default=Rd});var ui=b(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.zhStringToYear=kt.zhStringToNumber=kt.WEEKDAY_OFFSET=kt.NUMBER=void 0;kt.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};kt.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function Y0(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?kt.NUMBER[n]:e*kt.NUMBER[n]:e+=kt.NUMBER[n]}return e}kt.zhStringToNumber=Y0;function $0(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+kt.NUMBER[n]}return parseInt(e)}kt.zhStringToYear=$0});var _y=b(Ds=>{"use strict";var j0=Ds&&Ds.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ds,"__esModule",{value:!0});var G0=j0(Te()),B0=q(),vn=ui(),Md=1,Ty=2,xd=3,Ad=class extends B0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(vn.NUMBER).join("")+"]{4}|["+Object.keys(vn.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(vn.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(vn.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=G0.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Ty]);if(isNaN(s)&&(s=vn.zhStringToNumber(t[Ty])),i.start.assign("month",s),t[xd]){let a=parseInt(t[xd]);isNaN(a)&&(a=vn.zhStringToNumber(t[xd])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[Md]){let a=parseInt(t[Md]);isNaN(a)&&(a=vn.zhStringToYear(t[Md])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Ds.default=Ad});var vy=b(Rs=>{"use strict";var H0=Rs&&Rs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rs,"__esModule",{value:!0});var z0=H0(Te()),K0=q(),by=ui(),V0=new RegExp("(\\d+|["+Object.keys(by.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),Cd=1,Q0=2,Pd=class extends K0.AbstractParserWithWordBoundaryChecking{innerPattern(){return V0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Cd]);if(isNaN(i)&&(i=by.zhStringToNumber(t[Cd])),isNaN(i)){let u=t[Cd];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=z0.default(e.refDate),o=t[Q0][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Rs.default=Pd});var wy=b(Ms=>{"use strict";var X0=Ms&&Ms.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ms,"__esModule",{value:!0});var Z0=X0(Te()),J0=q(),Ey=ui(),eR=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(Ey.WEEKDAY_OFFSET).join("|")+")"),Nd=class extends J0.AbstractParserWithWordBoundaryChecking{innerPattern(){return eR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Ey.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=Z0.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Ms.default=Nd});var ky=b(xs=>{"use strict";var tR=xs&&xs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xs,"__esModule",{value:!0});var rR=tR(Te()),nR=q(),Bt=ui(),iR=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Bt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Bt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Bt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),sR=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Bt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Bt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Bt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),ao=1,oo=2,uo=3,lo=4,co=5,fo=6,Gt=7,li=8,po=9,Id=class extends nR.AbstractParserWithWordBoundaryChecking{innerPattern(){return iR}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=rR.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[ao]){let c=t[ao];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[lo]){let c=t[lo];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[li]){let c=parseInt(t[li]);if(isNaN(c)&&(c=Bt.zhStringToNumber(t[li])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[fo]),isNaN(a)&&(a=Bt.zhStringToNumber(t[fo])),t[Gt]?t[Gt]=="\u534A"?o=30:t[Gt]=="\u6B63"||t[Gt]=="\u6574"?o=0:(o=parseInt(t[Gt]),isNaN(o)&&(o=Bt.zhStringToNumber(t[Gt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[po]){if(a>12)return null;let c=t[po][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[oo]){let f=t[oo][0];f=="\u65E9"?(u=0,a==12&&(a=0)):f=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[uo]){let f=t[uo][0];f=="\u4E0A"||f=="\u65E9"||f=="\u51CC"?(u=0,a==12&&(a=0)):(f=="\u4E0B"||f=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[co]){let f=t[co][0];f=="\u4E0A"||f=="\u65E9"||f=="\u51CC"?(u=0,a==12&&(a=0)):(f=="\u4E0B"||f=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=sR.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[ao]){let c=t[ao];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[lo]){let c=t[lo];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[li]){let c=parseInt(t[li]);if(isNaN(c)&&(c=Bt.zhStringToNumber(t[li])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[fo]),isNaN(a)&&(a=Bt.zhStringToNumber(t[fo])),t[Gt]?t[Gt]=="\u534A"?o=30:t[Gt]=="\u6B63"||t[Gt]=="\u6574"?o=0:(o=parseInt(t[Gt]),isNaN(o)&&(o=Bt.zhStringToNumber(t[Gt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[po]){if(a>12)return null;let c=t[po][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[oo]){let f=t[oo][0];f=="\u65E9"?(u=0,a==12&&(a=0)):f=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[uo]){let f=t[uo][0];f=="\u4E0A"||f=="\u65E9"||f=="\u51CC"?(u=0,a==12&&(a=0)):(f=="\u4E0B"||f=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[co]){let f=t[co][0];f=="\u4E0A"||f=="\u65E9"||f=="\u51CC"?(u=0,a==12&&(a=0)):(f=="\u4E0B"||f=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};xs.default=Id});var Sy=b(As=>{"use strict";var aR=As&&As.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(As,"__esModule",{value:!0});var oR=aR(Te()),uR=q(),Oy=ui(),lR=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(Oy.WEEKDAY_OFFSET).join("|")+")"),Fd=class extends uR.AbstractParserWithWordBoundaryChecking{innerPattern(){return lR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Oy.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=oR.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};As.default=Fd});var Dy=b(Cs=>{"use strict";var cR=Cs&&Cs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Cs,"__esModule",{value:!0});var dR=cR(dr()),Ld=class extends dR.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};Cs.default=Ld});var Ry=b(Ps=>{"use strict";var fR=Ps&&Ps.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ps,"__esModule",{value:!0});var pR=fR(Er()),Ud=class extends pR.default{patternBetween(){return/^\s*$/i}};Ps.default=Ud});var My=b($e=>{"use strict";var Mr=$e&&$e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($e,"__esModule",{value:!0});$e.createConfiguration=$e.createCasualConfiguration=$e.parseDate=$e.parse=$e.strict=$e.casual=$e.hans=void 0;var Wd=Zt(),hR=Mr(Ia()),mR=wr(),gR=Mr(yy()),yR=Mr(_y()),TR=Mr(vy()),_R=Mr(wy()),bR=Mr(ky()),vR=Mr(Sy()),ER=Mr(Dy()),wR=Mr(Ry());$e.hans=new Wd.Chrono(qd());$e.casual=new Wd.Chrono(qd());$e.strict=new Wd.Chrono(Yd());function kR(r,e,t){return $e.casual.parse(r,e,t)}$e.parse=kR;function OR(r,e,t){return $e.casual.parseDate(r,e,t)}$e.parseDate=OR;function qd(){let r=Yd();return r.parsers.unshift(new gR.default),r}$e.createCasualConfiguration=qd;function Yd(){let r=mR.includeCommonConfiguration({parsers:[new yR.default,new _R.default,new vR.default,new bR.default,new TR.default],refiners:[new ER.default,new wR.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof hR.default)),r}$e.createConfiguration=Yd});var Ay=b(Mt=>{"use strict";var xy=Mt&&Mt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),SR=Mt&&Mt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),DR=Mt&&Mt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&xy(e,r,t)},RR=Mt&&Mt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&xy(e,r,t);return SR(e,r),e};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.hans=void 0;DR(py(),Mt);Mt.hans=RR(My())});var Ot=b(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.parseTimeUnits=te.TIME_UNITS_PATTERN=te.parseYear=te.YEAR_PATTERN=te.parseOrdinalNumberPattern=te.ORDINAL_NUMBER_PATTERN=te.parseNumberPattern=te.NUMBER_PATTERN=te.TIME_UNIT_DICTIONARY=te.ORDINAL_WORD_DICTIONARY=te.INTEGER_WORD_DICTIONARY=te.MONTH_DICTIONARY=te.FULL_MONTH_NAME_DICTIONARY=te.WEEKDAY_DICTIONARY=te.REGEX_PARTS=void 0;var ho=we(),MR=nt();te.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};te.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};te.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};te.MONTH_DICTIONARY=Object.assign(Object.assign({},te.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});te.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};te.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};te.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};te.NUMBER_PATTERN=`(?:${ho.matchAnyPattern(te.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function Py(r){let e=r.toLowerCase();return te.INTEGER_WORD_DICTIONARY[e]!==void 0?te.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}te.parseNumberPattern=Py;te.ORDINAL_NUMBER_PATTERN=`(?:${ho.matchAnyPattern(te.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function xR(r){let e=r.toLowerCase();return te.ORDINAL_WORD_DICTIONARY[e]!==void 0?te.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}te.parseOrdinalNumberPattern=xR;var $d="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";te.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${$d}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${$d}|[5-9][0-9]${$d})`;function AR(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return MR.findMostLikelyADYear(e)}te.parseYear=AR;var Ny=`(${te.NUMBER_PATTERN})\\s{0,3}(${ho.matchAnyPattern(te.TIME_UNIT_DICTIONARY)})`,Cy=new RegExp(Ny,"i");te.TIME_UNITS_PATTERN=ho.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",Ny);function CR(r){let e={},t=r,n=Cy.exec(t);for(;n;)PR(e,n),t=t.substring(n[0].length).trim(),n=Cy.exec(t);return e}te.parseTimeUnits=CR;function PR(r,e){let t=Py(e[1]),n=te.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Fy=b(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});var Ns=Ot(),NR=Ne(),IR=q(),Iy=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${Ns.TIME_UNITS_PATTERN})${Ns.REGEX_PARTS.rightBoundary}`,FR=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${Iy}`,Ns.REGEX_PARTS.flags),LR=new RegExp(Iy,"i"),jd=class extends IR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ns.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?LR:FR}innerExtract(e,t){let n=Ns.parseTimeUnits(t[1]);return NR.ParsingComponents.createRelativeFromReference(e.reference,n)}};Gd.default=jd});var Yy=b(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});var UR=nt(),Is=Ot(),qy=Ot(),mo=Ot(),WR=we(),qR=q(),YR=new RegExp(`(?:\u0441)?\\s*(${mo.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${mo.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${WR.matchAnyPattern(Is.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${qy.YEAR_PATTERN}(?![^\\s]\\d)))?${Is.REGEX_PARTS.rightBoundary}`,Is.REGEX_PARTS.flags),Ly=1,Uy=2,$R=3,Wy=4,Bd=class extends qR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Is.REGEX_PARTS.leftBoundary}innerPattern(){return YR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Is.MONTH_DICTIONARY[t[$R].toLowerCase()],s=mo.parseOrdinalNumberPattern(t[Ly]);if(s>31)return t.index=t.index+t[Ly].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Wy]){let a=qy.parseYear(t[Wy]);n.start.assign("year",a)}else{let a=UR.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Uy]){let a=mo.parseOrdinalNumberPattern(t[Uy]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Hd.default=Bd});var Gy=b(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});var Fs=Ot(),jR=nt(),GR=we(),jy=Ot(),BR=q(),HR=new RegExp(`((?:\u0432)\\s*)?(${GR.matchAnyPattern(Fs.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${jy.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,Fs.REGEX_PARTS.flags),zR=2,$y=3,zd=class extends BR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Fs.REGEX_PARTS.leftBoundary}innerPattern(){return HR}innerExtract(e,t){let n=t[zR].toLowerCase();if(t[0].length<=3&&!Fs.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=Fs.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[$y]){let a=jy.parseYear(t[$y]);i.start.assign("year",a)}else{let a=jR.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Kd.default=zd});var Hy=b(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});var go=Be(),KR=hn(),By=Ot(),Vd=class extends KR.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return By.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${By.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",go.Meridiem.PM)):i<6&&n.assign("meridiem",go.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",go.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",go.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Qd.default=Vd});var zy=b(Zd=>{"use strict";Object.defineProperty(Zd,"__esModule",{value:!0});var yo=Ot(),VR=Ne(),QR=q(),XR=qt(),ZR=new RegExp(`(${yo.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,yo.REGEX_PARTS.flags),Xd=class extends QR.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return yo.REGEX_PARTS.leftBoundary}innerPattern(){return ZR}innerExtract(e,t){let n=yo.parseTimeUnits(t[1]),i=XR.reverseTimeUnits(n);return VR.ParsingComponents.createRelativeFromReference(e.reference,i)}};Zd.default=Xd});var Ky=b(Ls=>{"use strict";var JR=Ls&&Ls.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ls,"__esModule",{value:!0});var eM=JR(dr()),Jd=class extends eM.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};Ls.default=Jd});var Vy=b(Us=>{"use strict";var tM=Us&&Us.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Us,"__esModule",{value:!0});var rM=tM(Er()),ef=class extends rM.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};Us.default=ef});var Qy=b(xr=>{"use strict";var nM=xr&&xr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),iM=xr&&xr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),sM=xr&&xr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&nM(e,r,t);return iM(e,r),e};Object.defineProperty(xr,"__esModule",{value:!0});var aM=q(),Ws=sM(Or()),tf=Ot(),oM=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${tf.REGEX_PARTS.rightBoundary}`,tf.REGEX_PARTS.flags),rf=class extends aM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return tf.REGEX_PARTS.leftBoundary}innerPattern(e){return oM}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return Ws.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return Ws.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return Ws.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return Ws.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return Ws.theDayBefore(e.reference,2)}return i}};xr.default=rf});var Xy=b(nr=>{"use strict";var uM=nr&&nr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),lM=nr&&nr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),cM=nr&&nr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&uM(e,r,t);return lM(e,r),e},dM=nr&&nr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nr,"__esModule",{value:!0});var fM=q(),En=cM(Or()),pM=Wt(),hM=dM(Te()),nf=Ot(),mM=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${nf.REGEX_PARTS.rightBoundary}`,nf.REGEX_PARTS.flags),sf=class extends fM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return nf.REGEX_PARTS.leftBoundary}innerPattern(){return mM}innerExtract(e,t){let n=hM.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return En.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return En.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return En.morning(e.reference);if(i.match(/в\s*полдень/))return En.noon(e.reference);if(i.match(/прошлой\s*ночью/))return En.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return En.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),pM.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?En.midnight(e.reference):s}};nr.default=sf});var Zy=b(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});var qs=Ot(),gM=we(),yM=q(),TM=gn(),_M=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${gM.matchAnyPattern(qs.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${qs.REGEX_PARTS.rightBoundary}`,qs.REGEX_PARTS.flags),bM=1,vM=2,EM=3,af=class extends yM.AbstractParserWithWordBoundaryChecking{innerPattern(){return _M}patternLeftBoundary(){return qs.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[vM].toLowerCase(),i=qs.WEEKDAY_DICTIONARY[n],s=t[bM],a=t[EM],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=TM.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};of.default=af});var eT=b($s=>{"use strict";var wM=$s&&$s.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($s,"__esModule",{value:!0});var Ys=Ot(),Jy=Ne(),kM=wM(Te()),OM=q(),SM=we(),DM=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${SM.matchAnyPattern(Ys.TIME_UNIT_DICTIONARY)})(?=\\s*)${Ys.REGEX_PARTS.rightBoundary}`,Ys.REGEX_PARTS.flags),RM=1,MM=2,uf=class extends OM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ys.REGEX_PARTS.leftBoundary}innerPattern(){return DM}innerExtract(e,t){let n=t[RM].toLowerCase(),i=t[MM].toLowerCase(),s=Ys.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,Jy.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,Jy.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=kM.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};$s.default=uf});var tT=b(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});var js=Ot(),xM=Ne(),AM=q(),CM=qt(),PM=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${js.TIME_UNITS_PATTERN})${js.REGEX_PARTS.rightBoundary}`,js.REGEX_PARTS.flags),lf=class extends AM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return js.REGEX_PARTS.leftBoundary}innerPattern(){return PM}innerExtract(e,t){let n=t[1].toLowerCase(),i=js.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=CM.reverseTimeUnits(i);break}return xM.ParsingComponents.createRelativeFromReference(e.reference,i)}};cf.default=lf});var iT=b(Je=>{"use strict";var xt=Je&&Je.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Je,"__esModule",{value:!0});Je.createConfiguration=Je.createCasualConfiguration=Je.parseDate=Je.parse=Je.strict=Je.casual=void 0;var NM=xt(Fy()),IM=xt(Yy()),FM=xt(Gy()),LM=xt(Hy()),UM=xt(zy()),WM=xt(Ky()),qM=xt(Vy()),YM=wr(),$M=xt(Qy()),jM=xt(Xy()),GM=xt(Zy()),BM=xt(eT()),rT=Zt(),HM=xt(yn()),zM=xt(tT());Je.casual=new rT.Chrono(nT());Je.strict=new rT.Chrono(df(!0));function KM(r,e,t){return Je.casual.parse(r,e,t)}Je.parse=KM;function VM(r,e,t){return Je.casual.parseDate(r,e,t)}Je.parseDate=VM;function nT(){let r=df(!1);return r.parsers.unshift(new $M.default),r.parsers.unshift(new jM.default),r.parsers.unshift(new FM.default),r.parsers.unshift(new BM.default),r.parsers.unshift(new zM.default),r}Je.createCasualConfiguration=nT;function df(r=!0){return YM.includeCommonConfiguration({parsers:[new HM.default(!0),new NM.default,new IM.default,new GM.default,new LM.default(r),new UM.default],refiners:[new qM.default,new WM.default]},r)}Je.createConfiguration=df});var Be=b(se=>{"use strict";var QM=se&&se.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),XM=se&&se.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Xr=se&&se.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&QM(e,r,t);return XM(e,r),e};Object.defineProperty(se,"__esModule",{value:!0});se.parseDate=se.parse=se.casual=se.strict=se.ru=se.zh=se.nl=se.pt=se.ja=se.fr=se.de=se.Meridiem=se.Chrono=se.en=void 0;var ff=Xr(Rl());se.en=ff;var ZM=Zt();Object.defineProperty(se,"Chrono",{enumerable:!0,get:function(){return ZM.Chrono}});var JM;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(JM=se.Meridiem||(se.Meridiem={}));var ex=Xr(pm());se.de=ex;var tx=Xr($m());se.fr=tx;var rx=Xr(Xm());se.ja=rx;var nx=Xr(pg());se.pt=nx;var ix=Xr(Xg());se.nl=ix;var sx=Xr(Ay());se.zh=sx;var ax=Xr(iT());se.ru=ax;se.strict=ff.strict;se.casual=ff.casual;function ox(r,e,t){return se.casual.parse(r,e,t)}se.parse=ox;function ux(r,e,t){return se.casual.parseDate(r,e,t)}se.parseDate=ux});var RT=b((tI,wo)=>{var oT,uT,lT,cT,dT,fT,pT,hT,mT,vo,hf,gT,yT,TT,di,_T,bT,vT,ET,wT,kT,OT,ST,DT,Eo;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof wo=="object"&&typeof wo.exports=="object"?r(t(e,t(wo.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};oT=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},uT=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},lT=function(n,i){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s},cT=function(n,i,s,a){var o=arguments.length,u=o<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(u=(o<3?l(u):o>3?l(i,s,u):l(i,s))||u);return o>3&&u&&Object.defineProperty(i,s,u),u},dT=function(n,i){return function(s,a){i(s,a,n)}},fT=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},pT=function(n,i,s,a){function o(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function c(T){try{h(a.next(T))}catch(y){l(y)}}function f(T){try{h(a.throw(T))}catch(y){l(y)}}function h(T){T.done?u(T.value):o(T.value).then(c,f)}h((a=a.apply(n,i||[])).next())})},hT=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(h){return function(T){return f([h,T])}}function f(h){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(u=h[0]&2?o.return:h[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,h[1])).done)return u;switch(o=0,u&&(h=[h[0]&2,u.value]),h[0]){case 0:case 1:u=h;break;case 4:return s.label++,{value:h[1],done:!1};case 5:s.label++,o=h[1],h=[0];continue;case 7:h=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(h[0]===6||h[0]===2)){s=0;continue}if(h[0]===3&&(!u||h[1]>u[0]&&h[1]<u[3])){s.label=h[1];break}if(h[0]===6&&s.label<u[1]){s.label=u[1],u=h;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(h);break}u[2]&&s.ops.pop(),s.trys.pop();continue}h=i.call(n,s)}catch(T){h=[6,T],o=0}finally{a=u=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},mT=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&Eo(i,n,s)},Eo=Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]},vo=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},hf=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,u=[],l;try{for(;(i===void 0||i-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return u},gT=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(hf(arguments[i]));return n},yT=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var a=Array(n),o=0,i=0;i<s;i++)for(var u=arguments[i],l=0,c=u.length;l<c;l++,o++)a[o]=u[l];return a},TT=function(n,i,s){if(s||arguments.length===2)for(var a=0,o=i.length,u;a<o;a++)(u||!(a in i))&&(u||(u=Array.prototype.slice.call(i,0,a)),u[a]=i[a]);return n.concat(u||Array.prototype.slice.call(i))},di=function(n){return this instanceof di?(this.v=n,this):new di(n)},_T=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,i||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(E){a[E]&&(o[E]=function(D){return new Promise(function(A,P){u.push([E,D,A,P])>1||c(E,D)})})}function c(E,D){try{f(a[E](D))}catch(A){y(u[0][3],A)}}function f(E){E.value instanceof di?Promise.resolve(E.value.v).then(h,T):y(u[0][2],E)}function h(E){c("next",E)}function T(E){c("throw",E)}function y(E,D){E(D),u.shift(),u.length&&c(u[0][0],u[0][1])}},bT=function(n){var i,s;return i={},a("next"),a("throw",function(o){throw o}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(o,u){i[o]=n[o]?function(l){return(s=!s)?{value:di(n[o](l)),done:o==="return"}:u?u(l):l}:u}},vT=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof vo=="function"?vo(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(l){return new Promise(function(c,f){l=n[u](l),o(c,f,l.done,l.value)})}}function o(u,l,c,f){Promise.resolve(f).then(function(h){u({value:h,done:c})},l)}},ET=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};wT=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&Eo(i,n,s);return t(i,n),i},kT=function(n){return n&&n.__esModule?n:{default:n}},OT=function(n,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:i.get(n)},ST=function(n,i,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:i.set(n,s),s},DT=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},r("__extends",oT),r("__assign",uT),r("__rest",lT),r("__decorate",cT),r("__param",dT),r("__metadata",fT),r("__awaiter",pT),r("__generator",hT),r("__exportStar",mT),r("__createBinding",Eo),r("__values",vo),r("__read",hf),r("__spread",gT),r("__spreadArrays",yT),r("__spreadArray",TT),r("__await",di),r("__asyncGenerator",_T),r("__asyncDelegator",bT),r("__asyncValues",vT),r("__makeTemplateObject",ET),r("__importStar",wT),r("__importDefault",kT),r("__classPrivateFieldGet",OT),r("__classPrivateFieldSet",ST),r("__classPrivateFieldIn",DT)})});var m_=b((p_,h_)=>{(function(r){var e=Object.hasOwnProperty,t=Array.isArray?Array.isArray:function(p){return Object.prototype.toString.call(p)==="[object Array]"},n=10,i=typeof process=="object"&&typeof process.nextTick=="function",s=typeof Symbol=="function",a=typeof Reflect=="object",o=typeof setImmediate=="function",u=o?setImmediate:setTimeout,l=s?a&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(d){var p=Object.getOwnPropertyNames(d);return p.push.apply(p,Object.getOwnPropertySymbols(d)),p}:Object.keys;function c(){this._events={},this._conf&&f.call(this,this._conf)}function f(d){d&&(this._conf=d,d.delimiter&&(this.delimiter=d.delimiter),d.maxListeners!==r&&(this._maxListeners=d.maxListeners),d.wildcard&&(this.wildcard=d.wildcard),d.newListener&&(this._newListener=d.newListener),d.removeListener&&(this._removeListener=d.removeListener),d.verboseMemoryLeak&&(this.verboseMemoryLeak=d.verboseMemoryLeak),d.ignoreErrors&&(this.ignoreErrors=d.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function h(d,p){var m="(node) warning: possible EventEmitter memory leak detected. "+d+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(m+=" Event name: "+p+"."),typeof process!="undefined"&&process.emitWarning){var g=new Error(m);g.name="MaxListenersExceededWarning",g.emitter=this,g.count=d,process.emitWarning(g)}else console.error(m),console.trace&&console.trace()}var T=function(d,p,m){var g=arguments.length;switch(g){case 0:return[];case 1:return[d];case 2:return[d,p];case 3:return[d,p,m];default:for(var _=new Array(g);g--;)_[g]=arguments[g];return _}};function y(d,p){for(var m={},g,_=d.length,v=p?p.length:0,k=0;k<_;k++)g=d[k],m[g]=k<v?p[k]:r;return m}function E(d,p,m){this._emitter=d,this._target=p,this._listeners={},this._listenersCount=0;var g,_;if((m.on||m.off)&&(g=m.on,_=m.off),p.addEventListener?(g=p.addEventListener,_=p.removeEventListener):p.addListener?(g=p.addListener,_=p.removeListener):p.on&&(g=p.on,_=p.off),!g&&!_)throw Error("target does not implement any known event API");if(typeof g!="function")throw TypeError("on method must be a function");if(typeof _!="function")throw TypeError("off method must be a function");this._on=g,this._off=_;var v=d._observers;v?v.push(this):d._observers=[this]}Object.assign(E.prototype,{subscribe:function(d,p,m){var g=this,_=this._target,v=this._emitter,k=this._listeners,R=function(){var O=T.apply(null,arguments),S={data:O,name:p,original:d};if(m){var I=m.call(_,S);I!==!1&&v.emit.apply(v,[S.name].concat(O));return}v.emit.apply(v,[p].concat(O))};if(k[d])throw Error("Event '"+d+"' is already listening");this._listenersCount++,v._newListener&&v._removeListener&&!g._onNewListener?(this._onNewListener=function(O){O===p&&k[d]===null&&(k[d]=R,g._on.call(_,d,R))},v.on("newListener",this._onNewListener),this._onRemoveListener=function(O){O===p&&!v.hasListeners(O)&&k[d]&&(k[d]=null,g._off.call(_,d,R))},k[d]=null,v.on("removeListener",this._onRemoveListener)):(k[d]=R,g._on.call(_,d,R))},unsubscribe:function(d){var p=this,m=this._listeners,g=this._emitter,_,v,k=this._off,R=this._target,O;if(d&&typeof d!="string")throw TypeError("event must be a string");function S(){p._onNewListener&&(g.off("newListener",p._onNewListener),g.off("removeListener",p._onRemoveListener),p._onNewListener=null,p._onRemoveListener=null);var I=me.call(g,p);g._observers.splice(I,1)}if(d){if(_=m[d],!_)return;k.call(R,d,_),delete m[d],--this._listenersCount||S()}else{for(v=l(m),O=v.length;O-- >0;)d=v[O],k.call(R,d,m[d]);this._listeners={},this._listenersCount=0,S()}}});function D(d,p,m,g){var _=Object.assign({},p);if(!d)return _;if(typeof d!="object")throw TypeError("options must be an object");var v=Object.keys(d),k=v.length,R,O,S;function I(ae){throw Error('Invalid "'+R+'" option value'+(ae?". Reason: "+ae:""))}for(var ge=0;ge<k;ge++){if(R=v[ge],!g&&!e.call(p,R))throw Error('Unknown "'+R+'" option');O=d[R],O!==r&&(S=m[R],_[R]=S?S(O,I):O)}return _}function A(d,p){return(typeof d!="function"||!d.hasOwnProperty("prototype"))&&p("value must be a constructor"),d}function P(d){var p="value must be type of "+d.join("|"),m=d.length,g=d[0],_=d[1];return m===1?function(v,k){if(typeof v===g)return v;k(p)}:m===2?function(v,k){var R=typeof v;if(R===g||R===_)return v;k(p)}:function(v,k){for(var R=typeof v,O=m;O-- >0;)if(R===d[O])return v;k(p)}}var F=P(["function"]),Z=P(["object","function"]);function Q(d,p,m){var g,_,v=0,k,R=new d(function(O,S,I){m=D(m,{timeout:0,overload:!1},{timeout:function(De,U){return De*=1,(typeof De!="number"||De<0||!Number.isFinite(De))&&U("timeout must be a positive number"),De}}),g=!m.overload&&typeof d.prototype.cancel=="function"&&typeof I=="function";function ge(){_&&(_=null),v&&(clearTimeout(v),v=0)}var ae=function(De){ge(),O(De)},ne=function(De){ge(),S(De)};g?p(ae,ne,I):(_=[function(De){ne(De||Error("canceled"))}],p(ae,ne,function(De){if(k)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof De!="function")throw TypeError("onCancel callback must be a function");_.push(De)}),k=!0),m.timeout>0&&(v=setTimeout(function(){var De=Error("timeout");De.code="ETIMEDOUT",v=0,R.cancel(De),S(De)},m.timeout))});return g||(R.cancel=function(O){if(!!_){for(var S=_.length,I=1;I<S;I++)_[I](O);_[0](O),_=null}}),R}function me(d){var p=this._observers;if(!p)return-1;for(var m=p.length,g=0;g<m;g++)if(p[g]._target===d)return g;return-1}function j(d,p,m,g,_){if(!m)return null;if(g===0){var v=typeof p;if(v==="string"){var k,R,O=0,S=0,I=this.delimiter,ge=I.length;if((R=p.indexOf(I))!==-1){k=new Array(5);do k[O++]=p.slice(S,R),S=R+ge;while((R=p.indexOf(I,S))!==-1);k[O++]=p.slice(S),p=k,_=O}else p=[p],_=1}else v==="object"?_=p.length:(p=[p],_=1)}var ae=null,ne,De,U,Ae,Ce,rt=p[g],vr=p[g+1],We,Le;if(g===_)m._listeners&&(typeof m._listeners=="function"?(d&&d.push(m._listeners),ae=[m]):(d&&d.push.apply(d,m._listeners),ae=[m]));else if(rt==="*"){for(We=l(m),R=We.length;R-- >0;)ne=We[R],ne!=="_listeners"&&(Le=j(d,p,m[ne],g+1,_),Le&&(ae?ae.push.apply(ae,Le):ae=Le));return ae}else if(rt==="**"){for(Ce=g+1===_||g+2===_&&vr==="*",Ce&&m._listeners&&(ae=j(d,p,m,_,_)),We=l(m),R=We.length;R-- >0;)ne=We[R],ne!=="_listeners"&&(ne==="*"||ne==="**"?(m[ne]._listeners&&!Ce&&(Le=j(d,p,m[ne],_,_),Le&&(ae?ae.push.apply(ae,Le):ae=Le)),Le=j(d,p,m[ne],g,_)):ne===vr?Le=j(d,p,m[ne],g+2,_):Le=j(d,p,m[ne],g,_),Le&&(ae?ae.push.apply(ae,Le):ae=Le));return ae}else m[rt]&&(ae=j(d,p,m[rt],g+1,_));if(De=m["*"],De&&j(d,p,De,g+1,_),U=m["**"],U)if(g<_)for(U._listeners&&j(d,p,U,_,_),We=l(U),R=We.length;R-- >0;)ne=We[R],ne!=="_listeners"&&(ne===vr?j(d,p,U[ne],g+2,_):ne===rt?j(d,p,U[ne],g+1,_):(Ae={},Ae[ne]=U[ne],j(d,p,{"**":Ae},g+1,_)));else U._listeners?j(d,p,U,_,_):U["*"]&&U["*"]._listeners&&j(d,p,U["*"],_,_);return ae}function G(d,p,m){var g=0,_=0,v,k=this.delimiter,R=k.length,O;if(typeof d=="string")if((v=d.indexOf(k))!==-1){O=new Array(5);do O[g++]=d.slice(_,v),_=v+R;while((v=d.indexOf(k,_))!==-1);O[g++]=d.slice(_)}else O=[d],g=1;else O=d,g=d.length;if(g>1){for(v=0;v+1<g;v++)if(O[v]==="**"&&O[v+1]==="**")return}var S=this.listenerTree,I;for(v=0;v<g;v++)if(I=O[v],S=S[I]||(S[I]={}),v===g-1)return S._listeners?(typeof S._listeners=="function"&&(S._listeners=[S._listeners]),m?S._listeners.unshift(p):S._listeners.push(p),!S._listeners.warned&&this._maxListeners>0&&S._listeners.length>this._maxListeners&&(S._listeners.warned=!0,h.call(this,S._listeners.length,I))):S._listeners=p,!0;return!0}function Pe(d,p,m,g){for(var _=l(d),v=_.length,k,R,O,S=d._listeners,I;v-- >0;)R=_[v],k=d[R],R==="_listeners"?O=m:O=m?m.concat(R):[R],I=g||typeof R=="symbol",S&&p.push(I?O:O.join(this.delimiter)),typeof k=="object"&&Pe.call(this,k,p,O,I);return p}function Fe(d){for(var p=l(d),m=p.length,g,_,v;m-- >0;)_=p[m],g=d[_],g&&(v=!0,_!=="_listeners"&&!Fe(g)&&delete d[_]);return v}function B(d,p,m){this.emitter=d,this.event=p,this.listener=m}B.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function C(d,p,m){if(m===!0)_=!0;else if(m===!1)g=!0;else{if(!m||typeof m!="object")throw TypeError("options should be an object or true");var g=m.async,_=m.promisify,v=m.nextTick,k=m.objectify}if(g||v||_){var R=p,O=p._origin||p;if(v&&!i)throw Error("process.nextTick is not supported");_===r&&(_=p.constructor.name==="AsyncFunction"),p=function(){var S=arguments,I=this,ge=this.event;return _?v?Promise.resolve():new Promise(function(ae){u(ae)}).then(function(){return I.event=ge,R.apply(I,S)}):(v?process.nextTick:u)(function(){I.event=ge,R.apply(I,S)})},p._async=!0,p._origin=O}return[p,k?new B(this,d,p):this]}function w(d){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,f.call(this,d)}w.EventEmitter2=w,w.prototype.listenTo=function(d,p,m){if(typeof d!="object")throw TypeError("target musts be an object");var g=this;m=D(m,{on:r,off:r,reducers:r},{on:F,off:F,reducers:Z});function _(v){if(typeof v!="object")throw TypeError("events must be an object");var k=m.reducers,R=me.call(g,d),O;R===-1?O=new E(g,d,m):O=g._observers[R];for(var S=l(v),I=S.length,ge,ae=typeof k=="function",ne=0;ne<I;ne++)ge=S[ne],O.subscribe(ge,v[ge]||ge,ae?k:k&&k[ge])}return t(p)?_(y(p)):_(typeof p=="string"?y(p.split(/\s+/)):p),this},w.prototype.stopListeningTo=function(d,p){var m=this._observers;if(!m)return!1;var g=m.length,_,v=!1;if(d&&typeof d!="object")throw TypeError("target should be an object");for(;g-- >0;)_=m[g],(!d||_._target===d)&&(_.unsubscribe(p),v=!0);return v},w.prototype.delimiter=".",w.prototype.setMaxListeners=function(d){d!==r&&(this._maxListeners=d,this._conf||(this._conf={}),this._conf.maxListeners=d)},w.prototype.getMaxListeners=function(){return this._maxListeners},w.prototype.event="",w.prototype.once=function(d,p,m){return this._once(d,p,!1,m)},w.prototype.prependOnceListener=function(d,p,m){return this._once(d,p,!0,m)},w.prototype._once=function(d,p,m,g){return this._many(d,1,p,m,g)},w.prototype.many=function(d,p,m,g){return this._many(d,p,m,!1,g)},w.prototype.prependMany=function(d,p,m,g){return this._many(d,p,m,!0,g)},w.prototype._many=function(d,p,m,g,_){var v=this;if(typeof m!="function")throw new Error("many only accepts instances of Function");function k(){return--p===0&&v.off(d,k),m.apply(this,arguments)}return k._origin=m,this._on(d,k,g,_)},w.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var d=arguments[0],p,m=this.wildcard,g,_,v,k,R;if(d==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(m&&(p=d,d!=="newListener"&&d!=="removeListener"&&typeof d=="object")){if(_=d.length,s){for(v=0;v<_;v++)if(typeof d[v]=="symbol"){R=!0;break}}R||(d=d.join(this.delimiter))}var O=arguments.length,S;if(this._all&&this._all.length)for(S=this._all.slice(),v=0,_=S.length;v<_;v++)switch(this.event=d,O){case 1:S[v].call(this,d);break;case 2:S[v].call(this,d,arguments[1]);break;case 3:S[v].call(this,d,arguments[1],arguments[2]);break;default:S[v].apply(this,arguments)}if(m)S=[],j.call(this,S,p,this.listenerTree,0,_);else if(S=this._events[d],typeof S=="function"){switch(this.event=d,O){case 1:S.call(this);break;case 2:S.call(this,arguments[1]);break;case 3:S.call(this,arguments[1],arguments[2]);break;default:for(g=new Array(O-1),k=1;k<O;k++)g[k-1]=arguments[k];S.apply(this,g)}return!0}else S&&(S=S.slice());if(S&&S.length){if(O>3)for(g=new Array(O-1),k=1;k<O;k++)g[k-1]=arguments[k];for(v=0,_=S.length;v<_;v++)switch(this.event=d,O){case 1:S[v].call(this);break;case 2:S[v].call(this,arguments[1]);break;case 3:S[v].call(this,arguments[1],arguments[2]);break;default:S[v].apply(this,g)}return!0}else if(!this.ignoreErrors&&!this._all&&d==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},w.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var d=arguments[0],p=this.wildcard,m,g,_,v,k,R;if(d==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(p&&(m=d,d!=="newListener"&&d!=="removeListener"&&typeof d=="object")){if(v=d.length,s){for(k=0;k<v;k++)if(typeof d[k]=="symbol"){g=!0;break}}g||(d=d.join(this.delimiter))}var O=[],S=arguments.length,I;if(this._all)for(k=0,v=this._all.length;k<v;k++)switch(this.event=d,S){case 1:O.push(this._all[k].call(this,d));break;case 2:O.push(this._all[k].call(this,d,arguments[1]));break;case 3:O.push(this._all[k].call(this,d,arguments[1],arguments[2]));break;default:O.push(this._all[k].apply(this,arguments))}if(p?(I=[],j.call(this,I,m,this.listenerTree,0)):I=this._events[d],typeof I=="function")switch(this.event=d,S){case 1:O.push(I.call(this));break;case 2:O.push(I.call(this,arguments[1]));break;case 3:O.push(I.call(this,arguments[1],arguments[2]));break;default:for(_=new Array(S-1),R=1;R<S;R++)_[R-1]=arguments[R];O.push(I.apply(this,_))}else if(I&&I.length){if(I=I.slice(),S>3)for(_=new Array(S-1),R=1;R<S;R++)_[R-1]=arguments[R];for(k=0,v=I.length;k<v;k++)switch(this.event=d,S){case 1:O.push(I[k].call(this));break;case 2:O.push(I[k].call(this,arguments[1]));break;case 3:O.push(I[k].call(this,arguments[1],arguments[2]));break;default:O.push(I[k].apply(this,_))}}else if(!this.ignoreErrors&&!this._all&&d==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(O)},w.prototype.on=function(d,p,m){return this._on(d,p,!1,m)},w.prototype.prependListener=function(d,p,m){return this._on(d,p,!0,m)},w.prototype.onAny=function(d){return this._onAny(d,!1)},w.prototype.prependAny=function(d){return this._onAny(d,!0)},w.prototype.addListener=w.prototype.on,w.prototype._onAny=function(d,p){if(typeof d!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),p?this._all.unshift(d):this._all.push(d),this},w.prototype._on=function(d,p,m,g){if(typeof d=="function")return this._onAny(d,p),this;if(typeof p!="function")throw new Error("on only accepts instances of Function");this._events||c.call(this);var _=this,v;return g!==r&&(v=C.call(this,d,p,g),p=v[0],_=v[1]),this._newListener&&this.emit("newListener",d,p),this.wildcard?(G.call(this,d,p,m),_):(this._events[d]?(typeof this._events[d]=="function"&&(this._events[d]=[this._events[d]]),m?this._events[d].unshift(p):this._events[d].push(p),!this._events[d].warned&&this._maxListeners>0&&this._events[d].length>this._maxListeners&&(this._events[d].warned=!0,h.call(this,this._events[d].length,d))):this._events[d]=p,_)},w.prototype.off=function(d,p){if(typeof p!="function")throw new Error("removeListener only takes instances of Function");var m,g=[];if(this.wildcard){var _=typeof d=="string"?d.split(this.delimiter):d.slice();if(g=j.call(this,null,_,this.listenerTree,0),!g)return this}else{if(!this._events[d])return this;m=this._events[d],g.push({_listeners:m})}for(var v=0;v<g.length;v++){var k=g[v];if(m=k._listeners,t(m)){for(var R=-1,O=0,S=m.length;O<S;O++)if(m[O]===p||m[O].listener&&m[O].listener===p||m[O]._origin&&m[O]._origin===p){R=O;break}if(R<0)continue;return this.wildcard?k._listeners.splice(R,1):this._events[d].splice(R,1),m.length===0&&(this.wildcard?delete k._listeners:delete this._events[d]),this._removeListener&&this.emit("removeListener",d,p),this}else(m===p||m.listener&&m.listener===p||m._origin&&m._origin===p)&&(this.wildcard?delete k._listeners:delete this._events[d],this._removeListener&&this.emit("removeListener",d,p))}return this.listenerTree&&Fe(this.listenerTree),this},w.prototype.offAny=function(d){var p=0,m=0,g;if(d&&this._all&&this._all.length>0){for(g=this._all,p=0,m=g.length;p<m;p++)if(d===g[p])return g.splice(p,1),this._removeListener&&this.emit("removeListenerAny",d),this}else{if(g=this._all,this._removeListener)for(p=0,m=g.length;p<m;p++)this.emit("removeListenerAny",g[p]);this._all=[]}return this},w.prototype.removeListener=w.prototype.off,w.prototype.removeAllListeners=function(d){if(d===r)return!this._events||c.call(this),this;if(this.wildcard){var p=j.call(this,null,d,this.listenerTree,0),m,g;if(!p)return this;for(g=0;g<p.length;g++)m=p[g],m._listeners=null;this.listenerTree&&Fe(this.listenerTree)}else this._events&&(this._events[d]=null);return this},w.prototype.listeners=function(d){var p=this._events,m,g,_,v,k;if(d===r){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!p)return[];for(m=l(p),v=m.length,_=[];v-- >0;)g=p[m[v]],typeof g=="function"?_.push(g):_.push.apply(_,g);return _}else{if(this.wildcard){if(k=this.listenerTree,!k)return[];var R=[],O=typeof d=="string"?d.split(this.delimiter):d.slice();return j.call(this,R,O,k,0),R}return p?(g=p[d],g?typeof g=="function"?[g]:g:[]):[]}},w.prototype.eventNames=function(d){var p=this._events;return this.wildcard?Pe.call(this,this.listenerTree,[],null,d):p?l(p):[]},w.prototype.listenerCount=function(d){return this.listeners(d).length},w.prototype.hasListeners=function(d){if(this.wildcard){var p=[],m=typeof d=="string"?d.split(this.delimiter):d.slice();return j.call(this,p,m,this.listenerTree,0),p.length>0}var g=this._events,_=this._all;return!!(_&&_.length||g&&(d===r?l(g).length:g[d]))},w.prototype.listenersAny=function(){return this._all?this._all:[]},w.prototype.waitFor=function(d,p){var m=this,g=typeof p;return g==="number"?p={timeout:p}:g==="function"&&(p={filter:p}),p=D(p,{timeout:0,filter:r,handleError:!1,Promise,overload:!1},{filter:F,Promise:A}),Q(p.Promise,function(_,v,k){function R(){var O=p.filter;if(!(O&&!O.apply(m,arguments)))if(m.off(d,R),p.handleError){var S=arguments[0];S?v(S):_(T.apply(null,arguments).slice(1))}else _(T.apply(null,arguments))}k(function(){m.off(d,R)}),m._on(d,R,!1)},{timeout:p.timeout,overload:p.overload})};function H(d,p,m){m=D(m,{Promise,timeout:0,overload:!1},{Promise:A});var g=m.Promise;return Q(g,function(_,v,k){var R;if(typeof d.addEventListener=="function"){R=function(){_(T.apply(null,arguments))},k(function(){d.removeEventListener(p,R)}),d.addEventListener(p,R,{once:!0});return}var O=function(){S&&d.removeListener("error",S),_(T.apply(null,arguments))},S;p!=="error"&&(S=function(I){d.removeListener(p,O),v(I)},d.once("error",S)),k(function(){S&&d.removeListener("error",S),d.removeListener(p,O)}),d.once(p,O)},{timeout:m.timeout,overload:m.overload})}var N=w.prototype;if(Object.defineProperties(w,{defaultMaxListeners:{get:function(){return N._maxListeners},set:function(d){if(typeof d!="number"||d<0||Number.isNaN(d))throw TypeError("n must be a non-negative number");N._maxListeners=d},enumerable:!0},once:{value:H,writable:!0,configurable:!0}}),Object.defineProperties(N,{_maxListeners:{value:n,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return w});else if(typeof p_=="object")h_.exports=w;else{var J=new Function("","return this")();J.EventEmitter2=w}})()});var J_=b(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});var X_=Symbol("MustacheDataPath");function Q_({target:r,propertyName:e}){return[...r[X_]||[],e]}function Z_(r,e){return typeof r!="object"?r:new Proxy(r,{get(t,n){let i=t[n];if(i===void 0&&!(n in t)){let s=Q_({target:t,propertyName:n});if(e!=null&&e.handleError)return e.handleError(s),i;throw Error(`Missing Mustache data property: ${s.join(" > ")}`)}return i&&typeof i=="object"?(i[X_]=Q_({target:t,propertyName:n}),Z_(i,e)):i}})}Kf.default=Z_});var br=b(ln=>{"use strict";ln.__esModule=!0;var eC;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(eC=ln.Operators||(ln.Operators={}));var tC;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(tC=ln.StructuralCharacters||(ln.StructuralCharacters={}));var rC;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(rC=ln.Tokens||(ln.Tokens={}))});var Jf=b(iu=>{"use strict";iu.__esModule=!0;var Ie=br();iu.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};iu.VALID_TOKENS={identifierOnly:[{name:Ie.Tokens.IDENTIFIER},{name:Ie.Tokens.STRUCTURAL_CHARACTER,value:Ie.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:Ie.Tokens.IDENTIFIER},{name:Ie.Tokens.STRUCTURAL_CHARACTER,value:Ie.StructuralCharacters.OPEN_PARENTHESIS},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.NOT}],binaryOperator:[{name:Ie.Tokens.OPERATOR,value:Ie.Operators.AND},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.OR},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.XOR}],binaryOperatorOrClose:[{name:Ie.Tokens.OPERATOR,value:Ie.Operators.AND},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.OR},{name:Ie.Tokens.OPERATOR,value:Ie.Operators.XOR},{name:Ie.Tokens.STRUCTURAL_CHARACTER,value:Ie.StructuralCharacters.CLOSE_PARENTHESIS}]}});var ep=b(Ur=>{"use strict";Ur.__esModule=!0;var xi=br();Ur.STRUCTURAL_CHARACTERS={"(":xi.StructuralCharacters.OPEN_PARENTHESIS,")":xi.StructuralCharacters.CLOSE_PARENTHESIS};Ur.OPERATORS={AND:xi.Operators.AND,OR:xi.Operators.OR,XOR:xi.Operators.XOR,NOT:xi.Operators.NOT};Ur.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));Ur.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);Ur.COMMENT_DELIMITER=String.fromCodePoint(35);Ur.EOL=String.fromCodePoint(10);Ur.ESCAPE_CHARACTER=String.fromCodePoint(92)});var sb=b(Wr=>{"use strict";var tp=Wr&&Wr.__assign||function(){return tp=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},tp.apply(this,arguments)};Wr.__esModule=!0;var ib=br(),Ln=ep();Wr.createResult=function(r,e,t){return{token:tp({name:r},e!==null?{value:e}:{}),remainingString:t}};Wr.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===Ln.EOL){e=t;break}}return Wr.createResult(ib.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};Wr.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===Ln.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+Ln.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===Ln.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!Ln.SEPARATORS.has(s)&&!Ln.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+Ln.QUOTED_IDENTIFIER_DELIMITER+" character");return Wr.createResult(ib.Tokens.IDENTIFIER,t,r.slice(n+1))}});var ab=b(rp=>{"use strict";rp.__esModule=!0;var Ai=br(),It=ep(),Ci=sb();rp.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!It.SEPARATORS.has(s)){var a=It.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===Ai.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!It.SEPARATORS.has(o)&&o!==Ai.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return Ci.createResult(Ai.Tokens.STRUCTURAL_CHARACTER,It.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===It.QUOTED_IDENTIFIER_DELIMITER)return Ci.getQuotedIdentifier(r.slice(i+1));if(s===It.COMMENT_DELIMITER)return Ci.getComment(r.slice(i+1));e=i}}else if(It.SEPARATORS.has(s)||It.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===It.QUOTED_IDENTIFIER_DELIMITER||s===It.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(It.OPERATORS[u]){if(n&&!It.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return Ci.createResult(Ai.Tokens.OPERATOR,It.OPERATORS[u],l)}else return Ci.createResult(Ai.Tokens.IDENTIFIER,u,l)}return Ci.createResult(Ai.Tokens.EOF,null,"")}});var ob=b(qr=>{"use strict";var nC=qr&&qr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};qr.__esModule=!0;var iC=ab(),Pi=br(),su=Jf();qr.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=iC.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==Pi.Tokens.COMMENT)return qr.validateToken(s,t,n),s}}};qr.getValue=function(r,e){var t=r(su.VALID_TOKENS.identifierOrNot),n=t.value===Pi.Operators.NOT;n&&(t=r(su.VALID_TOKENS.identifierOnly));var i=t.name===Pi.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?nC(i,[{name:Pi.Tokens.OPERATOR,value:Pi.Operators.NOT}]):i};qr.previousOperatorTakesPrecedent=function(r,e){return su.OPERATOR_PRECEDENCE[r]<=su.OPERATOR_PRECEDENCE[e]};qr.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===Pi.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var ip=b(fa=>{"use strict";var Ni=fa&&fa.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};fa.__esModule=!0;var ub=br(),lb=Jf(),au=ob();fa.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=au.newTokenGenerator(r);return np(e)};var np=function(r,e){e===void 0&&(e=!1);for(var t=Ni(au.getValue(r,np)),n=[];;){var i=e?lb.VALID_TOKENS.binaryOperatorOrClose:lb.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===ub.Tokens.EOF||s.name===ub.Tokens.STRUCTURAL_CHARACTER)return Ni(t,Ni(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&au.previousOperatorTakesPrecedent(a.value,s.value))t=Ni(t,[a]),n=n.slice(0,-1);else break}n=Ni(n,[s]),t=Ni(t,au.getValue(r,np))}}});var sp=b(Yr=>{"use strict";Yr.__esModule=!0;var cb=br();Yr.andUtil=function(r,e){return r&&e};Yr.orUtil=function(r,e){return r||e};Yr.xorUtil=function(r,e){return r!==e};Yr.notUtil=function(r){return!r};Yr.isIdentifier=function(r){var e=r.name,t=r.value;return e===cb.Tokens.IDENTIFIER&&typeof t=="string"};Yr.isOperator=function(r){var e=r.name,t=r.value;return e===cb.Tokens.OPERATOR&&typeof t=="string"};Yr.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var db=b(up=>{"use strict";var pa;up.__esModule=!0;var ap=br(),op=sp();up.OPERATOR_MAP=(pa={},pa[ap.Operators.AND]=op.andUtil,pa[ap.Operators.OR]=op.orUtil,pa[ap.Operators.XOR]=op.xorUtil,pa)});var pb=b(Wn=>{"use strict";var lp=Wn&&Wn.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Wn.__esModule=!0;var sC=ip(),fb=br(),aC=db(),Un=sp();Wn.getEvaluator=function(r){var e=sC.parse(r);return function(t){return Wn.evaluate(e,t)}};Wn.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(Un.isIdentifier(i)||Un.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===fb.Tokens.IDENTIFIER)return lp(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===fb.Operators.NOT)return o===void 0&&Un.throwInvalidExpression("missing identifier"),lp(n.slice(0,-1),[Un.notUtil(o)]);(o===void 0||a===void 0)&&Un.throwInvalidExpression("missing identifier");var u=aC.OPERATOR_MAP[i.value];return u||Un.throwInvalidExpression("unknown operator"),lp(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&Un.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var mb=b(ha=>{"use strict";ha.__esModule=!0;var hb=pb();ha.getEvaluator=hb.getEvaluator;ha.evaluate=hb.evaluate;var oC=ip();ha.parse=oC.parse});var pC={};Yb(pC,{default:()=>Tu});module.exports=$b(pC);var Pb=require("obsidian");var gi=require("obsidian");var mC=new Error("timeout while waiting for mutex to become available"),gC=new Error("mutex already locked"),jb=new Error("request for lock canceled"),Gb=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(f){a(f)}}function u(c){try{l(n.throw(c))}catch(f){a(f)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Eu=class{constructor(e,t=jb){this._value=e,this._cancelError=t,this._weightedQueues=[],this._weightedWaiters=[]}acquire(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((t,n)=>{this._weightedQueues[e-1]||(this._weightedQueues[e-1]=[]),this._weightedQueues[e-1].push({resolve:t,reject:n}),this._dispatch()})}runExclusive(e,t=1){return Gb(this,void 0,void 0,function*(){let[n,i]=yield this.acquire(t);try{return yield e(n)}finally{i()}})}waitForUnlock(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise(t=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),this._weightedWaiters[e-1].push(t),this._dispatch()})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatch()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatch()}cancel(){this._weightedQueues.forEach(e=>e.forEach(t=>t.reject(this._cancelError))),this._weightedQueues=[]}_dispatch(){var e;for(let t=this._value;t>0;t--){let n=(e=this._weightedQueues[t-1])===null||e===void 0?void 0:e.shift();if(!n)continue;let i=this._value,s=t;this._value-=t,t=this._value+1,n.resolve([i,this._newReleaser(s)])}this._drainUnlockWaiters()}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){for(let e=this._value;e>0;e--)!this._weightedWaiters[e-1]||(this._weightedWaiters[e-1].forEach(t=>t()),this._weightedWaiters[e-1]=[])}},Bb=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(f){a(f)}}function u(c){try{l(n.throw(c))}catch(f){a(f)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Oa=class{constructor(e){this._semaphore=new Eu(1,e)}acquire(){return Bb(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var To=zn(Be());var Tt=class{constructor(e,t){this.start=e,this.end=t,t.isBefore(e)&&(this.start=t,this.end=e),this.start=this.start.startOf("day"),this.end=this.end.startOf("day")}static buildRelative(e){let t=e==="week"?"isoWeek":e;return new Tt(window.moment().startOf(t).startOf("day"),window.moment().endOf(t).startOf("day"))}static buildInvalid(){return new Tt(window.moment.invalid(),window.moment.invalid())}isValid(){return this.start.isValid()&&this.end.isValid()}moveToPrevious(e){let t=window.moment.duration(1,e);this.start.subtract(t),this.end.subtract(t),(e==="month"||e==="quarter")&&(this.end=this.end.endOf(e).startOf("day"))}moveToNext(e){let t=window.moment.duration(1,e);this.start.add(t),this.end.add(t),(e==="month"||e==="quarter")&&(this.end=this.end.endOf(e).startOf("day"))}};var At=class{static parseDate(e,t=!1){return window.moment(To.parseDate(e,void 0,{forwardDate:t})).startOf("day")}static parseDateRange(e,t=!1){let n=[At.parseRelativeDateRange,At.parseNumberedDateRange,At.parseAbsoluteDateRange];for(let i of n){let s=i(e,t);if(s.isValid())return s}return Tt.buildInvalid()}static parseAbsoluteDateRange(e,t){let n=To.parse(e,void 0,{forwardDate:t});if(n.length===0)return Tt.buildInvalid();let i=n[0].start,s=n[1]&&n[1].start?n[1].start:i,a=window.moment(i.date()),o=window.moment(s.date());return new Tt(a,o)}static parseRelativeDateRange(e,t){let n=/(last|this|next) (week|month|quarter|year)/,i=e.match(n);if(i&&i.length===3){let s=i[1],a=i[2],o=Tt.buildRelative(a);switch(s){case"last":o.moveToPrevious(a);break;case"next":o.moveToNext(a);break}return o}return Tt.buildInvalid()}static parseNumberedDateRange(e,t){let n=[[/^\s*[0-9]{4}\s*$/,"YYYY","year"],[/^\s*[0-9]{4}-Q[1-4]\s*$/,"YYYY-Q","quarter"],[/^\s*[0-9]{4}-[0-9]{2}\s*$/,"YYYY-MM","month"],[/^\s*[0-9]{4}-W[0-9]{2}\s*$/,"YYYY-WW","isoWeek"]];for(let[i,s,a]of n){let o=e.match(i);if(o){let u=o[0].trim();return new Tt(window.moment(u,s).startOf(a),window.moment(u,s).endOf(a))}}return Tt.buildInvalid()}};var lx={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function ci(r){for(let[e,t]of Object.entries(lx))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}var _o=["MO","TU","WE","TH","FR","SA","SU"],je=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(_o.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=_o[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var Me=function(r){return r!=null},Ct=function(r){return typeof r=="number"},pf=function(r){return typeof r=="string"&&_o.includes(r)},at=Array.isArray,Ht=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var le=function(r,e){var t=0,n=[];if(at(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},sT=function(r){return at(r)?r:[r]};function wn(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=le(t,e/t.length)),t.slice(0,e)+String(n))}var aT=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},ut=function(r,e){var t=r%e;return t*e<0?t+e:t},bo=function(r,e){return{div:Math.floor(r/e),mod:ut(r,e)}},Pt=function(r){return!Me(r)||r.length===0},Ue=function(r){return!Pt(r)},de=function(r,e){return Ue(r)&&r.indexOf(e)!==-1};var Zr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[wn(n.getUTCFullYear().toString(),4,"0"),wn(n.getUTCMonth()+1,2,"0"),wn(n.getUTCDate(),2,"0"),"T",wn(n.getUTCHours(),2,"0"),wn(n.getUTCMinutes(),2,"0"),wn(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(Zr||(Zr={}));var K=Zr;var cx=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Ar=cx;var MT=zn(RT(),1),{__extends:fi,__assign:_t,__rest:rI,__decorate:nI,__param:iI,__metadata:sI,__awaiter:aI,__generator:oI,__exportStar:uI,__createBinding:lI,__values:cI,__read:dI,__spread:fI,__spreadArrays:pI,__spreadArray:x,__await:hI,__asyncGenerator:mI,__asyncDelegator:gI,__asyncValues:yI,__makeTemplateObject:TI,__importStar:_I,__importDefault:bI,__classPrivateFieldGet:vI,__classPrivateFieldSet:EI,__classPrivateFieldIn:wI}=MT.default;var dx=function(r){fi(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Ar),mf=dx;var fx={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},kn=fx;var xT=function(r,e){return r.indexOf(e)!==-1},px=function(r){return r.toString()},hx=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},mx=function(){function r(e,t,n,i){if(t===void 0&&(t=px),n===void 0&&(n=kn),i===void 0&&(i=hx),this.text=[],this.language=n||kn,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,f){return c-f}),a.sort(function(c,f){return f-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(Me(this.origOptions.byweekday)){var o=at(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,f){return c.weekday-f.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(xT(["dtstart","wkst","freq"],n))return!0;if(!xT(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[Y.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=Ct(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),at(e)||(e=[e]);var a=function(u,l,c){for(var f="",h=0;h<u.length;h++)h!==0&&(h===u.length-1?f+=" "+c+" ":f+=l+" "),f+=u[h];return f};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),hr=mx;var gx=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function Gs(r,e){e===void 0&&(e=kn);var t={},n=new gx(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var h=n.acceptNumber();if(h&&(t.interval=parseInt(h[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=Y.DAILY,n.nextSymbol()&&(a(),f());break;case"weekday(s)":t.freq=Y.WEEKLY,t.byweekday=[Y.MO,Y.TU,Y.WE,Y.TH,Y.FR],n.nextSymbol(),f();break;case"week(s)":t.freq=Y.WEEKLY,n.nextSymbol()&&(s(),f());break;case"hour(s)":t.freq=Y.HOURLY,n.nextSymbol()&&(s(),f());break;case"minute(s)":t.freq=Y.MINUTELY,n.nextSymbol()&&(s(),f());break;case"month(s)":t.freq=Y.MONTHLY,n.nextSymbol()&&(s(),f());break;case"year(s)":t.freq=Y.YEARLY,n.nextSymbol()&&(s(),f());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=Y.WEEKLY;var T=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[Y[T]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(Y[y]),n.nextSymbol()}c(),f();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=Y.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var E=o();if(!E)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(E),n.nextSymbol()}s(),f();break;default:throw new Error("Unknown symbol")}}function s(){var h=n.accept("on"),T=n.accept("the");if(!!(h||T))do{var y=l(),E=u(),D=o();if(y)E?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(Y[E].nth(y))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(y),n.accept("day(s)"));else if(E)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(Y[E]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[Y.MO,Y.TU,Y.WE,Y.TH,Y.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var A=n.acceptNumber();if(!A)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(A[0],10)];n.accept("comma");){if(A=n.acceptNumber(),!A)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(A[0],10))}}else if(D)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(D);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var h=n.accept("at");if(!!h)do{var T=n.acceptNumber();if(!T)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(T[0],10)];n.accept("comma");){if(T=n.acceptNumber(),!T)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(T[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var h=parseInt(n.value[1],10);if(h<-366||h>366)throw new Error("Nth out of range: "+h);return n.nextSymbol(),n.accept("last")?-h:h;default:return!1}}function c(){n.accept("on"),n.accept("the");var h=l();if(!!h)for(t.bymonthday=[h],n.nextSymbol();n.accept("comma");){if(h=l(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(h),n.nextSymbol()}}function f(){if(n.symbol==="until"){var h=Date.parse(n.text);if(!h)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(h)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var oe;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(oe||(oe={}));function Bs(r){return r<oe.HOURLY}var AT=function(r,e){return e===void 0&&(e=kn),new Y(Gs(r,e)||void 0)},pi=["count","until","interval","byweekday","bymonthday","bymonth"];hr.IMPLEMENTED=[];hr.IMPLEMENTED[oe.HOURLY]=pi;hr.IMPLEMENTED[oe.MINUTELY]=pi;hr.IMPLEMENTED[oe.DAILY]=["byhour"].concat(pi);hr.IMPLEMENTED[oe.WEEKLY]=pi;hr.IMPLEMENTED[oe.MONTHLY]=pi;hr.IMPLEMENTED[oe.YEARLY]=["byweekno","byyearday"].concat(pi);var CT=function(r,e,t,n){return new hr(r,e,t,n).toString()},PT=hr.isFullyConvertible;var hi=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var NT=function(r){fi(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return Zr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=ut(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=bo(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),Pt(i)||de(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=bo(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(Pt(i)||de(i,this.hour))&&(Pt(s)||de(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=bo(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(Pt(i)||de(i,this.hour))&&(Pt(s)||de(s,this.minute))&&(Pt(a)||de(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=Zr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>Zr.MAXYEAR))return;t=Zr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case oe.YEARLY:return this.addYears(s);case oe.MONTHLY:return this.addMonths(s);case oe.WEEKLY:return this.addWeekly(s,a);case oe.DAILY:return this.addDaily(s);case oe.HOURLY:return this.addHours(s,n,o);case oe.MINUTELY:return this.addMinutes(s,n,o,u);case oe.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(hi);function gf(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];de(LT,s)||e.push(s),K.isDate(r[s])&&!K.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return _t({},r)}function IT(r){var e=_t(_t({},Hs),gf(r));if(Me(e.byeaster)&&(e.freq=Y.YEARLY),!(Me(e.freq)&&Y.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),Me(e.wkst)?Ct(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=Y.MO.weekday,Me(e.bysetpos)){Ct(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||Ue(e.byweekno)||Ue(e.byyearday)||Boolean(e.bymonthday)||Ue(e.bymonthday)||Me(e.byweekday)||Me(e.byeaster)))switch(e.freq){case Y.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case Y.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case Y.WEEKLY:e.byweekday=[K.getWeekday(e.dtstart)];break}if(Me(e.bymonth)&&!at(e.bymonth)&&(e.bymonth=[e.bymonth]),Me(e.byyearday)&&!at(e.byyearday)&&Ct(e.byyearday)&&(e.byyearday=[e.byyearday]),!Me(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(at(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(Me(e.byweekno)&&!at(e.byweekno)&&(e.byweekno=[e.byweekno]),!Me(e.byweekday))e.bynweekday=null;else if(Ct(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(pf(e.byweekday))e.byweekday=[je.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof je)!e.byweekday.n||e.freq>Y.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(Ct(u)){a.push(u);continue}else if(pf(u)){a.push(je.fromStr(u).weekday);continue}!u.n||e.freq>Y.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=Ue(a)?a:null,e.bynweekday=Ue(o)?o:null}return Me(e.byhour)?Ct(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<Y.HOURLY?[e.dtstart.getUTCHours()]:null,Me(e.byminute)?Ct(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<Y.MINUTELY?[e.dtstart.getUTCMinutes()]:null,Me(e.bysecond)?Ct(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<Y.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function FT(r){var e=r.dtstart.getTime()%1e3;if(!Bs(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new hi(n,i,s,e))})})}),t}function Ks(r){var e=r.split(`
`).map(yx).filter(function(t){return t!==null});return _t(_t({},e[0]),e[1])}function zs(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=K.untilStringToDate(i),e}function yx(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return UT(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return UT(r);case"DTSTART":return zs(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function UT(r){var e=r.replace(/^RRULE:/i,""),t=zs(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=oe[o.toUpperCase()];break;case"WKST":t.wkst=zt[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=Tx(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=_x(o);break;case"DTSTART":case"TZID":var c=zs(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=K.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function Tx(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(WT)}return WT(r)}function WT(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function _x(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return zt[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=zt[s].weekday;return new je(a,i)})}var On=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=K.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function Vs(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(Hs),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!de(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!Me(o)||at(o)&&!o.length)){switch(a){case"FREQ":u=Y.FREQUENCIES[r.freq];break;case"WKST":Ct(o)?u=new je(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=sT(o).map(function(T){return T instanceof je?T:at(T)?new je(T[0],T[1]):new je(T)}).toString();break;case"DTSTART":t=bx(o,r.tzid);break;case"UNTIL":u=K.timeToUntilString(o,!r.tzid);break;default:if(at(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var f=e.map(function(T){var y=T[0],E=T[1];return"".concat(y,"=").concat(E.toString())}).join(";"),h="";return f!==""&&(h="RRULE:".concat(f)),[t,h].filter(function(T){return!!T}).join(`
`)}function bx(r,e){return r?"DTSTART"+new On(new Date(r),e).toString():""}function vx(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var qT=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?K.clone(t):K.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var f=0;f<i.length;f++){var h=i[f];if(!vx(t[h],c[h]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(at(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new Ar(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return at(n)?K.cloneDates(n):n instanceof Date?K.clone(n):n},r}();var YT=x(x(x(x(x(x(x(x(x(x(x(x(x([],le(1,31),!0),le(2,28),!0),le(3,31),!0),le(4,30),!0),le(5,31),!0),le(6,30),!0),le(7,31),!0),le(8,31),!0),le(9,30),!0),le(10,31),!0),le(11,30),!0),le(12,31),!0),le(1,7),!0),$T=x(x(x(x(x(x(x(x(x(x(x(x(x([],le(1,31),!0),le(2,29),!0),le(3,31),!0),le(4,30),!0),le(5,31),!0),le(6,30),!0),le(7,31),!0),le(8,31),!0),le(9,30),!0),le(10,31),!0),le(11,30),!0),le(12,31),!0),le(1,7),!0),Ex=Ht(1,29),wx=Ht(1,30),Jr=Ht(1,31),lt=Ht(1,32),jT=x(x(x(x(x(x(x(x(x(x(x(x(x([],lt,!0),wx,!0),lt,!0),Jr,!0),lt,!0),Jr,!0),lt,!0),lt,!0),Jr,!0),lt,!0),Jr,!0),lt,!0),lt.slice(0,7),!0),GT=x(x(x(x(x(x(x(x(x(x(x(x(x([],lt,!0),Ex,!0),lt,!0),Jr,!0),lt,!0),Jr,!0),lt,!0),lt,!0),Jr,!0),lt,!0),Jr,!0),lt,!0),lt.slice(0,7),!0),kx=Ht(-28,0),Ox=Ht(-29,0),en=Ht(-30,0),ct=Ht(-31,0),BT=x(x(x(x(x(x(x(x(x(x(x(x(x([],ct,!0),Ox,!0),ct,!0),en,!0),ct,!0),en,!0),ct,!0),ct,!0),en,!0),ct,!0),en,!0),ct,!0),ct.slice(0,7),!0),HT=x(x(x(x(x(x(x(x(x(x(x(x(x([],ct,!0),kx,!0),ct,!0),en,!0),ct,!0),en,!0),ct,!0),ct,!0),en,!0),ct,!0),en,!0),ct,!0),ct.slice(0,7),!0),zT=[0,31,60,91,121,152,182,213,244,274,305,335,366],KT=[0,31,59,90,120,151,181,212,243,273,304,334,365],yf=function(){for(var r=[],e=0;e<55;e++)r=r.concat(Ht(7));return r}();function VT(r,e){var t=new Date(Date.UTC(r,0,1)),n=K.isLeapYear(r)?366:365,i=K.isLeapYear(r+1)?366:365,s=K.toOrdinal(t),a=K.getWeekday(t),o=_t(_t({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},Sx(r)),{wnomask:null});if(Pt(e.byweekno))return o;o.wnomask=le(0,n+7);var u,l,c=u=ut(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+ut(a-e.wkst,7)):l=n-c;for(var f=Math.floor(l/7),h=ut(l,7),T=Math.floor(f+h/4),y=0;y<e.byweekno.length;y++){var E=e.byweekno[y];if(E<0&&(E+=T+1),E>0&&E<=T){var D=void 0;E>1?(D=c+(E-1)*7,c!==u&&(D-=7-u)):D=c;for(var A=0;A<7&&(o.wnomask[D]=1,D++,o.wdaymask[D]!==e.wkst);A++);}}if(de(e.byweekno,1)){var D=c+T*7;if(c!==u&&(D-=7-u),D<n)for(var y=0;y<7&&(o.wnomask[D]=1,D+=1,o.wdaymask[D]!==e.wkst);y++);}if(c){var P=void 0;if(de(e.byweekno,-1))P=-1;else{var F=K.getWeekday(new Date(Date.UTC(r-1,0,1))),Z=ut(7-F.valueOf()+e.wkst,7),Q=K.isLeapYear(r-1)?366:365,me=void 0;Z>=4?(Z=0,me=Q+ut(F-e.wkst,7)):me=n-c,P=Math.floor(52+ut(me,7)/4)}if(de(e.byweekno,P))for(var D=0;D<c;D++)o.wnomask[D]=1}return o}function Sx(r){var e=K.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=K.getWeekday(t);return e===365?{mmask:YT,mdaymask:GT,nmdaymask:HT,wdaymask:yf.slice(n),mrange:KT}:{mmask:$T,mdaymask:jT,nmdaymask:BT,wdaymask:yf.slice(n),mrange:zT}}function QT(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===Y.YEARLY)if(Pt(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===Y.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(Pt(o))return a;a.nwdaymask=le(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],f=l[1]-1,h=0;h<s.bynweekday.length;h++){var T=void 0,y=s.bynweekday[h],E=y[0],D=y[1];D<0?(T=f+(D+1)*7,T-=ut(i[T]-E,7)):(T=c+(D-1)*7,T+=ut(7-i[T]+E,7)),c<=T&&T<=f&&(a.nwdaymask[T]=1)}return a}function XT(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),f=i%4,h=Math.floor(32+2*a+2*c-l-f)%7,T=Math.floor((t+11*l+22*h)/451),y=Math.floor((l+h-7*T+114)/31),E=(l+h-7*T+114)%31+1,D=Date.UTC(r,y-1,E+e),A=Date.UTC(r,0,1);return[Math.ceil((D-A)/(1e3*60*60*24))]}var Dx=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=VT(e,n)),Ue(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=QT(e,t,s,a,o,n)}Me(n.byeaster)&&(this.eastermask=XT(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[Ht(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=le(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=le(null,this.yearlen+7),s=K.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=le(null,this.yearlen),s=K.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),K.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new hi(e,t,a,i)});return K.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new hi(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case oe.YEARLY:return this.ydayset.bind(this);case oe.MONTHLY:return this.mdayset.bind(this);case oe.WEEKLY:return this.wdayset.bind(this);case oe.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case oe.HOURLY:return this.htimeset.bind(this);case oe.MINUTELY:return this.mtimeset.bind(this);case oe.SECONDLY:return this.stimeset.bind(this)}},r}(),ZT=Dx;function JT(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=ut(c,e.length)):(u=Math.floor((c-1)/e.length),l=ut(c-1,e.length));for(var f=[],h=t;h<n;h++){var T=s[h];!Me(T)||f.push(T)}var y=void 0;u<0?y=f.slice(u)[0]:y=f[u];var E=e[l],D=K.fromOrdinal(i.yearordinal+y),A=K.combine(D,E);de(a,A)||a.push(A)}return K.sort(a),a}function ko(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return Cr(r);var u=NT.fromDate(t),l=new ZT(e);l.rebuild(u.year,u.month);for(var c=xx(l,u,e);;){var f=l.getdayset(n)(u.year,u.month,u.day),h=f[0],T=f[1],y=f[2],E=Mx(h,T,y,l,e);if(Ue(a))for(var D=JT(a,c,T,y,l,h),A=0;A<D.length;A++){var P=D[A];if(s&&P>s)return Cr(r);if(P>=t){var F=e_(P,e);if(!r.accept(F)||o&&(--o,!o))return Cr(r)}}else for(var A=T;A<y;A++){var Z=h[A];if(!!Me(Z))for(var Q=K.fromOrdinal(l.yearordinal+Z),me=0;me<c.length;me++){var j=c[me],P=K.combine(Q,j);if(s&&P>s)return Cr(r);if(P>=t){var F=e_(P,e);if(!r.accept(F)||o&&(--o,!o))return Cr(r)}}}if(e.interval===0||(u.add(e,E),u.year>K.MAXYEAR))return Cr(r);Bs(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function Rx(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return Ue(n)&&!de(n,r.mmask[e])||Ue(i)&&!r.wnomask[e]||Ue(s)&&!de(s,r.wdaymask[e])||Ue(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!de(r.eastermask,e)||(Ue(o)||Ue(u))&&!de(o,r.mdaymask[e])&&!de(u,r.nmdaymask[e])||Ue(l)&&(e<r.yearlen&&!de(l,e+1)&&!de(l,-r.yearlen+e)||e>=r.yearlen&&!de(l,e+1-r.yearlen)&&!de(l,-r.nextyearlen+e-r.yearlen))}function e_(r,e){return new On(r,e.tzid).rezonedDate()}function Cr(r){return r.getValue()}function Mx(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=Rx(n,o,i),s&&(r[o]=null)}return s}function xx(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return Bs(n)?FT(t):n>=Y.HOURLY&&Ue(i)&&!de(i,e.hour)||n>=Y.MINUTELY&&Ue(s)&&!de(s,e.minute)||n>=Y.SECONDLY&&Ue(a)&&!de(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var zt={MO:new je(0),TU:new je(1),WE:new je(2),TH:new je(3),FR:new je(4),SA:new je(5),SU:new je(6)},Hs={freq:oe.YEARLY,dtstart:null,interval:1,wkst:zt.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},LT=Object.keys(Hs),Y=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new qT,this.origOptions=gf(e);var n=IT(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return Gs(e,t)},r.fromText=function(e,t){return AT(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return ko(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new mf("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Ar("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!K.isValidDate(e)||!K.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new mf("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new Ar("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!K.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Ar("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!K.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Ar("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return Vs(this.origOptions)},r.prototype.toText=function(e,t,n){return CT(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return PT(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=oe.YEARLY,r.MONTHLY=oe.MONTHLY,r.WEEKLY=oe.WEEKLY,r.DAILY=oe.DAILY,r.HOURLY=oe.HOURLY,r.MINUTELY=oe.MINUTELY,r.SECONDLY=oe.SECONDLY,r.MO=zt.MO,r.TU=zt.TU,r.WE=zt.WE,r.TH=zt.TH,r.FR=zt.FR,r.SA=zt.SA,r.SU=zt.SU,r.parseString=Ks,r.optionsToString=Vs,r}();function t_(r,e,t,n,i,s){var a={},o=r.accept;function u(h,T){t.forEach(function(y){y.between(h,T,!0).forEach(function(E){a[Number(E)]=!0})})}i.forEach(function(h){var T=new On(h,s).rezonedDate();a[Number(T)]=!0}),r.accept=function(h){var T=Number(h);return isNaN(T)?o.call(this,h):!a[T]&&(u(new Date(T-1),new Date(T+1)),!a[T])?(a[T]=!0,o.call(this,h)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(h){var T=Number(h);return a[T]?!0:(a[T]=!0,o.call(this,h))});for(var l=0;l<n.length;l++){var c=new On(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(h){ko(r,h.options)});var f=r._result;switch(K.sort(f),r.method){case"all":case"between":return f;case"before":return f.length&&f[f.length-1]||null;case"after":default:return f.length&&f[0]||null}}var r_={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function Ax(r,e){var t=[],n=[],i=[],s=[],a=zs(r),o=a.dtstart,u=a.tzid,l=Fx(r,e.unfold);return l.forEach(function(c){var f;if(!!c){var h=Ix(c),T=h.name,y=h.parms,E=h.value;switch(T.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));t.push(Ks(c));break;case"RDATE":var D=(f=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&f!==void 0?f:[],A=D[1];A&&!u&&(u=A),n=n.concat(n_(E,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push(Ks(E));break;case"EXDATE":s=s.concat(n_(E,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+T)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function Cx(r,e){var t=Ax(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new _f(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(h){c.rrule(new Y(Tf(h,o,u),l))}),i.forEach(function(h){c.rdate(h)}),s.forEach(function(h){c.exrule(new Y(Tf(h,o,u),l))}),a.forEach(function(h){c.exdate(h)}),e.compatible&&e.dtstart&&c.rdate(o),c}var f=n[0]||{};return new Y(Tf(f,f.dtstart||e.dtstart||o,f.tzid||e.tzid||u),l)}function Oo(r,e){return e===void 0&&(e={}),Cx(r,Px(e))}function Tf(r,e,t){return _t(_t({},r),{dtstart:e,tzid:t})}function Px(r){var e=[],t=Object.keys(r),n=Object.keys(r_);if(t.forEach(function(i){de(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return _t(_t({},r_),r)}function Nx(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=aT(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function Ix(r){var e=Nx(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function Fx(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function Lx(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function n_(r,e){return Lx(e),r.split(",").map(function(t){return K.untilStringToDate(t)})}function i_(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var _f=function(r){fi(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=i_.apply(n,["dtstart"]),n.tzid=i_.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return t_(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){s_(t,this._rrule)},e.prototype.exrule=function(t){s_(t,this._exrule)},e.prototype.rdate=function(t){a_(t,this._rdate)},e.prototype.exdate=function(t){a_(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return Oo(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return Oo(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(Vs({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(o_("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(o_("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(Y);function s_(r,e){if(!(r instanceof Y))throw new TypeError(String(r)+" is not RRule instance");de(e.map(String),String(r))||e.push(r)}function a_(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");de(e.map(Number),Number(r))||(e.push(r),K.sort(e))}function o_(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return K.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}function Pr(r,e){return r!==null&&e===null?-1:r===null&&e!==null?1:r!==null&&e!==null?r.isValid()&&!e.isValid()?-1:!r.isValid()&&e.isValid()||r.isAfter(e)?1:r.isBefore(e)?-1:0:0}var et=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=Y.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new Y(u);return new et({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){s instanceof Error&&console.log(s.message)}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){let e=this.nextReferenceDate();if(e!==null){let t=null,n=null,i=null;if(this.referenceDate){if(this.startDate){let s=window.moment.duration(this.startDate.diff(this.referenceDate));t=window.moment(e),t.add(Math.round(s.asDays()),"days")}if(this.scheduledDate){let s=window.moment.duration(this.scheduledDate.diff(this.referenceDate));n=window.moment(e),n.add(Math.round(s.asDays()),"days")}if(this.dueDate){let s=window.moment.duration(this.dueDate.diff(this.referenceDate));i=window.moment(e),i.add(Math.round(s.asDays()),"days")}}return{startDate:t,scheduledDate:n,dueDate:i}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||Pr(this.startDate,e.startDate)!==0||Pr(this.scheduledDate,e.scheduledDate)!==0||Pr(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextReferenceDate(){if(this.baseOnToday){let e=window.moment();return this.nextReferenceDateFromToday(e).toDate()}else return this.nextReferenceDateFromOriginalReferenceDate().toDate()}nextReferenceDateFromToday(e){let t=new Y(gt(he({},this.rrule.origOptions),{dtstart:e.startOf("day").utc(!0).toDate()}));return this.nextAfter(e.endOf("day"),t)}nextReferenceDateFromOriginalReferenceDate(){var t;let e=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");return this.nextAfter(e,this.rrule)}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=et.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=et.nextAfterYears(e,n,t,a[1])),et.addTimezone(n)}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));et.isSkippingTooManyMonths(e,t,s);)t=et.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));et.isSkippingTooManyYears(e,t,s);)t=et.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new Y(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};function So(r){return r.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}var Kt=class{static get(){let{globalFilter:e}=X();return e}static set(e){Ge({globalFilter:e})}static reset(){Ge({globalFilter:Kt.empty})}static isEmpty(){return Kt.get()===Kt.empty}static equals(e){return Kt.get()===e}static includedIn(e){let t=Kt.get();return e.includes(t)}static prependTo(e){return Kt.get()+" "+e}static removeAsWordFromDependingOnSettings(e){let{removeGlobalFilter:t}=X();return t?Kt.removeAsWordFrom(e):e}static removeAsWordFrom(e){if(Kt.isEmpty())return e;let t=RegExp("(^|\\s)"+So(Kt.get())+"($|\\s)","ug");return e.search(t)>-1&&(e=e.replace(t,"$1$2").replace("  "," ").trim()),e}static removeAsSubstringFrom(e){let t=Kt.get();return e.replace(t,"").trim()}},be=Kt;be.empty="";var bf=5;function vf(r,e){let t=[r.startDateSymbol,r.scheduledDateSymbol,r.dueDateSymbol].join("|");return(n,i,s)=>{let a=[];return a=a.concat(Wx(n,i,s,t,e)),a=a.concat(qx(n,i,s,r.recurrenceSymbol)),a=a.concat(Ux(n,i,s,r)),a.length>0&&!a.some(o=>o.suggestionType==="match")&&a.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),a=a.slice(0,s.autoSuggestMaxItems),a}}function Ux(r,e,t,n){let i=u=>Object.values(n.prioritySymbols).some(l=>l.length>0&&u.includes(l)),s=[];if(r.includes(n.dueDateSymbol)||s.push({displayText:`${n.dueDateSymbol} due date`,appendText:`${n.dueDateSymbol} `}),r.includes(n.startDateSymbol)||s.push({displayText:`${n.startDateSymbol} start date`,appendText:`${n.startDateSymbol} `}),r.includes(n.scheduledDateSymbol)||s.push({displayText:`${n.scheduledDateSymbol} scheduled date`,appendText:`${n.scheduledDateSymbol} `}),i(r)||(s.push({displayText:`${n.prioritySymbols.High} high priority`,appendText:`${n.prioritySymbols.High} `}),s.push({displayText:`${n.prioritySymbols.Medium} medium priority`,appendText:`${n.prioritySymbols.Medium} `}),s.push({displayText:`${n.prioritySymbols.Low} low priority`,appendText:`${n.prioritySymbols.Low} `}),s.push({displayText:`${n.prioritySymbols.Highest} highest priority`,appendText:`${n.prioritySymbols.Highest} `}),s.push({displayText:`${n.prioritySymbols.Lowest} lowest priority`,appendText:`${n.prioritySymbols.Lowest} `})),r.includes(n.recurrenceSymbol)||s.push({displayText:`${n.recurrenceSymbol} recurring (repeat)`,appendText:`${n.recurrenceSymbol} `}),!r.includes(n.createdDateSymbol)){let l=At.parseDate("today",!0).format(z.dateFormat);s.push({textToMatch:`${n.createdDateSymbol} created`,displayText:`${n.createdDateSymbol} created today (${l})`,appendText:`${n.createdDateSymbol} ${l} `})}let a=Ef(r,/([a-zA-Z'_-]*)/g,e),o=[];if(a&&a.length>0){let u=a[0];if(u.length>=Math.max(1,t.autoSuggestMinMatch)){let l=s.filter(c=>(c.textToMatch||c.displayText).toLowerCase().includes(u.toLowerCase()));for(let c of l)o.push({suggestionType:"match",displayText:c.displayText,appendText:c.appendText,insertAt:a.index,insertSkip:u.length})}}return o.length===0&&t.autoSuggestMinMatch===0?s:o}function Wx(r,e,t,n,i){let s=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],a=[],o=new RegExp(`(${n})\\s*([0-9a-zA-Z ]*)`,"ug"),u=Ef(r,o,e);if(u&&u.length>=2){let l=u[1],c=u[2];if(c.length<t.autoSuggestMinMatch)return[];let f=c&&c.length>1?At.parseDate(ci(c),!0):null;f&&f.isValid()&&a.push({displayText:`${f.format(z.dateFormat)}`,appendText:`${l} ${f.format(z.dateFormat)} `,insertAt:u.index,insertSkip:u[0].length});let h=1,T=s.filter(y=>c&&c.length>=h&&y.toLowerCase().includes(c.toLowerCase())).slice(0,i);T.length===0&&(T=s.slice(0,i));for(let y of T){let D=`${At.parseDate(y,!0).format(z.dateFormat)}`;a.push({suggestionType:"match",displayText:`${y} (${D})`,appendText:`${l} ${D} `,insertAt:u.index,insertSkip:u[0].length})}}return a}function qx(r,e,t,n){var u;let i=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],s=[],a=new RegExp(`(${n})\\s*([0-9a-zA-Z ]*)`,"ug"),o=Ef(r,a,e);if(o&&o.length>=2){let l=o[1],c=o[2];if(c.length<t.autoSuggestMinMatch)return[];if(c.length>0){let y=(u=et.fromText({recurrenceRuleText:c,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:u.toText();if(y){let E=`${l} ${y} `;if(s.push({suggestionType:"match",displayText:`\u2705 ${y}`,appendText:E,insertAt:o.index,insertSkip:o[0].length}),o[0]==E)return[]}}let f=1,h=t.autoSuggestMaxItems/2,T=i.filter(y=>c&&c.length>=f&&y.toLowerCase().includes(c.toLowerCase())).slice(0,h);T.length===0&&c.trim().length===0&&(T=i.slice(0,h));for(let y of T)s.push({suggestionType:"match",displayText:`${y}`,appendText:`${l} ${y} `,insertAt:o.index,insertSkip:o[0].length})}return s}function Ef(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i}function Yx(r,e){if(e.length===0)return!1;let t=Object.fromEntries(e.map(([i,s])=>[i,0])),n=Object.fromEntries(e.map(([i,s])=>[s,i]));for(let i of r)i in t?t[i]++:i in n&&(t[n[i]]=Math.max(0,t[n[i]]-1));return Object.values(t).some(i=>i>0)}function l_(r,e){return(t,n,i)=>Yx(t.slice(0,n),e)?r(t,n,i):[]}function c_(r,e){return be.includedIn(r)&&$x(r,e)}function $x(r,e){if(r.length===0)return!1;let t=ye.extractTaskComponents(r);if(!t)return!1;let n=t.indentation+t.listMarker+" ["+t.status.symbol+"] ";return e>=n.length}var Qs=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideCreatedDate=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.hideTags=!1;this.shortMode=!1;this.explainQuery=!1}},tn=class{constructor(e){this.defaultLayout=["description","priority","recurrenceRule","createdDate","startDate","scheduledDate","dueDate","doneDate","blockLink"];this.hiddenTaskLayoutComponents=[];this.taskListHiddenClasses=[];e?this.options=e:this.options=new Qs,this.shownTaskLayoutComponents=this.defaultLayout,this.applyOptions()}applyOptions(){let e=[[this.options.hidePriority,"priority"],[this.options.hideRecurrenceRule,"recurrenceRule"],[this.options.hideCreatedDate,"createdDate"],[this.options.hideStartDate,"startDate"],[this.options.hideScheduledDate,"scheduledDate"],[this.options.hideDueDate,"dueDate"],[this.options.hideDoneDate,"doneDate"]];for(let[n,i]of e)this.hideComponent(n,i),this.generateHiddenClassForTaskList(n,i);let t=[[this.options.hideTags,"tags"],[this.options.hideUrgency,"urgency"],[this.options.hideBacklinks,"backlinks"],[this.options.hideEditButton,"edit-button"]];for(let[n,i]of t)this.generateHiddenClassForTaskList(n,i);this.options.shortMode&&this.taskListHiddenClasses.push("tasks-layout-short-mode")}generateHiddenClassForTaskList(e,t){e&&this.taskListHiddenClasses.push(`tasks-layout-hide-${t}`)}hideComponent(e,t){e&&(this.hiddenTaskLayoutComponents.push(t),this.shownTaskLayoutComponents=this.shownTaskLayoutComponents.filter(n=>n!=t))}};var wf={prioritySymbols:{Highest:"\u{1F53A}",High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",Lowest:"\u23EC",None:""},startDateSymbol:"\u{1F6EB}",createdDateSymbol:"\u2795",scheduledDateSymbol:"\u23F3",dueDateSymbol:"\u{1F4C5}",doneDateSymbol:"\u2705",recurrenceSymbol:"\u{1F501}",TaskFormatRegularExpressions:{priorityRegex:/([🔺⏫🔼🔽⏬])$/u,startDateRegex:/🛫 *(\d{4}-\d{2}-\d{2})$/u,createdDateRegex:/➕ *(\d{4}-\d{2}-\d{2})$/u,scheduledDateRegex:/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,dueDateRegex:/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,doneDateRegex:/✅ *(\d{4}-\d{2}-\d{2})$/u,recurrenceRegex:/🔁 ?([a-zA-Z0-9, !]+)$/iu}},Sn=class{constructor(e){this.symbols=e}serialize(e){let t=new tn,n="";for(let i of t.shownTaskLayoutComponents)n+=this.componentToString(e,t,i);return n}componentToString(e,t,n){var f;let{prioritySymbols:i,startDateSymbol:s,createdDateSymbol:a,scheduledDateSymbol:o,doneDateSymbol:u,recurrenceSymbol:l,dueDateSymbol:c}=this.symbols;switch(n){case"description":return e.description;case"priority":{let h="";return e.priority==="0"?h=" "+i.Highest:e.priority==="1"?h=" "+i.High:e.priority==="2"?h=" "+i.Medium:e.priority==="4"?h=" "+i.Low:e.priority==="5"&&(h=" "+i.Lowest),h}case"startDate":return e.startDate?t.options.shortMode?" "+s:` ${s} ${e.startDate.format(z.dateFormat)}`:"";case"createdDate":return e.createdDate?t.options.shortMode?" "+a:` ${a} ${e.createdDate.format(z.dateFormat)}`:"";case"scheduledDate":return!e.scheduledDate||e.scheduledDateIsInferred?"":t.options.shortMode?" "+o:` ${o} ${e.scheduledDate.format(z.dateFormat)}`;case"doneDate":return e.doneDate?t.options.shortMode?" "+u:` ${u} ${e.doneDate.format(z.dateFormat)}`:"";case"dueDate":return e.dueDate?t.options.shortMode?" "+c:` ${c} ${e.dueDate.format(z.dateFormat)}`:"";case"recurrenceRule":return e.recurrence?t.options.shortMode?" "+l:` ${l} ${e.recurrence.toText()}`:"";case"blockLink":return(f=e.blockLink)!=null?f:"";default:throw new Error(`Don't know how to render task component of type '${n}'`)}}parsePriority(e){let{prioritySymbols:t}=this.symbols;switch(e){case t.Lowest:return"5";case t.Low:return"4";case t.Medium:return"2";case t.High:return"1";case t.Highest:return"0";default:return"3"}}deserialize(e){let{TaskFormatRegularExpressions:t}=this.symbols,n,i="3",s=null,a=null,o=null,u=null,l=null,c="",f=null,h="",T=20,y=0;do{n=!1;let E=e.match(t.priorityRegex);E!==null&&(i=this.parsePriority(E[1]),e=e.replace(t.priorityRegex,"").trim(),n=!0);let D=e.match(t.doneDateRegex);D!==null&&(u=window.moment(D[1],z.dateFormat),e=e.replace(t.doneDateRegex,"").trim(),n=!0);let A=e.match(t.dueDateRegex);A!==null&&(o=window.moment(A[1],z.dateFormat),e=e.replace(t.dueDateRegex,"").trim(),n=!0);let P=e.match(t.scheduledDateRegex);P!==null&&(a=window.moment(P[1],z.dateFormat),e=e.replace(t.scheduledDateRegex,"").trim(),n=!0);let F=e.match(t.startDateRegex);F!==null&&(s=window.moment(F[1],z.dateFormat),e=e.replace(t.startDateRegex,"").trim(),n=!0);let Z=e.match(t.createdDateRegex);Z!==null&&(l=window.moment(Z[1],z.dateFormat),e=e.replace(t.createdDateRegex,"").trim(),n=!0);let Q=e.match(t.recurrenceRegex);Q!==null&&(c=Q[1].trim(),e=e.replace(t.recurrenceRegex,"").trim(),n=!0);let me=e.match(z.hashTagsFromEnd);if(me!=null){e=e.replace(z.hashTagsFromEnd,"").trim(),n=!0;let j=me[0].trim();h=h.length>0?[j,h].join(" "):j}y++}while(n&&y<=T);return c.length>0&&(f=et.fromText({recurrenceRuleText:c,startDate:s,scheduledDate:a,dueDate:o})),h.length>0&&(e+=" "+h),{description:e,priority:i,startDate:s,createdDate:l,scheduledDate:a,dueDate:o,doneDate:u,recurrence:f,tags:ye.extractHashtags(e)}}};function Dn(r){let e=["(?:",/(?=[^\]]+\])\[/,"|",/(?=[^)]+\))\(/,")",/ */,r,/ */,/[)\]]/,/(?: *,)?/,/$/].map(t=>t instanceof RegExp?t.source:t).join("");return new RegExp(e,r.flags)}var kf={prioritySymbols:{Highest:"priority:: highest",High:"priority:: high",Medium:"priority:: medium",Low:"priority:: low",Lowest:"priority:: lowest",None:""},startDateSymbol:"start::",createdDateSymbol:"created::",scheduledDateSymbol:"scheduled::",dueDateSymbol:"due::",doneDateSymbol:"completion::",recurrenceSymbol:"repeat::",TaskFormatRegularExpressions:{priorityRegex:Dn(/priority:: *(highest|high|medium|low|lowest)/),startDateRegex:Dn(/start:: *(\d{4}-\d{2}-\d{2})/),createdDateRegex:Dn(/created:: *(\d{4}-\d{2}-\d{2})/),scheduledDateRegex:Dn(/scheduled:: *(\d{4}-\d{2}-\d{2})/),dueDateRegex:Dn(/due:: *(\d{4}-\d{2}-\d{2})/),doneDateRegex:Dn(/completion:: *(\d{4}-\d{2}-\d{2})/),recurrenceRegex:Dn(/repeat:: *([a-zA-Z0-9, !]+)/)}},Do=class extends Sn{constructor(){super(kf)}parsePriority(e){switch(e){case"highest":return"0";case"high":return"1";case"medium":return"2";case"low":return"4";case"lowest":return"5";default:return"3"}}componentToString(e,t,n){let i=super.componentToString(e,t,n);return i!==""&&!["blockLink","description"].includes(n)?`  [${i.trim()}]`:i}};var Vt=(a=>(a.TODO="TODO",a.DONE="DONE",a.IN_PROGRESS="IN_PROGRESS",a.CANCELLED="CANCELLED",a.NON_TASK="NON_TASK",a.EMPTY="EMPTY",a))(Vt||{}),tt=class{constructor(e,t,n,i,s="TODO"){this.symbol=e,this.name=t,this.nextStatusSymbol=n,this.availableAsCommand=i,this.type=s}};var St=class{get symbol(){return this.configuration.symbol}get name(){return this.configuration.name}get nextStatusSymbol(){return this.configuration.nextStatusSymbol}get nextSymbol(){return this.configuration.nextStatusSymbol}get availableAsCommand(){return this.configuration.availableAsCommand}get type(){return this.configuration.type}constructor(e){this.configuration=e}static makeDone(){return new St(new tt("x","Done"," ",!0,"DONE"))}static makeEmpty(){return new St(new tt("","EMPTY","",!0,"EMPTY"))}static makeTodo(){return new St(new tt(" ","Todo","x",!0,"TODO"))}static makeCancelled(){return new St(new tt("-","Cancelled"," ",!0,"CANCELLED"))}static makeInProgress(){return new St(new tt("/","In Progress","x",!0,"IN_PROGRESS"))}static getTypeForUnknownSymbol(e){switch(e){case"x":case"X":return"DONE";case"/":return"IN_PROGRESS";case"-":return"CANCELLED";case"":return"EMPTY";case" ":default:return"TODO"}}static getTypeFromStatusTypeString(e){return Vt[e]||"TODO"}static createUnknownStatus(e){return new St(new tt(e,"Unknown","x",!1,"TODO"))}static createFromImportedValue(e){let t=e[0],n=St.getTypeFromStatusTypeString(e[3]);return new St(new tt(t,e[1],e[2],!1,n))}isCompleted(){return this.type==="DONE"}identicalTo(e){let t=["symbol","name","nextStatusSymbol","availableAsCommand","type"];for(let n of t)if(this[n]!==e[n])return!1;return!0}previewText(){let e="";return St.tasksPluginCanCreateCommandsForStatuses()&&this.availableAsCommand&&(e=" Available as a command."),`- [${this.symbol}] => [${this.nextStatusSymbol}], name: '${this.name}', type: '${this.configuration.type}'.${e}`}static tasksPluginCanCreateCommandsForStatuses(){return!1}},re=St;re.DONE=St.makeDone(),re.EMPTY=St.makeEmpty(),re.TODO=St.makeTodo();var Ro=class{constructor(e=!1,t=!1){this.ignoreSortInstructions=e,this.showTaskHiddenData=t}};var He=class{constructor(){this.coreStatuses=[re.makeTodo().configuration,re.makeDone().configuration],this.customStatuses=[re.makeInProgress().configuration,re.makeCancelled().configuration]}static addStatus(e,t){e.push(t)}static replaceStatus(e,t,n){let i=this.findStatusIndex(t,e);return i<=-1?!1:(e.splice(i,1,n),!0)}static findStatusIndex(e,t){let n=new re(e);return t.findIndex(i=>new re(i).previewText()==n.previewText())}static deleteStatus(e,t){let n=this.findStatusIndex(t,e);return n<=-1?!1:(e.splice(n,1),!0)}static deleteAllCustomStatuses(e){e.customStatuses.splice(0)}static resetAllCustomStatuses(e){He.deleteAllCustomStatuses(e),new He().customStatuses.forEach(n=>{He.addStatus(e.customStatuses,n)})}static bulkAddStatusCollection(e,t){let n=[];return t.forEach(i=>{e.customStatuses.find(a=>a.symbol==i[0]&&a.name==i[1]&&a.nextStatusSymbol==i[2])?n.push(`The status ${i[1]} (${i[0]}) is already added.`):He.addStatus(e.customStatuses,re.createFromImportedValue(i))}),n}static applyToStatusRegistry(e,t){t.clearStatuses(),e.coreStatuses.forEach(n=>{t.add(n)}),e.customStatuses.forEach(n=>{t.add(n)})}};var d_=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var mr=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return d_.forEach(t=>{e=[...e,new mr(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return mr.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of mr.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var Nr={tasksPluginEmoji:{displayName:"Tasks Emoji Format",taskSerializer:new Sn(wf),buildSuggestions:vf(wf,bf)},dataview:{displayName:"Dataview",taskSerializer:new Do,buildSuggestions:l_(vf(kf,bf),[["(",")"],["[","]"]])}},Gx={globalQuery:"",globalFilter:be.empty,removeGlobalFilter:!1,taskFormat:"tasksPluginEmoji",setCreatedDate:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,provideAccessKeys:!0,useFilenameAsScheduledDate:!1,filenameAsDateFolders:[],recurrenceOnNextLine:!1,statusSettings:new He,features:mr.settingsFlags,generalSettings:{},headingOpened:{},debugSettings:new Ro},rn=he({},Gx),X=()=>{for(let r in mr.settingsFlags)rn.features[r]===void 0&&(rn.features[r]=mr.settingsFlags[r]);return rn.statusSettings.customStatuses.forEach((r,e,t)=>{var i,s;let n=re.getTypeFromStatusTypeString(r.type);t[e]=new tt((i=r.symbol)!=null?i:" ",r.name,(s=r.nextStatusSymbol)!=null?s:"x",r.availableAsCommand,n)}),he({},rn)},Ge=r=>(rn=he(he({},rn),r),X());var Rn=(r,e)=>(rn.generalSettings[r]=e,X()),f_=r=>{var e;return(e=rn.features[r])!=null?e:!1};function Zs(){return Nr[X().taskFormat]}function Of(){return{source:X().globalQuery}}var Re=class{constructor(){this._registeredStatuses=[];this.addDefaultStatusTypes()}get registeredStatuses(){return this._registeredStatuses.filter(({symbol:e})=>e!==re.EMPTY.symbol)}static getInstance(){return Re.instance||(Re.instance=new Re),Re.instance}add(e){this.hasSymbol(e.symbol)||(e instanceof re?this._registeredStatuses.push(e):this._registeredStatuses.push(new re(e)))}bySymbol(e){return this.hasSymbol(e)?this.getSymbol(e):re.EMPTY}bySymbolOrCreate(e){return this.hasSymbol(e)?this.getSymbol(e):re.createUnknownStatus(e)}byName(e){return this._registeredStatuses.filter(({name:t})=>t===e).length>0?this._registeredStatuses.filter(({name:t})=>t===e)[0]:re.EMPTY}resetToDefaultStatuses(){this.clearStatuses(),this.addDefaultStatusTypes()}clearStatuses(){this._registeredStatuses=[]}getNextStatus(e){if(e.nextStatusSymbol!==""){let t=this.bySymbol(e.nextStatusSymbol);if(t!==null)return t}return re.EMPTY}getNextStatusOrCreate(e){let t=this.getNextStatus(e);return t.type!=="EMPTY"?t:re.createUnknownStatus(e.nextStatusSymbol)}findUnknownStatuses(e){let t=e.filter(s=>!this.hasSymbol(s.symbol)),n=new Re,i=[];return t.forEach(s=>{if(n.hasSymbol(s.symbol))return;let a=Re.copyStatusWithNewName(s,`Unknown (${s.symbol})`);i.push(a),n.add(a)}),i}static copyStatusWithNewName(e,t){let n=new tt(e.symbol,t,e.nextStatusSymbol,e.availableAsCommand,e.type);return new re(n)}getSymbol(e){return this._registeredStatuses.filter(({symbol:t})=>t===e)[0]}hasSymbol(e){return this._registeredStatuses.find(t=>t.symbol===e)!==void 0}addDefaultStatusTypes(){[re.makeTodo(),re.makeInProgress(),re.makeDone(),re.makeCancelled()].forEach(t=>{this.add(t)})}};var ir=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=window.moment().startOf("day"),i=Math.round(n.diff(e.dueDate)/ir.milliSecondsPerDay),s;i>=7?s=1:i>=-14?s=(i+14)*.8/21+.2:s=.2,t+=s*ir.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*ir.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*ir.startedCoefficient),e.priority){case"0":t+=1.5*ir.priorityCoefficient;break;case"1":t+=1*ir.priorityCoefficient;break;case"2":t+=.65*ir.priorityCoefficient;break;case"3":t+=.325*ir.priorityCoefficient;break;case"5":t-=.3*ir.priorityCoefficient;break}return t}},Ir=ir;Ir.dueCoefficient=12,Ir.scheduledCoefficient=5,Ir.startedCoefficient=-3,Ir.priorityCoefficient=6,Ir.milliSecondsPerDay=1e3*60*60*24;var E_=require("obsidian");var ta=require("obsidian");var Bx=require("obsidian"),g_=zn(m_());var Sf=class extends g_.EventEmitter2{constructor(){super(...arguments);this.options={minLevels:{"":"info",tasks:"info"}};this.consoleLoggerRegistered=!1;this.arrAvg=t=>t.reduce((n,i)=>n+i,0)/t.length}configure(t){return this.options=Object.assign({},this.options,t),this}getLogger(t){let n="none",i="";for(let s in this.options.minLevels)t.startsWith(s)&&s.length>=i.length&&(n=this.options.minLevels[s],i=s);return new Df(this,t,n)}onLogEntry(t){return this.on("log",t),this}registerConsoleLogger(){return this.consoleLoggerRegistered?this:(this.onLogEntry(t=>{let n=`[${window.moment().format("YYYY-MM-DD-HH:mm:ss.SSS")}][${t.level}][${t.module}]`;switch(t.traceId&&(n+=`[${t.traceId}]`),n+=` ${t.message}`,t.objects===void 0&&(t.objects=""),t.level){case"trace":console.trace(n,t.objects);break;case"debug":console.debug(n,t.objects);break;case"info":console.info(n,t.objects);break;case"warn":console.warn(n,t.objects);break;case"error":console.error(n,t.objects);break;default:console.log(`{${t.level}} ${n}`,t.objects)}}),this.consoleLoggerRegistered=!0,this)}},Mo=new Sf,Df=class{constructor(e,t,n){this.levels={trace:1,debug:2,info:3,warn:4,error:5};this.logManager=e,this.module=t,this.minLevel=this.levelToInt(n)}levelToInt(e){return e.toLowerCase()in this.levels?this.levels[e.toLowerCase()]:99}log(e,t,n){if(this.levelToInt(e)<this.minLevel)return;let s={level:e,module:this.module,message:t,objects:n,traceId:void 0};this.logManager.emit("log",s)}trace(e,t){this.log("trace",e,t)}debug(e,t){this.log("debug",e,t)}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t){this.log("error",e,t)}logWithId(e,t,n,i){if(this.levelToInt(e)<this.minLevel)return;let a={level:e,module:this.module,message:n,objects:i,traceId:t};this.logManager.emit("log",a)}traceWithId(e,t,n){this.logWithId("trace",e,t,n)}debugWithId(e,t,n){this.logWithId("debug",e,t,n)}infoWithId(e,t,n){this.logWithId("info",e,t,n)}warnWithId(e,t,n){this.logWithId("warn",e,t,n)}errorWithId(e,t,n){this.logWithId("error",e,t,n)}};var Js,Rf,Mf,Hx=["md"],ea=Mo.getLogger("tasks"),y_=({metadataCache:r,vault:e,workspace:t})=>{Js=r,Rf=e,Mf=t},Co=t=>W(void 0,[t],function*({originalTask:r,newTasks:e}){if(Rf===void 0||Js===void 0||Mf===void 0){xo("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),ea.debug(`replaceTaskWithTasks entered. ${r.path}`),__({originalTask:r,newTasks:e,vault:Rf,metadataCache:Js,workspace:Mf,previousTries:0})});function xo(r){console.error(r),new ta.Notice(r,15e3)}function T_(r){console.warn(r),new ta.Notice(r,1e4)}function zx(r){ea.debug(r)}var nn=class extends Error{},Ao=class extends Error{},__=a=>W(void 0,[a],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,workspace:i,previousTries:s}){ea.debug(`tryRepetitive after ${s} previous tries`);let o=()=>{if(s>10){let l=`Tasks: Could not find the correct task line to update.

The task line not updated is:
${r.originalMarkdown}

In this markdown file:
"${r.taskLocation.path}"

Note: further clicks on this checkbox will usually now be ignored until the file is opened (or certain, specific edits are made - it's complicated).

Recommendations:

1. Close all panes that have the above file open, and then re-open the file.

2. Check for exactly identical copies of the task line, in this file, and see if you can make them different.
`;xo(l);return}let u=Math.min(Math.pow(10,s),100);ea.debug(`timeout = ${u}`),setTimeout(()=>{__({originalTask:r,newTasks:e,vault:t,metadataCache:n,workspace:i,previousTries:s+1})},u)};try{let[u,l,c]=yield b_(r,t),f=[...c.slice(0,u),...e.map(h=>h.toFileLineString()),...c.slice(u+1)];yield t.modify(l,f.join(`
`))}catch(u){if(u instanceof nn)return u.message&&T_(u.message),o();if(u instanceof Ao)return o();u instanceof Error&&xo(u.message)}});function b_(r,e){return W(this,null,function*(){if(Js===void 0)throw new nn;let t=e.getAbstractFileByPath(r.path);if(!(t instanceof ta.TFile))throw new nn(`Tasks: No file found for task ${r.description}. Retrying ...`);if(!Hx.includes(t.extension))throw new Error(`Tasks: Does not support files with the ${t.extension} file extension.`);let n=Js.getFileCache(t);if(n==null||n===null)throw new nn(`Tasks: No file cache found for file ${t.path}. Retrying ...`);let i=n.listItems;if(i===void 0||i.length===0)throw new nn(`Tasks: No list items found in file cache of ${t.path}. Retrying ...`);let a=(yield e.read(t)).split(`
`),o=Kx(r,a,i,zx);if(o===void 0)throw new Ao;return[o,t,a]})}function xf(r,e){return W(this,null,function*(){try{let[t,n,i]=yield b_(r,e);return[t,n]}catch(t){t instanceof nn?t.message&&T_(t.message):t instanceof Error&&xo(t.message)}})}function v_(r,e){return r<e.length}function Kx(r,e,t,n){let i=Vx(r,e);return i!==void 0||(i=Qx(r,e),i!==void 0)?i:Xx(r,e,t,n)}function Vx(r,e){let t=r.taskLocation.lineNumber;if(v_(t,e)&&e[t]===r.originalMarkdown)return ea.debug(`Found original markdown at original line number ${t}`),t}function Qx(r,e){let t=[];for(let n=0;n<e.length;n++)e[n]===r.originalMarkdown&&t.push(n);if(t.length===1)return t[0]}function Xx(r,e,t,n){let i,s=0;for(let a of t){let o=a.position.start.line;if(!v_(o,e))return;if(o<r.taskLocation.sectionStart||a.task===void 0)continue;let u=e[o];if(be.includedIn(u)){if(s===r.taskLocation.sectionIndex){if(u===r.originalMarkdown)i=o;else{n(`Tasks: Unable to find task in file ${r.taskLocation.path}.
Expected task:
${r.originalMarkdown}
Found task:
${u}`);return}break}s++}}return i}var gr=class{static priorityNameUsingNone(e){let t="ERROR";switch(e){case"1":t="High";break;case"0":t="Highest";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break;case"5":t="Lowest";break}return t}static priorityNameUsingNormal(e){return gr.priorityNameUsingNone(e).replace("None","Normal")}};var Zx={description:"task-description",priority:"task-priority",dueDate:"task-due",startDate:"task-start",createdDate:"task-created",scheduledDate:"task-scheduled",doneDate:"task-done",recurrenceRule:"task-recurring",blockLink:""},Jx=7,eA="far";function tA(r,e,t,n){return W(this,null,function*(){if(!n)throw new Error("Must call the Obsidian renderer with an Obsidian Component object");yield E_.MarkdownRenderer.renderMarkdown(r,e,t,n)})}function w_(r,e,t=null){return W(this,null,function*(){var o;t||(t=tA);let n=document.createElement("li");e.parentUlElement.appendChild(n),n.classList.add("task-list-item","plugin-tasks-list-item");let i=document.createElement("span");n.appendChild(i),i.classList.add("tasks-list-text");let s=yield rA(r,e,i,t);for(let u in s)n.dataset[u]=s[u];let a=document.createElement("input");return n.appendChild(a),a.classList.add("task-list-item-checkbox"),a.type="checkbox",r.status.symbol!==" "&&(a.checked=!0,n.classList.add("is-checked")),a.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),a.disabled=!0;let l=r.toggleWithRecurrenceInUsersOrder();Co({originalTask:r,newTasks:l})}),n.prepend(a),n.setAttribute("data-task",r.status.symbol.trim()),n.setAttribute("data-line",e.listIndex.toString()),n.setAttribute("data-task-status-name",r.status.name),n.setAttribute("data-task-status-type",r.status.type),a.setAttribute("data-line",e.listIndex.toString()),(o=e.layoutOptions)!=null&&o.shortMode&&uA({task:r,element:i,isFilenameUnique:e.isFilenameUnique}),n})}function rA(r,e,t,n){return W(this,null,function*(){let i={},s=new tn(e.layoutOptions),a=Nr.tasksPluginEmoji.taskSerializer;for(let o of s.shownTaskLayoutComponents){let u=a.componentToString(r,s,o);if(u){o==="description"&&(u=be.removeAsWordFromDependingOnSettings(u));let l=document.createElement("span");if(t.appendChild(l),l){let c=document.createElement("span");l.appendChild(c),yield nA(c,u,o,r,n,e.obsidianComponent),sA(o,c);let f=iA(o,r);l.classList.add(...f);let h=Af(o,r);for(let T in h)l.dataset[T]=h[T];i=he(he({},i),h)}}}for(let o of s.hiddenTaskLayoutComponents){let u=Af(o,r);i=he(he({},i),u)}if(i.taskPriority===void 0){let o=Af("priority",r);i=he(he({},i),o)}return i})}function nA(r,e,t,n,i,s){return W(this,null,function*(){if(t==="description"){let{debugSettings:a}=X();a.showTaskHiddenData&&(e+=`<br>\u{1F41B} <b>${n.lineNumber}</b> . ${n.sectionStart} . ${n.sectionIndex} . '<code>${n.originalMarkdown}</code>'<br>'<code>${n.path}</code>' > '<code>${n.precedingHeader}</code>'<br>`),yield i(e,r,n.path,s);let o=r.querySelector("blockquote"),u=o!=null?o:r,l=u.querySelector("p");if(l!==null){for(;l.firstChild;)u.insertBefore(l.firstChild,l);l.remove()}r.querySelectorAll("p").forEach(c=>{c.hasChildNodes()||c.remove()}),r.querySelectorAll(".footnotes").forEach(c=>{c.remove()})}else r.innerHTML=e})}function iA(r,e){let t=[],n=Zx[r];switch(r){case"blockLink":break;case"description":case"priority":case"recurrenceRule":t.push(n);break;case"createdDate":case"dueDate":case"startDate":case"scheduledDate":case"doneDate":{e[r]&&t.push(n);break}}return t}function Af(r,e){let t={};function n(i,s){if(i){let a=aA(i);a&&(t[s]=a)}}switch(r){case"description":case"recurrenceRule":break;case"priority":{t.taskPriority=gr.priorityNameUsingNormal(e.priority).toLocaleLowerCase();break}case"createdDate":{n(e.createdDate,"taskCreated");break}case"dueDate":{n(e.dueDate,"taskDue");break}case"startDate":{n(e.startDate,"taskStart");break}case"scheduledDate":{n(e.scheduledDate,"taskScheduled");break}case"doneDate":{n(e.doneDate,"taskDone");break}}return t}function sA(r,e){if(r==="description"){let t=e.getElementsByClassName("tag");for(let n=0;n<t.length;n++){let i=t[n].textContent;if(i){let s=oA(i),a=t[n];s&&(a.dataset.tagName=s)}}}}function aA(r){let e=window.moment().startOf("day"),t="",n=e.diff(r,"days");return isNaN(n)?null:n===0?"today":(n>0?t+="past-":n<0&&(t+="future-"),Math.abs(n)<=Jx?t+=Math.abs(n).toString()+"d":t+=eA,t)}function oA(r){let e=/["&\x00\r\n]/g,t=r.replace(e,"-");return t=t.replace(/^[-_]+/,""),t.length>0?t:null}function uA({task:r,element:e,isFilenameUnique:t}){let{recurrenceSymbol:n,startDateSymbol:i,createdDateSymbol:s,scheduledDateSymbol:a,dueDateSymbol:o,doneDateSymbol:u}=Nr.tasksPluginEmoji.taskSerializer.symbols;e.addEventListener("mouseenter",()=>{let l=e.createDiv();l.addClasses(["tooltip","pop-up"]),r.recurrence&&l.createDiv().setText(`${n} ${r.recurrence.toText()}`),ra(l,r.createdDate,s),ra(l,r.startDate,i),ra(l,r.scheduledDate,a),ra(l,r.dueDate,o),ra(l,r.doneDate,u);let c=r.getLinkText({isFilenameUnique:t});c&&l.createDiv().setText(`\u{1F517} ${c}`),e.addEventListener("mouseleave",()=>{l.remove()})})}function ra(r,e,t){e&&r.createDiv().setText(lA({signifier:t,date:e}))}function lA({signifier:r,date:e}){return`${r} ${e.format(z.dateFormat)} (${e.from(window.moment().startOf("day"))})`}var Dt=class{static fromPath(e){let{useFilenameAsScheduledDate:t,filenameAsDateFolders:n}=X();return!t||!this.matchesAnyFolder(n,e)?null:this.extractDateFromPath(e)}static matchesAnyFolder(e,t){return e.length===0?!0:e.some(n=>t.startsWith(n+"/"))}static extractDateFromPath(e){let t=Math.max(0,e.lastIndexOf("/")+1),n=e.lastIndexOf("."),i=e.substring(t,n),s=/(\d{4})-(\d{2})-(\d{2})/.exec(i);if(s||(s=/(\d{4})(\d{2})(\d{2})/.exec(i)),s){let a=window.moment([parseInt(s[1]),parseInt(s[2])-1,parseInt(s[3])]);if(a.isValid())return a}return null}static canApplyFallback({startDate:e,scheduledDate:t,dueDate:n}){return e===null&&n===null&&t===null}static updateTaskPath(e,t,n){let i=e.scheduledDate,s=e.scheduledDateIsInferred;return n===null?s&&(s=!1,i=null):s?i=n:this.canApplyFallback(e)&&(i=n,s=!0),new ye(gt(he({},e),{taskLocation:e.taskLocation.fromRenamedFile(t),scheduledDate:i,scheduledDateIsInferred:s}))}static removeInferredStatusIfNeeded(e,t){let n=e.scheduledDateIsInferred?e.scheduledDate:null;return t.map(i=>(n!==null&&!n.isSame(i.scheduledDate,"day")&&(i=new ye(gt(he({},i),{scheduledDateIsInferred:!1}))),i))}};var bt=class{constructor(e){this._date=null;this._date=e}get moment(){return this._date}formatAsDate(e=""){return this.format(z.dateFormat,e)}formatAsDateAndTime(e=""){return this.format(z.dateTimeFormat,e)}format(e,t=""){return this._date?this._date.format(e):t}toISOString(e){return this._date?this._date.toISOString(e):""}};var mi=class{constructor(e){this._path=e}get path(){return this._path}get root(){let e=this.path.replace(/\\/g,"/");e.charAt(0)==="/"&&(e=e.substring(1));let t=e.indexOf("/");return t==-1?"/":e.substring(0,t+1)}get folder(){let e=this.path,t=this.filename,n=e.substring(0,e.lastIndexOf(t));return n===""?"/":n}get filename(){let e=this.path.match(/([^/]+)$/);return e!==null?e[1]:""}};var Nt=class{},z=Nt;z.dateFormat="YYYY-MM-DD",z.dateTimeFormat="YYYY-MM-DD HH:mm",z.indentationRegex=/^([\s\t>]*)/,z.listMarkerRegex=/([-*+]|[0-9]+\.)/,z.checkboxRegex=/\[(.)\]/u,z.afterCheckboxRegex=/ *(.*)/u,z.taskRegex=new RegExp(Nt.indentationRegex.source+Nt.listMarkerRegex.source+" +"+Nt.checkboxRegex.source+Nt.afterCheckboxRegex.source,"u"),z.nonTaskRegex=new RegExp(Nt.indentationRegex.source+Nt.listMarkerRegex.source+"? *("+Nt.checkboxRegex.source+")?"+Nt.afterCheckboxRegex.source,"u"),z.listItemRegex=new RegExp(Nt.indentationRegex.source+Nt.listMarkerRegex.source),z.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,z.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]+/g,z.hashTagsFromEnd=new RegExp(Nt.hashTags.source+"$");var ye=class{constructor({status:e,description:t,taskLocation:n,indentation:i,listMarker:s,priority:a,createdDate:o,startDate:u,scheduledDate:l,dueDate:c,doneDate:f,recurrence:h,blockLink:T,tags:y,originalMarkdown:E,scheduledDateIsInferred:D}){this._urgency=null;this.status=e,this.description=t,this.indentation=i,this.listMarker=s,this.taskLocation=n,this.tags=y,this.priority=a,this.createdDate=o,this.startDate=u,this.scheduledDate=l,this.dueDate=c,this.doneDate=f,this.recurrence=h,this.blockLink=T,this.originalMarkdown=E,this.scheduledDateIsInferred=D}static fromLine({line:e,taskLocation:t,fallbackDate:n}){let i=ye.extractTaskComponents(e);return i===null||!be.includedIn(i.body)?null:ye.parseTaskSignifiers(e,t,n)}static parseTaskSignifiers(e,t,n){let i=ye.extractTaskComponents(e);if(i===null)return null;let{taskSerializer:s}=Zs(),a=s.deserialize(i.body),o=!1;return Dt.canApplyFallback(a)&&n!==null&&(a.scheduledDate=n,o=!0),a.tags=a.tags.map(u=>u.trim()),a.tags=a.tags.filter(u=>!be.equals(u)),new ye(gt(he(he({},i),a),{taskLocation:t,originalMarkdown:e,scheduledDateIsInferred:o}))}static extractTaskComponents(e){let t=e.match(z.taskRegex);if(t===null)return null;let n=t[1],i=t[2],s=t[3],a=Re.getInstance().bySymbolOrCreate(s),o=t[4].trim(),u=o.match(z.blockLinkRegex),l=u!==null?u[0]:"";return l!==""&&(o=o.replace(z.blockLinkRegex,"").trim()),{indentation:n,listMarker:i,status:a,body:o,blockLink:l}}toLi(e){return W(this,null,function*(){return w_(this,e)})}toString(){return Zs().taskSerializer.serialize(this)}toFileLineString(){return`${this.indentation}${this.listMarker} [${this.status.symbol}] ${this.toString()}`}toggle(){let e=Re.getInstance().getNextStatusOrCreate(this.status),t=null,n=null;if(e.isCompleted()){let{setDoneDate:a}=X();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new ye(gt(he({},this),{status:e,doneDate:t})),s=[];if(n!==null){let{setCreatedDate:a}=X(),o=null;a&&(o=window.moment());let u=Re.getInstance().getNextStatusOrCreate(e),l=new ye(gt(he(he({},this),n),{status:u,blockLink:"",createdDate:o}));s.push(l)}return s.push(i),s}toggleWithRecurrenceInUsersOrder(){let e=this.toggle(),{recurrenceOnNextLine:t}=X();return t?e.reverse():e}get isDone(){return this.status.type==="DONE"||this.status.type==="CANCELLED"||this.status.type==="NON_TASK"}get priorityNumber(){return Number.parseInt(this.priority)}get descriptionWithoutTags(){return this.description.replace(z.hashTags,"").trim()}get priorityName(){return gr.priorityNameUsingNormal(this.priority)}get urgency(){return this._urgency===null&&(this._urgency=Ir.calculate(this)),this._urgency}get path(){return this.taskLocation.path}get created(){return new bt(this.createdDate)}get done(){return new bt(this.doneDate)}get due(){return new bt(this.dueDate)}get scheduled(){return new bt(this.scheduledDate)}get start(){return new bt(this.startDate)}get happensDates(){return Array.of(this.startDate,this.scheduledDate,this.dueDate)}get happens(){let t=this.happensDates.sort(Pr);return new bt(t[0])}get isRecurring(){return this.recurrence!==null}get recurrenceRule(){return this.recurrence?this.recurrence.toText():""}get heading(){return this.precedingHeader}get hasHeading(){return this.precedingHeader!==null}get file(){return new mi(this.path)}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}get lineNumber(){return this.taskLocation.lineNumber}get sectionStart(){return this.taskLocation.sectionStart}get sectionIndex(){return this.taskLocation.sectionIndex}get precedingHeader(){return this.taskLocation.precedingHeader}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["description","path","indentation","listMarker","lineNumber","sectionStart","sectionIndex","precedingHeader","priority","blockLink","scheduledDateIsInferred"];for(let s of t)if(this[s]!==e[s])return!1;if(!this.status.identicalTo(e.status)||this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["createdDate","startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(Pr(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}static extractHashtags(e){var t,n;return(n=(t=e.match(z.hashTags))==null?void 0:t.map(i=>i.trim()))!=null?n:[]}};var na=class{constructor(e){this.fetch=e;this._value=void 0}get value(){return this._value===void 0&&(this._value=this.fetch()),this._value}};var ot=class{constructor(e,t,n,i,s){this._path=e,this._lineNumber=t,this._sectionStart=n,this._sectionIndex=i,this._precedingHeader=s}static fromUnknownPosition(e){return new ot(e,0,0,0,null)}fromRenamedFile(e){return new ot(e,this.lineNumber,this.sectionStart,this.sectionIndex,this.precedingHeader)}get path(){return this._path}get lineNumber(){return this._lineNumber}get sectionStart(){return this._sectionStart}get sectionIndex(){return this._sectionIndex}get precedingHeader(){return this._precedingHeader}};var Mn=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new Oa,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>W(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let{useFilenameAsScheduledDate:e}=X(),t=this.vault.on("create",s=>{s instanceof gi.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(s)})});this.vaultEventReferences.push(t);let n=this.vault.on("delete",s=>{s instanceof gi.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(a=>a.path!==s.path),this.notifySubscribers()})});this.vaultEventReferences.push(n);let i=this.vault.on("rename",(s,a)=>{s instanceof gi.TFile&&this.tasksMutex.runExclusive(()=>{let o=new na(()=>Dt.fromPath(s.path));this.tasks=this.tasks.map(u=>u.path===a?e?Dt.updateTaskPath(u,s.path,o.value):new ye(gt(he({},u),{taskLocation:u.taskLocation.fromRenamedFile(s.path)})):u),this.notifySubscribers()})});this.vaultEventReferences.push(i)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>W(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return W(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=this.getTasksFromFileContent(a,i,t,e)}ye.tasksListsIdentical(n,s)||(this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=a.length,u=new na(()=>Dt.fromPath(i.path)),l=null,c=0;for(let f of t)if(f.task!==void 0){let h=f.position.start.line;if(h>=o)return console.log(`${i.path} Obsidian gave us a line number ${h} past the end of the file. ${o}.`),s;if((l===null||l.position.end.line<h)&&(l=Mn.getSection(h,n.sections),c=0),l===null)continue;let T=a[h];if(T===void 0){console.log(`${i.path}: line ${h} - ignoring 'undefined' line.`);continue}let y;try{y=ye.fromLine({line:T,taskLocation:new ot(i.path,h,l.position.start.line,c,Mn.getPrecedingHeader(h,n.headings)),fallbackDate:u.value})}catch(E){this.reportTaskParsingErrorToUser(E,i,f,T);continue}y!==null&&(c++,s.push(y))}return s}reportTaskParsingErrorToUser(e,t,n,i){let s=`There was an error reading one of the tasks in this vault.
The following task has been ignored, to prevent Tasks queries getting stuck with 'Loading Tasks ...'
Error: ${e}
File: ${t.path}
Line number: ${n.position.start.line}
Task line: ${i}

Please create a bug report for this message at
https://github.com/obsidian-tasks-group/obsidian-tasks/issues/new/choose
to help us find and fix the underlying issue.

Include:
- either a screenshot of the error popup, or copy the text from the console, if on a desktop machine.
- the output from running the Obsidian command 'Show debug info'

The error popup will only be shown when Tasks is starting up, but if the error persists,
it will be shown in the console every time this file is edited during the Obsidian
session.
`;console.error(s),e instanceof Error&&console.error(e.stack),this.state==="Initializing"&&new gi.Notice(s,1e4)}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var $f=require("obsidian");var Y_=require("obsidian");function Fr(){}function Nf(r){return r()}function k_(){return Object.create(null)}function An(r){r.forEach(Nf)}function Po(r){return typeof r=="function"}function S_(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function D_(r){return Object.keys(r).length===0}var R_=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global,sa=class{constructor(e){this.options=e,this._listeners="WeakMap"in R_?new WeakMap:void 0}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!==null&&e!==void 0?e:this._observer=new ResizeObserver(t=>{var n;for(let i of t)sa.entries.set(i.target,i),(n=this._listeners.get(i.target))===null||n===void 0||n(i)})}};sa.entries="WeakMap"in R_?new WeakMap:void 0;var M_=!1;function dA(){M_=!0}function fA(){M_=!1}function M(r,e){r.appendChild(e)}function bi(r,e,t){r.insertBefore(e,t||null)}function Cn(r){r.parentNode&&r.parentNode.removeChild(r)}function If(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function V(r){return document.createElement(r)}function pA(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function dt(r){return document.createTextNode(r)}function fe(){return dt(" ")}function vt(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function x_(r){return function(e){return e.preventDefault(),r.call(this,e)}}function L(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function A_(r){let e;return{p(...t){e=t,e.forEach(n=>r.push(n))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function hA(r){return Array.from(r.childNodes)}function Ff(r,e){e=""+e,r.data!==e&&(r.data=e)}function sr(r,e){r.value=e==null?"":e}function Lf(r,e,t){for(let n=0;n<r.options.length;n+=1){let i=r.options[n];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function C_(r){let e=r.querySelector(":checked");return e&&e.__value}function ar(r,e,t){r.classList[t?"add":"remove"](e)}var xn=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=pA(t.nodeName):this.e=V(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)bi(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Cn)}};var aa;function ia(r){aa=r}function mA(){if(!aa)throw new Error("Function called outside component initialization");return aa}function Uf(r){mA().$$.on_mount.push(r)}var Ti=[];var No=[],_i=[],O_=[],gA=Promise.resolve(),Pf=!1;function yA(){Pf||(Pf=!0,gA.then(P_))}function oa(r){_i.push(r)}var Cf=new Set,yi=0;function P_(){if(yi!==0)return;let r=aa;do{try{for(;yi<Ti.length;){let e=Ti[yi];yi++,ia(e),TA(e.$$)}}catch(e){throw Ti.length=0,yi=0,e}for(ia(null),Ti.length=0,yi=0;No.length;)No.pop()();for(let e=0;e<_i.length;e+=1){let t=_i[e];Cf.has(t)||(Cf.add(t),t())}_i.length=0}while(Ti.length);for(;O_.length;)O_.pop()();Pf=!1,Cf.clear(),ia(r)}function TA(r){if(r.fragment!==null){r.update(),An(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(oa)}}function _A(r){let e=[],t=[];_i.forEach(n=>r.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),_i=e}var bA=new Set;function vA(r,e){r&&r.i&&(bA.delete(r),r.i(e))}var EA=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],kU=new Set([...EA]);function wA(r,e,t,n){let{fragment:i,after_update:s}=r.$$;i&&i.m(e,t),n||oa(()=>{let a=r.$$.on_mount.map(Nf).filter(Po);r.$$.on_destroy?r.$$.on_destroy.push(...a):An(a),r.$$.on_mount=[]}),s.forEach(oa)}function N_(r,e){let t=r.$$;t.fragment!==null&&(_A(t.after_update),An(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function kA(r,e){r.$$.dirty[0]===-1&&(Ti.push(r),yA(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function I_(r,e,t,n,i,s,a,o=[-1]){let u=aa;ia(r);let l=r.$$={fragment:null,ctx:[],props:s,update:Fr,not_equal:i,bound:k_(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:k_(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(f,h,...T)=>{let y=T.length?T[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=y)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](y),c&&kA(r,f)),h}):[],l.update(),c=!0,An(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){dA();let f=hA(e.target);l.fragment&&l.fragment.l(f),f.forEach(Cn)}else l.fragment&&l.fragment.c();e.intro&&vA(r.$$.fragment),wA(r,e.target,e.anchor,e.customElement),fA(),P_()}ia(u)}var OA;typeof HTMLElement=="function"&&(OA=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(Nf).filter(Po);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){An(this.$$.on_disconnect)}$destroy(){N_(this,1),this.$destroy=Fr}$on(r,e){if(!Po(e))return Fr;let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!D_(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var Io=class{$destroy(){N_(this,1),this.$destroy=Fr}$on(e,t){if(!Po(t))return Fr;let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!D_(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var qf=zn(Be());function F_(r,e,t){let n=r.slice();return n[45]=e[t],n}function L_(r,e,t){let n=r.slice();return n[48]=e[t].value,n[49]=e[t].label,n[50]=e[t].symbol,n[51]=e[t].accessKey,n[52]=e[t].accessKeyIndex,n}function SA(r){let e,t=r[50]+"",n;return{c(){e=V("span"),n=dt(t)},m(i,s){bi(i,e,s),M(e,n)},p:Fr,d(i){i&&Cn(e)}}}function U_(r){let e,t,n,i,s,a,o,u,l=r[49].substring(0,r[52])+"",c,f,h=r[49].substring(r[52],r[52]+1)+"",T,y,E=r[49].substring(r[52]+1)+"",D,A,P=r[50]&&r[50].charCodeAt(0)>=256,F,Z,Q,me,j,G=P&&SA(r);return Q=A_(r[33][0]),{c(){e=V("span"),t=V("input"),a=fe(),o=V("label"),u=V("span"),c=dt(l),f=V("span"),T=dt(h),y=V("span"),D=dt(E),A=fe(),G&&G.c(),Z=fe(),L(t,"type","radio"),L(t,"id",n="priority-"+r[48]),t.__value=i=r[48],t.value=t.__value,L(t,"accesskey",s=r[15](r[51])),L(f,"class","accesskey"),L(o,"for",F="priority-"+r[48]),Q.p(t)},m(Pe,Fe){bi(Pe,e,Fe),M(e,t),t.checked=t.__value===r[1].priority,M(e,a),M(e,o),M(o,u),M(u,c),M(o,f),M(f,T),M(o,y),M(y,D),M(o,A),G&&G.m(o,null),M(e,Z),me||(j=vt(t,"change",r[32]),me=!0)},p(Pe,Fe){Fe[0]&32768&&s!==(s=Pe[15](Pe[51]))&&L(t,"accesskey",s),Fe[0]&3&&(t.checked=t.__value===Pe[1].priority),P&&G.p(Pe,Fe)},d(Pe){Pe&&Cn(e),G&&G.d(),Q.r(),me=!1,j()}}}function W_(r){let e,t=r[45].name+"",n,i,s=r[45].symbol+"",a,o,u;return{c(){e=V("option"),n=dt(t),i=dt(" ["),a=dt(s),o=dt("]"),e.__value=u=r[45],e.value=e.__value},m(l,c){bi(l,e,c),M(e,n),M(e,i),M(e,a),M(e,o)},p(l,c){c[0]&1&&t!==(t=l[45].name+"")&&Ff(n,t),c[0]&1&&s!==(s=l[45].symbol+"")&&Ff(a,s),c[0]&1&&u!==(u=l[45])&&(e.__value=u,e.value=e.__value)},d(l){l&&Cn(e)}}}function DA(r){let e,t,n,i,s,a,o,u,l,c,f,h,T,y,E,D,A,P,F,Z,Q,me,j,G,Pe,Fe,B,C,w,H,N,J,d,p,m,g,_,v,k,R,O,S,I,ge,ae,ne,De,U,Ae,Ce,rt,vr,We,Le,fp,Li,ga,pp,ur,ya,hp,jn,Ta,mp,Ut,_a,gp,jr,Ui,ba,yp,Gr,va,Tp,Wi,_u,_p,Ea,bp,qi,bu,vp,wa,Ep,Gn,dn,wp,ka,kp,Yi,vu,Op,Bn=r[20],ht=[];for(let $=0;$<Bn.length;$+=1)ht[$]=U_(L_(r,Bn,$));let Hn=r[0],mt=[];for(let $=0;$<Hn.length;$+=1)mt[$]=W_(F_(r,Hn,$));return{c(){e=V("div"),t=V("form"),n=V("div"),i=V("label"),i.innerHTML='Descrip<span class="accesskey">t</span>ion',s=fe(),a=V("textarea"),u=fe(),l=V("div"),c=V("label"),f=dt("Priority"),T=fe();for(let $=0;$<ht.length;$+=1)ht[$].c();y=fe(),E=V("div"),D=V("label"),D.textContent="Recurs",A=fe(),P=V("input"),Z=fe(),Q=V("code"),me=dt(r[16]),j=fe(),G=new xn(!1),Pe=fe(),Fe=V("label"),Fe.textContent="Due",B=fe(),C=V("input"),H=fe(),N=V("code"),J=dt(r[19]),d=fe(),p=new xn(!1),m=fe(),g=V("label"),g.textContent="Scheduled",_=fe(),v=V("input"),R=fe(),O=V("code"),S=dt(r[18]),I=fe(),ge=new xn(!1),ae=fe(),ne=V("label"),ne.innerHTML='St<span class="accesskey">a</span>rt',De=fe(),U=V("input"),Ce=fe(),rt=V("code"),vr=dt(r[17]),We=fe(),Le=new xn(!1),fp=fe(),Li=V("div"),ga=V("label"),ga.innerHTML=`Only
                    <span class="accesskey-first">future</span> dates:`,pp=fe(),ur=V("input"),hp=fe(),jn=V("div"),Ta=V("label"),Ta.innerHTML='Stat<span class="accesskey">u</span>s',mp=fe(),Ut=V("select");for(let $=0;$<mt.length;$+=1)mt[$].c();gp=fe(),jr=V("div"),Ui=V("div"),ba=V("label"),ba.textContent="Completed:",yp=fe(),Gr=V("input"),Tp=fe(),Wi=V("div"),_u=V("span"),_u.textContent="Created on:",_p=fe(),Ea=V("code"),bp=fe(),qi=V("div"),bu=V("span"),bu.textContent="Done on:",vp=fe(),wa=V("code"),Ep=fe(),Gn=V("div"),dn=V("button"),wp=dt("Apply"),kp=fe(),Yi=V("button"),Yi.textContent="Cancel",L(i,"for","description"),L(a,"id","description"),L(a,"class","tasks-modal-description"),L(a,"placeholder","Take out the trash"),L(a,"accesskey",o=r[15]("t")),L(n,"class","tasks-modal-section"),L(c,"for",h="priority-"+r[1].priority),L(l,"class","tasks-modal-section tasks-modal-priorities"),L(D,"for","recurrence"),L(D,"class","accesskey-first"),L(P,"id","recurrence"),L(P,"type","text"),L(P,"placeholder","Try 'every 2 weeks on Thursday'."),L(P,"accesskey",F=r[15]("r")),ar(P,"tasks-modal-error",!r[8]),G.a=null,L(Fe,"for","due"),L(Fe,"class","accesskey-first"),L(C,"id","due"),L(C,"type","text"),L(C,"placeholder",Wf),L(C,"accesskey",w=r[15]("d")),ar(C,"tasks-modal-error",!r[7]),p.a=null,L(g,"for","scheduled"),L(g,"class","accesskey-first"),L(v,"id","scheduled"),L(v,"type","text"),L(v,"placeholder",Wf),L(v,"accesskey",k=r[15]("s")),ar(v,"tasks-modal-error",!r[5]),ge.a=null,L(ne,"for","start"),L(U,"id","start"),L(U,"type","text"),L(U,"placeholder",Wf),L(U,"accesskey",Ae=r[15]("a")),ar(U,"tasks-modal-error",!r[3]),Le.a=null,L(ga,"for","forwardOnly"),L(ur,"id","forwardOnly"),L(ur,"type","checkbox"),L(ur,"class","task-list-item-checkbox tasks-modal-checkbox"),L(ur,"accesskey",ya=r[15]("f")),L(E,"class","tasks-modal-section tasks-modal-dates"),L(Ta,"for","status"),L(Ut,"id","status-type"),L(Ut,"class","dropdown"),L(Ut,"accesskey",_a=r[15]("u")),r[1].status===void 0&&oa(()=>r[39].call(Ut)),L(jn,"class","tasks-modal-section"),L(ba,"for","status"),L(Gr,"id","status"),L(Gr,"type","checkbox"),L(Gr,"class","task-list-item-checkbox tasks-modal-checkbox"),Gr.checked=va=r[1].status.isCompleted(),Gr.disabled=!0,L(jr,"class","tasks-modal-section tasks-modal-status"),dn.disabled=ka=!r[14],L(dn,"type","submit"),L(dn,"class","mod-cta"),L(Yi,"type","button"),L(Gn,"class","tasks-modal-section tasks-modal-buttons"),ar(t,"with-accesskeys",r[9]),L(e,"class","tasks-modal")},m($,pe){bi($,e,pe),M(e,t),M(t,n),M(n,i),M(n,s),M(n,a),sr(a,r[1].description),r[31](a),M(t,u),M(t,l),M(l,c),M(c,f),M(l,T);for(let ce=0;ce<ht.length;ce+=1)ht[ce]&&ht[ce].m(l,null);M(t,y),M(t,E),M(E,D),M(E,A),M(E,P),sr(P,r[1].recurrenceRule),M(E,Z),M(E,Q),M(Q,me),M(Q,j),G.m(r[12],Q),M(E,Pe),M(E,Fe),M(E,B),M(E,C),sr(C,r[1].dueDate),M(E,H),M(E,N),M(N,J),M(N,d),p.m(r[6],N),M(E,m),M(E,g),M(E,_),M(E,v),sr(v,r[1].scheduledDate),M(E,R),M(E,O),M(O,S),M(O,I),ge.m(r[4],O),M(E,ae),M(E,ne),M(E,De),M(E,U),sr(U,r[1].startDate),M(E,Ce),M(E,rt),M(rt,vr),M(rt,We),Le.m(r[2],rt),M(E,fp),M(E,Li),M(Li,ga),M(Li,pp),M(Li,ur),ur.checked=r[1].forwardOnly,M(t,hp),M(t,jn),M(jn,Ta),M(jn,mp),M(jn,Ut);for(let ce=0;ce<mt.length;ce+=1)mt[ce]&&mt[ce].m(Ut,null);Lf(Ut,r[1].status,!0),M(t,gp),M(t,jr),M(jr,Ui),M(Ui,ba),M(Ui,yp),M(Ui,Gr),M(jr,Tp),M(jr,Wi),M(Wi,_u),M(Wi,_p),M(Wi,Ea),Ea.innerHTML=r[11],M(jr,bp),M(jr,qi),M(qi,bu),M(qi,vp),M(qi,wa),wa.innerHTML=r[13],M(t,Ep),M(t,Gn),M(Gn,dn),M(dn,wp),M(Gn,kp),M(Gn,Yi),vu||(Op=[vt(a,"input",r[30]),vt(a,"keydown",r[23]),vt(a,"paste",r[24]),vt(a,"drop",r[24]),vt(l,"keyup",r[21]),vt(P,"input",r[34]),vt(C,"input",r[35]),vt(v,"input",r[36]),vt(U,"input",r[37]),vt(ur,"change",r[38]),vt(Ut,"change",r[39]),vt(Yi,"click",r[22]),vt(t,"submit",x_(r[25]))],vu=!0)},p($,pe){if(pe[0]&32768&&o!==(o=$[15]("t"))&&L(a,"accesskey",o),pe[0]&3&&sr(a,$[1].description),pe[0]&3&&h!==(h="priority-"+$[1].priority)&&L(c,"for",h),pe[0]&1081346){Bn=$[20];let ce;for(ce=0;ce<Bn.length;ce+=1){let $i=L_($,Bn,ce);ht[ce]?ht[ce].p($i,pe):(ht[ce]=U_($i),ht[ce].c(),ht[ce].m(l,null))}for(;ce<ht.length;ce+=1)ht[ce].d(1);ht.length=Bn.length}if(pe[0]&32768&&F!==(F=$[15]("r"))&&L(P,"accesskey",F),pe[0]&3&&P.value!==$[1].recurrenceRule&&sr(P,$[1].recurrenceRule),pe[0]&256&&ar(P,"tasks-modal-error",!$[8]),pe[0]&4096&&G.p($[12]),pe[0]&32768&&w!==(w=$[15]("d"))&&L(C,"accesskey",w),pe[0]&3&&C.value!==$[1].dueDate&&sr(C,$[1].dueDate),pe[0]&128&&ar(C,"tasks-modal-error",!$[7]),pe[0]&64&&p.p($[6]),pe[0]&32768&&k!==(k=$[15]("s"))&&L(v,"accesskey",k),pe[0]&3&&v.value!==$[1].scheduledDate&&sr(v,$[1].scheduledDate),pe[0]&32&&ar(v,"tasks-modal-error",!$[5]),pe[0]&16&&ge.p($[4]),pe[0]&32768&&Ae!==(Ae=$[15]("a"))&&L(U,"accesskey",Ae),pe[0]&3&&U.value!==$[1].startDate&&sr(U,$[1].startDate),pe[0]&8&&ar(U,"tasks-modal-error",!$[3]),pe[0]&4&&Le.p($[2]),pe[0]&32768&&ya!==(ya=$[15]("f"))&&L(ur,"accesskey",ya),pe[0]&3&&(ur.checked=$[1].forwardOnly),pe[0]&1){Hn=$[0];let ce;for(ce=0;ce<Hn.length;ce+=1){let $i=F_($,Hn,ce);mt[ce]?mt[ce].p($i,pe):(mt[ce]=W_($i),mt[ce].c(),mt[ce].m(Ut,null))}for(;ce<mt.length;ce+=1)mt[ce].d(1);mt.length=Hn.length}pe[0]&32768&&_a!==(_a=$[15]("u"))&&L(Ut,"accesskey",_a),pe[0]&3&&Lf(Ut,$[1].status),pe[0]&3&&va!==(va=$[1].status.isCompleted())&&(Gr.checked=va),pe[0]&2048&&(Ea.innerHTML=$[11]),pe[0]&8192&&(wa.innerHTML=$[13]),pe[0]&16384&&ka!==(ka=!$[14])&&(dn.disabled=ka),pe[0]&512&&ar(t,"with-accesskeys",$[9])},i:Fr,o:Fr,d($){$&&Cn(e),r[31](null),If(ht,$),If(mt,$),vu=!1,An(Op)}}}var Wf="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function RA(r,e,t){let n;var i;let{task:s}=e,{onSubmit:a}=e,{statusOptions:o}=e,{prioritySymbols:u,recurrenceSymbol:l,startDateSymbol:c,scheduledDateSymbol:f,dueDateSymbol:h}=Nr.tasksPluginEmoji.taskSerializer.symbols,T,y={description:"",status:re.TODO,priority:"none",recurrenceRule:"",createdDate:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:"",forwardOnly:!0},E=!0,D="",A="",P=!0,F="",Z=!0,Q="",me=!0,j="",G=!0,Pe="",Fe=!1,B=!0,C=!0,w=[{value:"lowest",label:"Lowest",symbol:u.Lowest,accessKey:"o",accessKeyIndex:1},{value:"low",label:"Low",symbol:u.Low,accessKey:"l",accessKeyIndex:0},{value:"none",label:"Normal",symbol:u.None,accessKey:"n",accessKeyIndex:0},{value:"medium",label:"Medium",symbol:u.Medium,accessKey:"m",accessKeyIndex:0},{value:"high",label:"High",symbol:u.High,accessKey:"h",accessKeyIndex:0},{value:"highest",label:"Highest",symbol:u.Highest,accessKey:"i",accessKeyIndex:1}];function H(U,Ae,Ce=void 0){if(!Ae)return`<i>no ${U} date</i>`;let rt=qf.parseDate(Ae,Ce,{forwardDate:Ce!=null});return rt!==null?window.moment(rt).format("YYYY-MM-DD"):`<i>invalid ${U} date</i>`}function N(U,Ae){return H(U,Ae,y.forwardOnly?new Date:void 0)}function J(U){let Ae=null,Ce=qf.parseDate(U,new Date,{forwardDate:y.forwardOnly});return Ce!==null&&(Ae=window.moment(Ce)),Ae}Uf(()=>{let{provideAccessKeys:U}=X();t(9,B=U);let Ae=be.removeAsWordFrom(s.description);(Ae!=s.description||!be.includedIn(s.description))&&(Fe=!0);let Ce="none";s.priority==="5"?Ce="lowest":s.priority==="4"?Ce="low":s.priority==="2"?Ce="medium":s.priority==="1"?Ce="high":s.priority==="0"&&(Ce="highest"),t(1,y={description:Ae,status:s.status,priority:Ce,recurrenceRule:s.recurrence?s.recurrence.toText():"",createdDate:new bt(s.createdDate).formatAsDate(),startDate:new bt(s.startDate).formatAsDate(),scheduledDate:new bt(s.scheduledDate).formatAsDate(),dueDate:new bt(s.dueDate).formatAsDate(),doneDate:new bt(s.doneDate).formatAsDate(),forwardOnly:!0}),setTimeout(()=>{T.focus()},10)});let d=U=>{if(U.key&&!U.altKey&&!U.ctrlKey){let Ae=w.find(Ce=>Ce.label.charAt(0).toLowerCase()==U.key);Ae&&t(1,y.priority=Ae.value,y)}},p=()=>{a([])},m=U=>{U.key==="Enter"&&(U.preventDefault(),C&&_())},g=()=>{setTimeout(()=>{t(1,y.description=y.description.replace(/[\r\n]+/g," "),y)},0)},_=()=>{let U=y.description.trim();Fe&&(U=be.prependTo(U));let Ae=J(y.startDate),Ce=J(y.scheduledDate),rt=J(y.dueDate),vr=null;y.recurrenceRule&&(vr=et.fromText({recurrenceRuleText:y.recurrenceRule,startDate:Ae,scheduledDate:Ce,dueDate:rt}));let We;switch(y.priority){case"lowest":We="5";break;case"low":We="4";break;case"medium":We="2";break;case"high":We="1";break;case"highest":We="0";break;default:We="3"}let Le=new ye(Object.assign(Object.assign({},s),{description:U,status:y.status,priority:We,recurrence:vr,startDate:Ae,scheduledDate:Ce,dueDate:rt,doneDate:window.moment(y.doneDate,"YYYY-MM-DD").isValid()?window.moment(y.doneDate,"YYYY-MM-DD"):null}));a([Le])},v=[[]];function k(){y.description=this.value,t(1,y),t(6,Q),t(2,A),t(4,F),t(0,o)}function R(U){No[U?"unshift":"push"](()=>{T=U,t(10,T)})}function O(){y.priority=this.__value,t(1,y),t(6,Q),t(2,A),t(4,F),t(0,o)}function S(){y.recurrenceRule=this.value,t(1,y),t(6,Q),t(2,A),t(4,F),t(0,o)}function I(){y.dueDate=this.value,t(1,y),t(6,Q),t(2,A),t(4,F),t(0,o)}function ge(){y.scheduledDate=this.value,t(1,y),t(6,Q),t(2,A),t(4,F),t(0,o)}function ae(){y.startDate=this.value,t(1,y),t(6,Q),t(2,A),t(4,F),t(0,o)}function ne(){y.forwardOnly=this.checked,t(1,y),t(6,Q),t(2,A),t(4,F),t(0,o)}function De(){y.status=C_(this),t(1,y),t(6,Q),t(2,A),t(4,F),t(0,o)}return r.$$set=U=>{"task"in U&&t(26,s=U.task),"onSubmit"in U&&t(27,a=U.onSubmit),"statusOptions"in U&&t(0,o=U.statusOptions)},r.$$.update=()=>{if(r.$$.dirty[0]&512){e:t(15,n=U=>B?U:null)}if(r.$$.dirty[0]&66){e:t(1,y.dueDate=ci(y.dueDate),y),t(6,Q=N("due",y.dueDate)),t(7,me=!Q.includes("invalid"))}if(r.$$.dirty[0]&6){e:t(1,y.startDate=ci(y.startDate),y),t(2,A=N("start",y.startDate)),t(3,P=!A.includes("invalid"))}if(r.$$.dirty[0]&18){e:t(1,y.scheduledDate=ci(y.scheduledDate),y),t(4,F=N("scheduled",y.scheduledDate)),t(5,Z=!F.includes("invalid"))}if(r.$$.dirty[0]&268435458){e:if(t(8,G=!0),!y.recurrenceRule)t(12,j="<i>not recurring</>");else{let U=t(28,i=et.fromText({recurrenceRuleText:y.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||i===void 0?void 0:i.toText();U?t(12,j=U):(t(12,j="<i>invalid recurrence rule</i>"),t(8,G=!1))}}if(r.$$.dirty[0]&2){e:t(29,E=y.description.trim()!=="")}if(r.$$.dirty[0]&536871336){e:t(14,C=me&&G&&Z&&P&&E)}if(r.$$.dirty[0]&2){e:t(11,D=H("created",y.createdDate)),t(13,Pe=H("done",y.doneDate))}},[o,y,A,P,F,Z,Q,me,G,B,T,D,j,Pe,C,n,l,c,f,h,w,d,p,m,g,_,s,a,i,E,k,R,O,v,S,I,ge,ae,ne,De]}var Yf=class extends Io{constructor(e){super(),I_(this,e,RA,DA,S_,{task:26,onSubmit:27,statusOptions:0},null,[-1,-1])}},q_=Yf;var sn=class extends Y_.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{s.length&&i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this,n=this.getKnownStatusesAndCurrentTaskStatusIfNotKnown();new q_({target:t,props:{task:this.task,statusOptions:n,onSubmit:this.onSubmit}})}getKnownStatusesAndCurrentTaskStatusIfNotKnown(){let t=Re.getInstance().registeredStatuses;return Re.getInstance().bySymbol(this.task.status.symbol)===re.EMPTY&&t.push(this.task.status),t}onClose(){let{contentEl:t}=this;t.empty()}};function MA(){let{setCreatedDate:r}=X();return r?window.moment():null}function xA(r){let{setCreatedDate:e}=X();if(!e||r.createdDate!==null)return!1;let t=r.description==="",n=!be.isEmpty(),i=!be.includedIn(r.description);return t||n&&i}var Fo=({line:r,path:e})=>{var h,T;let t=ye.parseTaskSignifiers(r,ot.fromUnknownPosition(e),Dt.fromPath(e)),n=MA();if(t!==null)return xA(t)?new ye(gt(he({},t),{createdDate:n})):t;let i=r.match(z.nonTaskRegex);if(i===null)return console.error("Tasks: Cannot create task on line:",r),new ye({status:re.TODO,description:"",taskLocation:ot.fromUnknownPosition(e),indentation:"",listMarker:"-",priority:"3",createdDate:n,startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,blockLink:"",tags:[],originalMarkdown:"",scheduledDateIsInferred:!1});let s=i[1],a=(h=i[2])!=null?h:"-",o=(T=i[4])!=null?T:" ",u=Re.getInstance().bySymbolOrCreate(o),l=i[5],c=r.match(z.blockLinkRegex),f=c!==null?c[0]:"";return f!==""&&(l=l.replace(z.blockLinkRegex,"")),new ye({status:u,description:l,taskLocation:ot.fromUnknownPosition(e),indentation:s,listMarker:a,blockLink:f,priority:"3",createdDate:n,startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,tags:[],originalMarkdown:"",scheduledDateIsInferred:!1})};var $_=(r,e,t,n)=>{var f;if(r)return t instanceof $f.MarkdownView;if(!(t instanceof $f.MarkdownView))return;let i=(f=t.file)==null?void 0:f.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=Fo({line:o,path:i}),l=h=>{let T=Dt.removeInferredStatusIfNeeded(u,h).map(y=>y.toFileLineString()).join(`
`);e.setLine(a,T)};new sn({app:n,task:u,onSubmit:l}).open()};var jf=require("obsidian");var j_=(r,e,t)=>{var u;if(r)return t instanceof jf.MarkdownView;if(!(t instanceof jf.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=AA(a,n);e.setLine(s,o.text),e.setCursor(CA(i,o))},AA=(r,e)=>{let t=ye.fromLine({line:r,taskLocation:ot.fromUnknownPosition(e),fallbackDate:null});if(t!==null){let n=t.toggleWithRecurrenceInUsersOrder().map(i=>i.toFileLineString());return{text:n.join(`
`),moveTo:{line:n.length-1}}}else{let n=r.match(z.taskRegex);if(n!==null){let i=n[3],a=Re.getInstance().bySymbol(i).nextStatusSymbol;return{text:r.replace(z.taskRegex,`$1- [${a}] $4`)}}else if(z.listItemRegex.test(r)){let i=r.replace(z.listItemRegex,"$1$2 [ ]");return{text:i,moveTo:{ch:i.length}}}else{let i=r.replace(z.indentationRegex,"$1- ");return{text:i,moveTo:{ch:i.length}}}}},CA=(r,e)=>{var s;let t={line:0,ch:r.ch},n=he(he({},t),(s=e.moveTo)!=null?s:{}),i=e.text.split(`
`)[n.line].length;return{line:r.line+n.line,ch:Math.min(n.ch,i)}};var Lo=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>$_(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:j_})}};var Uo=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var G_=require("obsidian");var Wo=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return W(this,null,function*(){var c;let n=new G_.MarkdownRenderChild(e);t.addChild(n);let i=e.findAll(".task-list-item").filter(f=>{var y;let h=(y=f.textContent)==null?void 0:y.split(`
`);if(h===void 0)return!1;let T=null;for(let E=0;E<h.length;E=E+1)if(h[E]!==""){T=h[E];break}return T===null?!1:be.includedIn(T)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let f=a.lineStart;f<=a.lineEnd;f++){let h=o[f];if(h===void 0)continue;let T=null,y=ye.fromLine({line:h,taskLocation:new ot(s,f,a.lineStart,u,T),fallbackDate:null});y!==null&&(l.push(y),u++)}for(let f=0;f<i.length;f++){let h=l[f],T=i[f];if(h===void 0||T===void 0)continue;let y=(c=T.getAttr("data-line"))!=null?c:"0",E=Number.parseInt(y,10),D=yield h.toLi({parentUlElement:e,listIndex:E,obsidianComponent:n}),A=T.childNodes;for(let Z=0;Z<A.length;Z=Z+1){let Q=A[Z];Q.nodeName.toLowerCase()==="div"?D.prepend(Q):Q.nodeName.toLowerCase()==="ul"&&D.append(Q)}let P=T.querySelectorAll("[data-footnote-id]"),F=D.querySelectorAll("[data-footnote-id]");if(P.length===F.length)for(let Z=0;Z<P.length;Z++)F[Z].replaceWith(P[Z]);T.replaceWith(D)}})}};var B_=require("@codemirror/view"),H_=require("obsidian");var z_=()=>B_.ViewPlugin.fromClass(Gf),Gf=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let h=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(h),new H_.Notice(h,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=ye.fromLine({line:a.text,taskLocation:ot.fromUnknownPosition(""),fallbackDate:null});if(o===null)return!1;e.preventDefault();let l=o.toggleWithRecurrenceInUsersOrder().map(h=>h.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let f=t.checked;return setTimeout(()=>{t.checked=f},1),!0}};var Ii=require("obsidian");var PA=Object.prototype.toString,Ei=Array.isArray||function(e){return PA.call(e)==="[object Array]"};function Hf(r){return typeof r=="function"}function NA(r){return Ei(r)?"array":typeof r}function Bf(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function K_(r,e){return r!=null&&typeof r=="object"&&e in r}function IA(r,e){return r!=null&&typeof r!="object"&&r.hasOwnProperty&&r.hasOwnProperty(e)}var FA=RegExp.prototype.test;function LA(r,e){return FA.call(r,e)}var UA=/\S/;function WA(r){return!LA(UA,r)}var qA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function YA(r){return String(r).replace(/[&<>"'`=\/]/g,function(t){return qA[t]})}var $A=/\s*/,jA=/\s+/,V_=/\s*=/,GA=/\s*\}/,BA=/#|\^|\/|>|\{|&|=|!/;function HA(r,e){if(!r)return[];var t=!1,n=[],i=[],s=[],a=!1,o=!1,u="",l=0;function c(){if(a&&!o)for(;s.length;)delete i[s.pop()];else s=[];a=!1,o=!1}var f,h,T;function y(G){if(typeof G=="string"&&(G=G.split(jA,2)),!Ei(G)||G.length!==2)throw new Error("Invalid tags: "+G);f=new RegExp(Bf(G[0])+"\\s*"),h=new RegExp("\\s*"+Bf(G[1])),T=new RegExp("\\s*"+Bf("}"+G[1]))}y(e||Qt.tags);for(var E=new la(r),D,A,P,F,Z,Q;!E.eos();){if(D=E.pos,P=E.scanUntil(f),P)for(var me=0,j=P.length;me<j;++me)F=P.charAt(me),WA(F)?(s.push(i.length),u+=F):(o=!0,t=!0,u+=" "),i.push(["text",F,D,D+1]),D+=1,F===`
`&&(c(),u="",l=0,t=!1);if(!E.scan(f))break;if(a=!0,A=E.scan(BA)||"name",E.scan($A),A==="="?(P=E.scanUntil(V_),E.scan(V_),E.scanUntil(h)):A==="{"?(P=E.scanUntil(T),E.scan(GA),E.scanUntil(h),A="&"):P=E.scanUntil(h),!E.scan(h))throw new Error("Unclosed tag at "+E.pos);if(A==">"?Z=[A,P,D,E.pos,u,l,t]:Z=[A,P,D,E.pos],l++,i.push(Z),A==="#"||A==="^")n.push(Z);else if(A==="/"){if(Q=n.pop(),!Q)throw new Error('Unopened section "'+P+'" at '+D);if(Q[1]!==P)throw new Error('Unclosed section "'+Q[1]+'" at '+D)}else A==="name"||A==="{"||A==="&"?o=!0:A==="="&&y(P)}if(c(),Q=n.pop(),Q)throw new Error('Unclosed section "'+Q[1]+'" at '+E.pos);return KA(zA(i))}function zA(r){for(var e=[],t,n,i=0,s=r.length;i<s;++i)t=r[i],t&&(t[0]==="text"&&n&&n[0]==="text"?(n[1]+=t[1],n[3]=t[3]):(e.push(t),n=t));return e}function KA(r){for(var e=[],t=e,n=[],i,s,a=0,o=r.length;a<o;++a)switch(i=r[a],i[0]){case"#":case"^":t.push(i),n.push(i),t=i[4]=[];break;case"/":s=n.pop(),s[5]=i[2],t=n.length>0?n[n.length-1][4]:e;break;default:t.push(i)}return e}function la(r){this.string=r,this.tail=r,this.pos=0}la.prototype.eos=function(){return this.tail===""};la.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};la.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function vi(r,e){this.view=r,this.cache={".":this.view},this.parent=e}vi.prototype.push=function(e){return new vi(e,this)};vi.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var i=this,s,a,o,u=!1;i;){if(e.indexOf(".")>0)for(s=i.view,a=e.split("."),o=0;s!=null&&o<a.length;)o===a.length-1&&(u=K_(s,a[o])||IA(s,a[o])),s=s[a[o++]];else s=i.view[e],u=K_(i.view,e);if(u){n=s;break}i=i.parent}t[e]=n}return Hf(n)&&(n=n.call(this.view)),n};function Et(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}Et.prototype.clearCache=function(){typeof this.templateCache!="undefined"&&this.templateCache.clear()};Et.prototype.parse=function(e,t){var n=this.templateCache,i=e+":"+(t||Qt.tags).join(":"),s=typeof n!="undefined",a=s?n.get(i):void 0;return a==null&&(a=HA(e,t),s&&n.set(i,a)),a};Et.prototype.render=function(e,t,n,i){var s=this.getConfigTags(i),a=this.parse(e,s),o=t instanceof vi?t:new vi(t,void 0);return this.renderTokens(a,o,n,e,i)};Et.prototype.renderTokens=function(e,t,n,i,s){for(var a="",o,u,l,c=0,f=e.length;c<f;++c)l=void 0,o=e[c],u=o[0],u==="#"?l=this.renderSection(o,t,n,i,s):u==="^"?l=this.renderInverted(o,t,n,i,s):u===">"?l=this.renderPartial(o,t,n,s):u==="&"?l=this.unescapedValue(o,t):u==="name"?l=this.escapedValue(o,t,s):u==="text"&&(l=this.rawValue(o)),l!==void 0&&(a+=l);return a};Et.prototype.renderSection=function(e,t,n,i,s){var a=this,o="",u=t.lookup(e[1]);function l(h){return a.render(h,t,n,s)}if(!!u){if(Ei(u))for(var c=0,f=u.length;c<f;++c)o+=this.renderTokens(e[4],t.push(u[c]),n,i,s);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")o+=this.renderTokens(e[4],t.push(u),n,i,s);else if(Hf(u)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(t.view,i.slice(e[3],e[5]),l),u!=null&&(o+=u)}else o+=this.renderTokens(e[4],t,n,i,s);return o}};Et.prototype.renderInverted=function(e,t,n,i,s){var a=t.lookup(e[1]);if(!a||Ei(a)&&a.length===0)return this.renderTokens(e[4],t,n,i,s)};Et.prototype.indentPartial=function(e,t,n){for(var i=t.replace(/[^ \t]/g,""),s=e.split(`
`),a=0;a<s.length;a++)s[a].length&&(a>0||!n)&&(s[a]=i+s[a]);return s.join(`
`)};Et.prototype.renderPartial=function(e,t,n,i){if(!!n){var s=this.getConfigTags(i),a=Hf(n)?n(e[1]):n[e[1]];if(a!=null){var o=e[6],u=e[5],l=e[4],c=a;u==0&&l&&(c=this.indentPartial(a,l,o));var f=this.parse(c,s);return this.renderTokens(f,t,n,c,i)}}};Et.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n};Et.prototype.escapedValue=function(e,t,n){var i=this.getConfigEscape(n)||Qt.escape,s=t.lookup(e[1]);if(s!=null)return typeof s=="number"&&i===Qt.escape?String(s):i(s)};Et.prototype.rawValue=function(e){return e[1]};Et.prototype.getConfigTags=function(e){return Ei(e)?e:e&&typeof e=="object"?e.tags:void 0};Et.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!Ei(e))return e.escape};var Qt={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(r){ua.templateCache=r},get templateCache(){return ua.templateCache}},ua=new Et;Qt.clearCache=function(){return ua.clearCache()};Qt.parse=function(e,t){return ua.parse(e,t)};Qt.render=function(e,t,n,i){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+NA(e)+'" was given as the first argument for mustache#render(template, view, partials)');return ua.render(e,t,n,i)};Qt.escape=YA;Qt.Scanner=la;Qt.Context=vi;Qt.Writer=Et;var zf=Qt;var eb=zn(J_());function tb(r,e){zf.escape=function(t){return t};try{return zf.render(r,(0,eb.default)(e))}catch(t){let n="";throw t instanceof Error?n=`There was an error expanding one or more placeholders.

The error message was:
    ${t.message.replace(/ > /g,".").replace("Missing Mustache data property","Unknown property")}`:n="Unknown error expanding placeholders.",n+=`

The problem is in:
    ${r}`,Error(n)}}function rb(r){return{query:{file:new mi(r)}}}function Pn(r,e){let t=`Error: ${r}.
The error message was:
    `,n="";return e instanceof Error?n+=e:n+="Unknown error",`${t}"${n}"`}var Lr=class{constructor(e,t,n){this.property=e,this.comparator=Lr.maybeReverse(n,t)}static maybeReverse(e,t){return e?Lr.makeReversedComparator(t):t}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}};var an=class{constructor(e,t,n){this.property=e,this.grouper=t,this.reverse=n}};var ke=class{canCreateFilterForLine(e){return ke.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}fieldNameSingular(){return this.fieldName()}fieldNameSingularEscaped(){return So(this.fieldNameSingular())}supportsSorting(){return!1}createSorterFromLine(e){if(!this.supportsSorting())return null;let t=ke.getMatch(this.sorterRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createSorter(n)}sorterRegExp(){if(!this.supportsSorting())throw Error(`sorterRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^sort by ${this.fieldNameSingularEscaped()}( reverse)?`)}comparator(){throw Error(`comparator() unimplemented for ${this.fieldNameSingular()}`)}createSorter(e){return new Lr(this.fieldNameSingular(),this.comparator(),e)}createNormalSorter(){return this.createSorter(!1)}createReverseSorter(){return this.createSorter(!0)}supportsGrouping(){return!1}createGrouperFromLine(e){if(!this.supportsGrouping())return null;let t=ke.getMatch(this.grouperRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createGrouper(n)}grouperRegExp(){if(!this.supportsGrouping())throw Error(`grouperRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^group by ${this.fieldNameSingularEscaped()}( reverse)?$`)}grouper(){throw Error(`grouper() unimplemented for ${this.fieldNameSingular()}`)}createGrouper(e){return new an(this.fieldNameSingular(),this.grouper(),e)}createNormalGrouper(){return this.createGrouper(!1)}createReverseGrouper(){return this.createGrouper(!0)}};var Oe=class{constructor(e,t=[],n=""){this.description=e,this.symbol=n,this.children=t}static booleanAnd(e){return this.combineOrCreateExplanation("All of",e,"AND")}static booleanOr(e){return this.combineOrCreateExplanation("At least one of",e,"OR")}static booleanNot(e){return new Oe("None of",e,"NOT")}static booleanXor(e){return new Oe("Exactly one of",e,"XOR")}asString(e=""){if(this.children.length==0)return e+this.description;let t=e;this.symbol===""?t+=this.description:(t+=this.symbol,this.children.length>1&&(t+=` (${this.description})`),t+=":");let n=e+"  ";for(let i=0;i<this.children.length;i++)t+=`
${this.children[i].asString(n)}`;return t}static combineOrCreateExplanation(e,t,n){if(t.length===2){let i=t[0],s=t[1];if(i.symbol===n&&s.symbol==="")return i.children.push(s),i}return new Oe(e,t,n)}};var ft=class{constructor(e,t,n){this.instruction=e,this.explanation=n,this.filterFunction=t}explainFilterIndented(e){let t=this.explanation;return t.asString()===this.instruction?`${e}${this.instruction}
`:`${e}${this.instruction} =>
${t.asString("  ")}
`}};var yr=class{constructor(e){this.instruction=e}get queryComponent(){return this._queryComponent}set queryComponent(e){this._queryComponent=e}get error(){return this._error}set error(e){this._error=e}static fromObject(e,t){let n=new yr(e);return n._queryComponent=t,n}static fromError(e,t){let n=new yr(e);return n._error=t,n}};var ee=class{constructor(e){this.object=e}get instruction(){return this.object.instruction}get filter(){return this.object.queryComponent}get error(){return this.object.error}get filterFunction(){if(this.filter)return this.filter.filterFunction}static fromFilter(e){return new ee(yr.fromObject(e.instruction,e))}static fromError(e,t){return new ee(yr.fromError(e,t))}};var qo=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){return e===this._instruction?ee.fromFilter(new ft(e,this._filter,new Oe(e))):ee.fromError(e,`do not understand filter: ${e}`)}};var Tr=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new qo(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let t of this._filters){let n=t.createFilterOrErrorMessage(e);if(n.error===void 0)return n}return ee.fromError(e,`do not understand filter: ${e}`)}};var on=class extends ke{constructor(){super(...arguments);this._filters=new Tr}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var _r=class extends on{constructor(){super(),this._filters.add("done",e=>e.isDone),this._filters.add("not done",e=>!e.isDone)}fieldName(){return"status"}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=_r.oldStatusName(e),i=_r.oldStatusName(t);return n<i?1:n>i?-1:0}}static oldStatusName(e){return e.status.symbol===" "?"Todo":"Done"}supportsGrouping(){return!0}grouper(){return e=>[_r.oldStatusName(e)]}};var pt=class extends ke{constructor(t=null){super();t!==null?this.filterInstructions=t:(this.filterInstructions=new Tr,this.filterInstructions.add(`has ${this.fieldName()} date`,n=>this.date(n)!==null),this.filterInstructions.add(`no ${this.fieldName()} date`,n=>this.date(n)===null),this.filterInstructions.add(`${this.fieldName()} date is invalid`,n=>{let i=this.date(n);return i!==null&&!i.isValid()}))}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=ke.getMatch(this.filterRegExp(),t);if(i===null)return ee.fromError(t,"do not understand query filter ("+this.fieldName()+" date)");let s=i[1],a=i[2],o=i[3],u=At.parseDateRange(o);if(!u.isValid()){let f=At.parseDate(s);f.isValid()&&(u=new Tt(f,f))}if(!u.isValid())return ee.fromError(t,"do not understand "+this.fieldName()+" date");let l=this.buildFilterFunction(a,u),c=pt.buildExplanation(this.fieldNameForExplanation(),a,this.filterResultIfFieldMissing(),u);return ee.fromFilter(new ft(t,l,c))}buildFilterFunction(t,n){let i;switch(t){case"before":i=s=>s?s.isBefore(n.start):this.filterResultIfFieldMissing();break;case"after":i=s=>s?s.isAfter(n.end):this.filterResultIfFieldMissing();break;case"on or before":case"in or before":i=s=>s?s.isSameOrBefore(n.end):this.filterResultIfFieldMissing();break;case"on or after":case"in or after":i=s=>s?s.isSameOrAfter(n.start):this.filterResultIfFieldMissing();break;default:i=s=>s?s.isSameOrAfter(n.start)&&s.isSameOrBefore(n.end):this.filterResultIfFieldMissing()}return this.getFilter(i)}getFilter(t){return n=>t(this.date(n))}filterRegExp(){return new RegExp(`^${this.fieldNameForFilterInstruction()} (((?:on|in) or before|before|(?:on|in) or after|after|on|in)? ?(.*))`)}fieldNameForFilterInstruction(){return this.fieldName()}static buildExplanation(t,n,i,s){let a=n,o="YYYY-MM-DD (dddd Do MMMM YYYY)",u;switch(n){case"before":case"on or after":u=s.start.format(o);break;case"after":case"on or before":u=s.end.format(o);break;case"in or before":a="on or before",u=s.end.format(o);break;case"in or after":a="on or after",u=s.start.format(o);break;default:if(!s.start.isSame(s.end)){let c=`${t} date is between:`,f=[new Oe(`${s.start.format(o)} and`),new Oe(`${s.end.format(o)} inclusive`)];return i&&f.push(new Oe(`OR no ${t} date`)),new Oe(c,f)}a="on",u=s.start.format(o);break}let l=`${t} date is ${a} ${u}`;return i&&(l+=` OR no ${t} date`),new Oe(l)}fieldNameForExplanation(){return this.fieldName()}supportsSorting(){return!0}comparator(){return(t,n)=>Pr(this.date(t),this.date(n))}supportsGrouping(){return!0}grouper(){return t=>{let n=this.date(t);return n===null?["No "+this.fieldName()+" date"]:[n.format("YYYY-MM-DD dddd")]}}};var wi=class extends pt{fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}};var Vf=class extends ke{createFilterOrErrorMessage(e){let t=ke.getMatch(this.filterRegExp(),e);if(t!==null){let n=t[5],i=null;switch(n){case"lowest":i="5";break;case"low":i="4";break;case"none":i="3";break;case"medium":i="2";break;case"high":i="1";break;case"highest":i="0";break}if(i===null)return ee.fromError(e,"do not understand priority");let s=e,a;switch(t[3]){case"above":a=o=>o.priority.localeCompare(i)<0;break;case"below":a=o=>o.priority.localeCompare(i)>0;break;case"not":a=o=>o.priority!==i;break;default:a=o=>o.priority===i,s=`${this.fieldName()} is ${n}`}return ee.fromFilter(new ft(e,a,new Oe(s)))}else return ee.fromError(e,"do not understand query filter (priority)")}fieldName(){return"priority"}filterRegExp(){return Vf.priorityRegexp}supportsSorting(){return!0}comparator(){return(e,t)=>e.priority.localeCompare(t.priority)}supportsGrouping(){return!0}grouper(){return e=>{let t=gr.priorityNameUsingNormal(e.priority);return[`%%${e.priority}%%${t} priority`]}}},Nn=Vf;Nn.priorityRegexp=/^priority(\s+is)?(\s+(above|below|not))?(\s+(lowest|low|none|medium|high|highest))$/;var ki=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var Oi=class extends ki{constructor(t){super();this.stringToFind=t}matches(t){return Oi.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}explanation(t){return new Oe(t)}};var un=class extends ki{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/^\/(.+)\/([^/]*)$/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new un(s)}else return null}matches(t){return t.match(this.regex)!==null}static helpMessage(){return String.raw`See https://publish.obsidian.md/tasks/Queries/Regular+Expressions

Regular expressions must look like this:
    /pattern/
or this:
    /pattern/flags

Where:
- pattern: The 'regular expression' pattern to search for.
- flags:   Optional characters that modify the search.
           i => make the search case-insensitive
           u => add Unicode support

Examples:  /^Log/
           /^Log/i
           /File Name\.md/
           /waiting|waits|waited/i
           /\d\d:\d\d/

The following characters have special meaning in the pattern:
to find them literally, you must add a \ before them:
    [\^$.|?*+()

CAUTION! Regular expression (or 'regex') searching is a powerful
but advanced feature that requires thorough knowledge in order to
use successfully, and not miss intended search results.
`}explanation(t){let i=VA(t,"using regex: ",this.regexAsString());return new Oe(i)}regexAsString(){let t=`'${this.regex.source}' with `;switch(this.regex.flags.length){case 0:t+="no flags";break;case 1:t+=`flag '${this.regex.flags}'`;break;default:t+=`flags '${this.regex.flags}'`;break}return t}};function VA(r,e,t){var o;let n=r.match(/\//);if(!n)return"Error explaining instruction. Could not find a slash character";let i=2,s=((o=n.index)!=null?o:i)-i;return`${e.padEnd(s)}${t}`}var xe=class extends ke{createFilterOrErrorMessage(e){let t=ke.getMatch(this.filterRegExp(),e);if(t===null)return ee.fromError(e,`do not understand query filter (${this.fieldName()})`);let[n,i,s]=t,a=null;if(i.includes("include"))a=new Oi(s);else if(i.includes("regex")){try{a=un.validateAndConstruct(s)}catch(l){let c=Pn("Parsing regular expression",l)+`

${un.helpMessage()}`;return ee.fromError(e,c)}if(a===null)return ee.fromError(e,`Invalid instruction: '${e}'

${un.helpMessage()}`)}if(a===null)return ee.fromError(e,`do not understand query filter (${this.fieldName()})`);let o=i.match(/not/)!==null,u=new ft(e,this.getFilter(a,o),a.explanation(e));return ee.fromFilter(u)}fieldPattern(){return this.fieldNameSingularEscaped()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`)}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}comparator(){return(e,t)=>this.value(e).localeCompare(this.value(t),void 0,{numeric:!0})}grouper(){return e=>[this.value(e)]}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}};var Si=class extends xe{fieldName(){return"path"}value(e){return e.path}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>[xe.escapeMarkdownCharacters(e.path.replace(".md",""))]}};var Di=class extends ke{canCreateFilterForLine(e){return!1}createFilterOrErrorMessage(e){return ee.fromError(e,"Filtering by urgency is not yet supported")}fieldName(){return"urgency"}filterRegExp(){throw Error(`filterRegExp() unimplemented for ${this.fieldName()}`)}supportsSorting(){return!0}comparator(){return(e,t)=>t.urgency-e.urgency}supportsGrouping(){return!0}grouper(){return e=>[`${e.urgency.toFixed(2)}`]}createGrouper(e){return super.createGrouper(!e)}};var Ri=class{static by(e,t){let n=[new Di().comparator(),new _r().comparator(),new wi().comparator(),new Nn().comparator(),new Si().comparator()],i=[];for(let s of e)i.push(s.comparator);return t.sort(Ri.makeCompositeComparator([...i,...n]))}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}};var Yo=class{constructor(e,t,n){this.nestingLevel=e,this.displayName=t,this.property=n}};var $o=class{constructor(e,t){this.lastHeadingAtLevel=new Array;this.groupers=t;let i=e.keys().next().value.length;for(let s=0;s<i;s++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new Yo(n,i,this.groupers[n].property));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var jo=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var Go=class extends jo{},Bo=class{constructor(e,t){this.root=new Go(t),this.buildGroupingTree(e)}buildGroupingTree(e){let t=[this.root];for(let n of e){let i=[];for(let s of t)for(let a of s.values){let o=n.grouper(a);o.length===0&&o.push("");for(let u of o){let l=s.children.get(u);l===void 0&&(l=new Go([]),s.children.set(u,l),i.push(l)),l.values.push(a)}}t=i}}generateTaskTreeStorage(){return this.root.generateAllPaths()}};var Ho=class{constructor(e,t){this.groups=e,this.groupHeadings=[],this.tasks=t}setGroupHeadings(e){for(let t of e)this.groupHeadings.push(t)}applyTaskLimit(e){this.tasks=this.tasks.slice(0,e)}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} [${t.property}] ${t.displayName}
`;return e+=this.tasksAsStringOfLines(),e}};var Mi=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length,this._groupers=e;let i=new Bo(e,t).generateTaskTreeStorage();this.addTaskGroups(i),this.sortTaskGroups(),this.setGroupsHeadings(i)}get groupers(){return this._groupers}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";e+=`Groupers (if any):
`;for(let n of this._groupers){let i=n.reverse?" reverse":"";e+=`- ${n.property}${i}
`}for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTaskGroups(e){for(let[t,n]of e){let i=new Ho(t,n);this.addTaskGroup(i)}}addTaskGroup(e){this._groups.push(e)}sortTaskGroups(){let e=(t,n)=>{let i=t.groups,s=n.groups;for(let a=0;a<i.length;a++){let o=this._groupers[a],u=i[a].localeCompare(s[a],void 0,{numeric:!0});if(u!==0)return o.reverse?-u:u}return 0};this._groups.sort(e)}setGroupsHeadings(e){let t=new $o(e,this._groupers);for(let n of this._groups)n.setGroupHeadings(t.getHeadingsForTaskGroup(n.groups))}applyTaskLimit(e){this._groupers.length!==0&&(this._groups.forEach(t=>{t.applyTaskLimit(e)}),this.recalculateTotalTaskCount())}recalculateTotalTaskCount(){let e=[];this._groups.forEach(n=>{e=[...e,...n.tasks]});let t=[...new Set(e)];this._totalTaskCount=t.length}};var In=class extends xe{fieldName(){return"description"}value(e){return be.removeAsSubstringFrom(e.description)}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=In.cleanDescription(e.description),i=In.cleanDescription(t.description);return n.localeCompare(i,void 0,{numeric:!0})}}static cleanDescription(e){e=be.removeAsSubstringFrom(e);let t=/^\[\[?([^\]]*)]]?/,n=e.match(t);if(n!==null){let i=n[1];e=i.substring(i.indexOf("|")+1)+e.replace(t,"")}return e=this.replaceFormatting(e,/^\*\*([^*]+)\*\*/),e=this.replaceFormatting(e,/^\*([^*]+)\*/),e=this.replaceFormatting(e,/^==([^=]+)==/),e=this.replaceFormatting(e,/^__([^_]+)__/),e=this.replaceFormatting(e,/^_([^_]+)_/),e}static replaceFormatting(e,t){let n=e.match(t);return n!==null&&(e=n[1]+e.replace(t,"")),e}};var zo=class extends pt{fieldName(){return"created"}date(e){return e.createdDate}filterResultIfFieldMissing(){return!1}};var Ko=class extends pt{fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}};var Vo=class extends on{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var ca=class extends yr{};function da(r){return[["task",r]]}function Qf(r,e){let t=r.map(([n])=>n);try{let n=e.includes("return")?e:`return ${e}`,i=e&&new Function(...t,n);return i instanceof Function?ca.fromObject(e,i):ca.fromError(e,"Error parsing group function")}catch(n){return ca.fromError(e,Pn(`Failed parsing expression "${e}"`,n))}}function Xf(r,e){let t=e.map(([n,i])=>i);return r(...t)}function Zf(r,e,t){try{return Xf(r,e)}catch(n){return Pn(`Failed calculating expression "${t}"`,n)}}function nb(r,e){let t=da(r),n=Qf(t,e);return n.error?n.error:Zf(n.queryComponent,t,e)}var Qo=class{constructor(e){this.line=e,this.functionOrError=Qf(da(null),e)}isValid(){return this.functionOrError.error===void 0}get parseError(){return this.functionOrError.error}evaluate(e){if(!this.isValid())throw Error(`Error: Cannot evaluate an expression which is not valid: "${this.line}" gave error: "${this.parseError}"`);return Xf(this.functionOrError.queryComponent,da(e))}evaluateOrCatch(e){return this.isValid()?Zf(this.functionOrError.queryComponent,da(e),this.line):`Error: Cannot evaluate an expression which is not valid: "${this.line}" gave error: "${this.parseError}"`}};var Xo=class extends ke{createFilterOrErrorMessage(e){let t=ke.getMatch(this.filterRegExp(),e);if(t===null)return ee.fromError(e,"Unable to parse line");let n=t[1],i=new Qo(n);return i.isValid()?ee.fromFilter(new ft(e,QA(i),new Oe(e))):ee.fromError(e,i.parseError)}fieldName(){return"function"}filterRegExp(){return new RegExp(`^filter by ${this.fieldNameSingularEscaped()} (.*)`)}supportsGrouping(){return!0}createGrouperFromLine(e){let t=ke.getMatch(this.grouperRegExp(),e);if(t===null)return null;let n=!!t[1],i=t[2];return new an("function",ZA(i),n)}grouperRegExp(){return new RegExp(`^group by ${this.fieldNameSingularEscaped()}( reverse)? (.*)`)}grouper(){throw Error("grouper() function not valid for FunctionField. Use createGrouperFromLine() instead.")}};function QA(r){return e=>XA(r,e)}function XA(r,e){let t=r.evaluate(e);if(typeof t=="boolean")return t;throw Error(`filtering function must return true or false. This returned "${t}".`)}function ZA(r){return e=>JA(e,r)}function JA(r,e){try{let t=nb(r,e);return Array.isArray(t)?t.map(i=>i.toString()):t===null?[]:[t.toString()]}catch(t){let n=`Error: Failed calculating expression "${e}". The error message was: `;return t instanceof Error?[n+t.message]:[n+"Unknown error"]}}var Zo=class extends xe{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}};var Jo=class extends pt{fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}};var eu=class extends pt{fieldName(){return"start"}fieldNameForFilterInstruction(){return"starts"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}};var tu=class extends pt{constructor(){let e=new Tr;e.add("has happens date",t=>this.dates(t).some(n=>n!==null)),e.add("no happens date",t=>!this.dates(t).some(n=>n!==null)),super(e)}fieldName(){return"happens"}fieldNameForExplanation(){return"due, start or scheduled"}date(e){return this.earliestDate(e)}dates(e){return e.happensDates}earliestDate(e){return e.happens.moment}filterResultIfFieldMissing(){return!1}getFilter(e){return t=>this.dates(t).some(n=>e(n))}};var ru=class extends on{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}supportsSorting(){return!0}comparator(){return(e,t)=>e.recurrence!==null&&t.recurrence===null?-1:e.recurrence===null&&t.recurrence!==null?1:0}supportsGrouping(){return!0}grouper(){return e=>e.recurrence!==null?["Recurring"]:["Not Recurring"]}};var nu=class extends xe{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}createGrouper(e){return new an(this.fieldNamePlural(),this.grouper(),e)}grouperRegExp(){if(!this.supportsGrouping())throw Error(`grouperRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^group by ${this.fieldNamePlural()}( reverse)?$`)}};var Fn=class extends nu{constructor(){super();this.filterInstructions=new Tr,this.filterInstructions.add(`has ${this.fieldNameSingular()}`,t=>this.values(t).length>0),this.filterInstructions.add(`has ${this.fieldNamePlural()}`,t=>this.values(t).length>0),this.filterInstructions.add(`no ${this.fieldNameSingular()}`,t=>this.values(t).length===0),this.filterInstructions.add(`no ${this.fieldNamePlural()}`,t=>this.values(t).length===0)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);return n.filter!==void 0?n:super.createFilterOrErrorMessage(t)}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}fieldNameSingular(){return"tag"}values(t){return t.tags}supportsSorting(){return!0}createSorterFromLine(t){let n=t.match(this.sorterRegExp());if(n===null)return null;let i=!!n[1],s=isNaN(+n[2])?1:+n[2],a=Fn.makeCompareByTagComparator(s);return new Lr(this.fieldNameSingular(),a,i)}sorterRegExp(){return/^sort by tag( reverse)?[\s]*(\d+)?/}comparator(){return Fn.makeCompareByTagComparator(1)}static makeCompareByTagComparator(t){return(n,i)=>{if(n.tags.length===0&&i.tags.length===0)return 0;if(n.tags.length===0)return 1;if(i.tags.length===0)return-1;let s=t-1;if(n.tags.length<t&&i.tags.length>=t)return 1;if(i.tags.length<t&&n.tags.length>=t)return-1;if(n.tags.length<t&&i.tags.length<t)return 0;let a=n.tags[s],o=i.tags[s];return a.localeCompare(o,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return t=>t.tags.length==0?["(No tags)"]:t.tags}};var gb=zn(mb());var ou=class extends ke{constructor(){super(...arguments);this.basicBooleanRegexp=/(.*(AND|OR|XOR|NOT)\s*[("].*|\(.+\))/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){if(t.length===0)return ee.fromError(t,"empty line");let n=this.preprocessExpression(t);try{let i=(0,gb.parse)(n);for(let o of i)if(o.name==="IDENTIFIER"&&o.value){let u=o.value.trim();if(!(u in this.subFields)){let l=uu(u);if(l===null)return ee.fromError(t,`couldn't parse sub-expression '${u}'`);if(l.error)return ee.fromError(t,`couldn't parse sub-expression '${u}': ${l.error}`);l.filter&&(this.subFields[u]=l.filter)}}else if(o.name==="OPERATOR"){if(o.value==null)return ee.fromError(t,"empty operator in boolean query");if(!this.supportedOperators.includes(o.value))return ee.fromError(t,`unknown boolean operator '${o.value}'`)}let s=o=>this.filterTaskWithParsedQuery(o,i),a=this.constructExplanation(i);return ee.fromFilter(new ft(t,s,a))}catch(i){let s=i instanceof Error?i.message:"unknown error type";return ee.fromError(t,`malformed boolean query -- ${s} (check the documentation for guidelines)`)}}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let l=this.subFields[o.value.trim()].filterFunction(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}constructExplanation(t){let n=[];for(let i of t)if(i.name==="IDENTIFIER"){if(i.value==null)throw Error("null token value");let s=this.subFields[i.value.trim()];n.push(s.explanation)}else if(i.name==="OPERATOR")if(i.value==="NOT"){let s=n.pop();n.push(Oe.booleanNot([s]))}else if(i.value==="OR"){let s=n.pop(),a=n.pop();n.push(Oe.booleanOr([a,s]))}else if(i.value==="AND"){let s=n.pop(),a=n.pop();n.push(Oe.booleanAnd([a,s]))}else if(i.value==="XOR"){let s=n.pop(),a=n.pop();n.push(Oe.booleanXor([a,s]))}else throw Error("Unsupported operator: "+i.value);else throw Error("Unsupported token type: "+i.name);return n[0]}};var lu=class extends xe{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>{let t=e.filename;return t===null?["Unknown Location"]:["[["+t+"]]"]}}};var cu=class extends xe{constructor(){super()}fieldName(){return"status.name"}value(e){return e.status.name}supportsSorting(){return!0}supportsGrouping(){return!0}};var cn=class extends ke{canCreateFilterForLine(e){let t=new RegExp(`^(?:${this.fieldNameSingularEscaped()})`);return ke.lineMatchesFilter(t,e)}createFilterOrErrorMessage(e){let t=ke.getMatch(this.filterRegExp(),e);if(t===null)return this.helpMessage(e);let[n,i,s]=t,a=Vt[s.toUpperCase()];if(!a)return this.helpMessage(e);let o;switch(i){case"is":o=u=>u.status.type===a;break;case"is not":o=u=>u.status.type!==a;break;default:return this.helpMessage(e)}return ee.fromFilter(new ft(e,o,new Oe(e)))}filterRegExp(){return new RegExp(`^(?:${this.fieldNameSingularEscaped()}) (is|is not) ([^ ]+)$`)}helpMessage(e){let t=Object.values(Vt).filter(i=>i!=="EMPTY").join(" "),n=`Invalid ${this.fieldNameSingular()} instruction: '${e}'.
    Allowed options: 'is' and 'is not' (without quotes).
    Allowed values:  ${t}
                     Note: values are case-insensitive,
                           so 'in_progress' works too, for example.
    Example:         ${this.fieldNameSingular()} is not NON_TASK`;return ee.fromError(e,n)}fieldName(){return"status.type"}value(e){return e.status.type}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=cn.groupName(e),i=cn.groupName(t);return n.localeCompare(i,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return e=>[cn.groupName(e)]}static groupName(e){let t;switch(e.status.type){case"IN_PROGRESS":t="1";break;case"TODO":t="2";break;case"DONE":t="3";break;case"CANCELLED":t="4";break;case"NON_TASK":t="5";break;case"EMPTY":t="6";break}return`%%${t}%%${e.status.type}`}};var du=class extends xe{fieldName(){return"recurrence"}value(e){return e.recurrence!==null?e.recurrence.toText():""}supportsGrouping(){return!0}grouper(){return e=>e.recurrence!==null?[e.recurrence.toText()]:["None"]}};var fu=class extends xe{fieldName(){return"folder"}value(e){return e.file.folder}supportsGrouping(){return!0}grouper(){return e=>[xe.escapeMarkdownCharacters(this.value(e))]}};var pu=class extends xe{fieldName(){return"root"}value(e){return e.file.root}supportsGrouping(){return!0}grouper(){return e=>[xe.escapeMarkdownCharacters(this.value(e))]}};var hu=class extends xe{fieldName(){return"backlink"}value(e){let t=e.getLinkText({isFilenameUnique:!0});return t===null?"Unknown Location":t}createFilterOrErrorMessage(e){return ee.fromError(e,"backlink field does not support filtering")}canCreateFilterForLine(e){return!1}supportsGrouping(){return!0}grouper(){return e=>{let t=e.filename;if(t===null)return["Unknown Location"];let n=xe.escapeMarkdownCharacters(t);return e.precedingHeader&&e.precedingHeader!==t&&(n+=" > "+e.precedingHeader),[n]}}};var cp=[()=>new cu,()=>new cn,()=>new _r,()=>new ru,()=>new Nn,()=>new tu,()=>new zo,()=>new eu,()=>new Jo,()=>new wi,()=>new Ko,()=>new Si,()=>new fu,()=>new pu,()=>new hu,()=>new In,()=>new Fn,()=>new Zo,()=>new Vo,()=>new lu,()=>new Di,()=>new du,()=>new Xo,()=>new ou];function uu(r){for(let e of cp){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}function yb(r){let e=/^sort by /;if(r.match(e)===null)return null;for(let t of cp){let i=t().createSorterFromLine(r);if(i)return i}return null}function Tb(r){let e=/^group by /;if(r.match(e)===null)return null;for(let t of cp){let i=t().createGrouperFromLine(r);if(i)return i}return null}var qn=class{constructor(e){this._searchErrorMessage=void 0;this.taskGroups=e}get searchErrorMessage(){return this._searchErrorMessage}set searchErrorMessage(e){this._searchErrorMessage=e}get totalTasksCount(){return this.taskGroups.totalTasksCount()}get groups(){return this.taskGroups.groups}static fromError(e){let t=new qn(new Mi([],[]));return t._searchErrorMessage=e,t}};var $r=class{constructor({source:e},t=void 0){this._limit=void 0;this._taskGroupLimit=void 0;this._layoutOptions=new Qs;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this._ignoreGlobalQuery=!1;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|created date|start date|scheduled date|done date|due date|recurrence rule|edit button|urgency|tags)/;this.shortModeRegexp=/^short/;this.explainQueryRegexp=/^explain/;this.ignoreGlobalQueryRegexp=/^ignore global query/;this.limitRegexp=/^limit (groups )?(to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,this.filePath=t,e.split(`
`).map(n=>n.trim()).forEach(n=>{let i=this.expandPlaceholders(n,t);if(this.error===void 0)switch(!0){case i==="":break;case this.shortModeRegexp.test(i):this._layoutOptions.shortMode=!0;break;case this.explainQueryRegexp.test(i):this._layoutOptions.explainQuery=!0;break;case this.ignoreGlobalQueryRegexp.test(i):this._ignoreGlobalQuery=!0;break;case this.limitRegexp.test(i):this.parseLimit({line:i});break;case this.parseSortBy({line:i}):break;case this.parseGroupBy({line:i}):break;case this.hideOptionsRegexp.test(i):this.parseHideOptions({line:i});break;case this.commentRegexp.test(i):break;case this.parseFilter(i):break;default:this.setError("do not understand query",i)}})}expandPlaceholders(e,t){if(e.includes("{{")&&e.includes("}}")&&this.filePath===void 0)return this._error=`The query looks like it contains a placeholder, with "{{" and "}}"
but no file path has been supplied, so cannot expand placeholder values.
The query is:
${e}`,e;let n=e;if(t){let i=rb(t);try{n=tb(e,i)}catch(s){return s instanceof Error?this._error=s.message:this._error="Internal error. expandPlaceholders() threw something other than Error.",e}}return n}append(e){return this.source===""?e:e.source===""?this:new $r({source:`${this.source}
${e.source}`},this.filePath)}explainQuery(){let e="";if(this.error!==void 0)return e+=`Query has an error:
`,e+=this.error+`
`,e;let t=this.filters.length;if(t===0)e+="No filters supplied. All tasks will match the query.";else for(let i=0;i<t;i++)i>0&&(e+=`
`),e+=this.filters[i].explainFilterIndented("");e+=this.explainQueryLimits();let{debugSettings:n}=X();return n.ignoreSortInstructions&&(e+=`

NOTE: All sort instructions, including default sort order, are disabled, due to 'ignoreSortInstructions' setting.`),e}explainQueryLimits(){let e="";function t(n){let i=`

At most ${n} task`;return n!==1&&(i+="s"),i}return this._limit!==void 0&&(e+=t(this._limit),e+=`.
`),this._taskGroupLimit!==void 0&&(e+=t(this._taskGroupLimit),e+=` per group (if any "group by" options are supplied).
`),e}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}setError(e,t){this._error=`${e}
Problem line: "${t}"`}get ignoreGlobalQuery(){return this._ignoreGlobalQuery}applyQueryToTasks(e){try{this.filters.forEach(a=>{e=e.filter(a.filterFunction)});let{debugSettings:t}=X(),i=(t.ignoreSortInstructions?e:Ri.by(this.sorting,e)).slice(0,this.limit),s=new Mi(this.grouping,i);return this._taskGroupLimit!==void 0&&s.applyTaskLimit(this._taskGroupLimit),new qn(s)}catch(t){let n="Search failed";return qn.fromError(Pn(n,t))}}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1]==="hide";switch(t[2]){case"task count":this._layoutOptions.hideTaskCount=n;break;case"backlink":this._layoutOptions.hideBacklinks=n;break;case"priority":this._layoutOptions.hidePriority=n;break;case"created date":this._layoutOptions.hideCreatedDate=n;break;case"start date":this._layoutOptions.hideStartDate=n;break;case"scheduled date":this._layoutOptions.hideScheduledDate=n;break;case"due date":this._layoutOptions.hideDueDate=n;break;case"done date":this._layoutOptions.hideDoneDate=n;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=n;break;case"edit button":this._layoutOptions.hideEditButton=n;break;case"urgency":this._layoutOptions.hideUrgency=n;break;case"tags":this._layoutOptions.hideTags=n;break;default:this.setError("do not understand hide/show option",e)}}}parseFilter(e){var n;let t=uu(e);return t!=null?(t.filter?this._filters.push(t.filter):this.setError((n=t.error)!=null?n:"Unknown error",e),!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);if(t===null){this.setError("do not understand query limit",e);return}let n=Number.parseInt(t[3],10);t[1]!==void 0?this._taskGroupLimit=n:this._limit=n}parseSortBy({line:e}){let t=yb(e);return t?(this._sorting.push(t),!0):!1}parseGroupBy({line:e}){let t=Tb(e);return t?(this._grouping.push(t),!0):!1}};function _b(r,e=void 0){let t="";be.isEmpty()||(t+=`Only tasks containing the global filter '${be.get()}'.

`);let n=new $r({source:r},e);if(!n.ignoreGlobalQuery){let i=new $r(Of(),e);i.source.trim()!==""&&(t+=`Explanation of the global query:

${i.explainQuery()}
`)}return t+=`Explanation of this Tasks code block query:

${n.explainQuery()}`,t}function mu(r,e){let t=new $r(Of(),e),n=new $r({source:r},e);return n.ignoreGlobalQuery?n:t.append(n)}var gu=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return W(this,null,function*(){n.addChild(new dp({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},dp=class extends Ii.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=mu(this.source,this.filePath),this.queryType="tasks";break;default:this.query=mu(this.source,this.filePath),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=mu(this.source,this.filePath),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return W(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");n==="Warm"&&this.query.error===void 0?yield this.renderQuerySearchResults(t,n,s):this.query.error!==void 0?this.renderErrorMessage(s,this.query.error):this.renderLoadingMessage(s),(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}renderQuerySearchResults(t,n,i){return W(this,null,function*(){this.query.layoutOptions.explainQuery&&this.createExplanation(i);let a=this.query.applyQueryToTasks(t);if(a.searchErrorMessage!==void 0){this.renderErrorMessage(i,a.searchErrorMessage);return}yield this.addAllTaskGroups(a.taskGroups,i);let o=a.totalTasksCount;this.addTaskCount(i,o)})}renderErrorMessage(t,n){t.createDiv().innerHTML=`<pre>Tasks query: ${n.replace(/\n/g,"<br>")}</pre>`}renderLoadingMessage(t){t.setText("Loading Tasks ...")}createExplanation(t){let n=_b(this.source,this.filePath),i=t.createEl("pre");i.addClasses(["plugin-tasks-query-explanation"]),i.setText(n),t.appendChild(i)}createTasksList(i){return W(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=new tn(this.query.layoutOptions),o=n.createEl("ul");o.addClasses(["contains-task-list","plugin-tasks-query-result"]),o.addClasses(a.taskListHiddenClasses);let u=this.getGroupingAttribute();u&&u.length>0&&(o.dataset.taskGroupBy=u);for(let l=0;l<s;l++){let c=t[l],f=this.isFilenameUnique({task:c}),h=yield c.toLi({parentUlElement:o,listIndex:l,layoutOptions:this.query.layoutOptions,isFilenameUnique:f,taskLayout:a,obsidianComponent:this});h.querySelectorAll("[data-footnote-id]").forEach(D=>D.remove());let y=this.query.layoutOptions.shortMode,E=h.createSpan("task-extras");this.query.layoutOptions.hideUrgency||this.addUrgency(E,c),this.query.layoutOptions.hideBacklinks||this.addBacklinks(E,c,y,f),this.query.layoutOptions.hideEditButton||this.addEditButton(E,c),o.appendChild(h)}return{taskList:o,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{Co({originalTask:n,newTasks:Dt.removeInferredStatusIfNeeded(n,u)})};new sn({app:this.app,task:n,onSubmit:a}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addAllTaskGroups(t,n){return W(this,null,function*(){for(let i of t.groups){this.addGroupHeadings(n,i.groupHeadings);let{taskList:s}=yield this.createTasksList({tasks:i.tasks,content:n});n.appendChild(s)}})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return W(this,null,function*(){let i="h6";n.nestingLevel===0?i="h4":n.nestingLevel===1&&(i="h5");let s=t.createEl(i,{cls:"tasks-group-heading"});yield Ii.MarkdownRenderer.renderMarkdown(n.displayName,s,this.filePath,this)})}addBacklinks(t,n,i,s){var c;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=a.createEl("a");o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode");let u;i?u=" \u{1F517}":u=(c=n.getLinkText({isFilenameUnique:s}))!=null?c:"",o.setText(u);let l=this.app.vault;o.addEventListener("click",f=>W(this,null,function*(){let h=yield xf(n,l);if(h){let[T,y]=h;yield this.app.workspace.getLeaf(Ii.Keymap.isModEvent(f)).openFile(y,{eState:{line:T}})}})),o.addEventListener("mousedown",f=>W(this,null,function*(){if(f.button===1){let h=yield xf(n,l);if(h){let[T,y]=h;yield this.app.workspace.getLeaf("tab").openFile(y,{eState:{line:T}})}}})),i||a.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}getGroupingAttribute(){let t=[];for(let n of this.query.grouping)t.push(n.property);return t.join(",")}};var Ee=require("obsidian");function bb(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],[">","Rescheduled","x","TODO"],["<","Scheduled","x","TODO"],["!","Important","x","TODO"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],["?","Question","x","TODO"],["*","Star","x","TODO"],["n","Note","x","TODO"],["l","Location","x","TODO"],["i","Information","x","TODO"],["I","Idea","x","TODO"],["S","Amount","x","TODO"],["p","Pro","x","TODO"],["c","Con","x","TODO"],["b","Bookmark","x","TODO"],['"',"Quote","x","TODO"],["0","Speech bubble 0","0","NON_TASK"],["1","Speech bubble 1","1","NON_TASK"],["2","Speech bubble 2","2","NON_TASK"],["3","Speech bubble 3","3","NON_TASK"],["4","Speech bubble 4","4","NON_TASK"],["5","Speech bubble 5","5","NON_TASK"],["6","Speech bubble 6","6","NON_TASK"],["7","Speech bubble 7","7","NON_TASK"],["8","Speech bubble 8","8","NON_TASK"],["9","Speech bubble 9","9","NON_TASK"]]}function vb(){return[[" ","incomplete","x","TODO"],["x","complete / done"," ","DONE"],["-","cancelled"," ","CANCELLED"],[">","deferred","x","TODO"],["/","in progress, or half-done","x","IN_PROGRESS"],["!","Important","x","TODO"],["?","question","x","TODO"],["R","review","x","TODO"],["+","Inbox / task that should be processed later","x","TODO"],["b","bookmark","x","TODO"],["B","brainstorm","x","TODO"],["D","deferred or scheduled","x","TODO"],["I","Info","x","TODO"],["i","idea","x","TODO"],["N","note","x","TODO"],["Q","quote","x","TODO"],["W","win / success / reward","x","TODO"],["P","pro","x","TODO"],["C","con","x","TODO"]]}function Eb(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],[">","Deferred","x","TODO"],["!","Important","x","TODO"],["?","Question","x","TODO"],["r","Review","x","TODO"]]}function wb(){return[[" ","Unchecked","x","TODO"],["x","Regular"," ","DONE"],["X","Checked"," ","DONE"],["-","Dropped"," ","CANCELLED"],[">","Forward","x","TODO"],["D","Date","x","TODO"],["?","Question","x","TODO"],["/","Half Done","x","IN_PROGRESS"],["+","Add","x","TODO"],["R","Research","x","TODO"],["!","Important","x","TODO"],["i","Idea","x","TODO"],["B","Brainstorm","x","TODO"],["P","Pro","x","TODO"],["C","Con","x","TODO"],["Q","Quote","x","TODO"],["N","Note","x","TODO"],["b","Bookmark","x","TODO"],["I","Information","x","TODO"],["p","Paraphrase","x","TODO"],["L","Location","x","TODO"],["E","Example","x","TODO"],["A","Answer","x","TODO"],["r","Reward","x","TODO"],["c","Choice","x","TODO"],["d","Doing","x","IN_PROGRESS"],["T","Time","x","TODO"],["@","Character / Person","x","TODO"],["t","Talk","x","TODO"],["O","Outline / Plot","x","TODO"],["~","Conflict","x","TODO"],["W","World","x","TODO"],["f","Clue / Find","x","TODO"],["F","Foreshadow","x","TODO"],["H","Favorite / Health","x","TODO"],["&","Symbolism","x","TODO"],["s","Secret","x","TODO"]]}function kb(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],[">","Rescheduled","x","TODO"],["<","Scheduled","x","TODO"],["!","Important","x","TODO"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],["?","Question","x","TODO"],["*","Star","x","TODO"],["n","Note","x","TODO"],["l","Location","x","TODO"],["i","Information","x","TODO"],["I","Idea","x","TODO"],["S","Amount","x","TODO"],["p","Pro","x","TODO"],["c","Con","x","TODO"],["b","Bookmark","x","TODO"],["f","Fire","x","TODO"],["k","Key","x","TODO"],["w","Win","x","TODO"],["u","Up","x","TODO"],["d","Down","x","TODO"]]}function Ob(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}function Sb(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}var Db=[{text:"Core Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:"<p>These are the core statuses that Tasks supports natively, with no need for custom CSS styling or theming.</p><p>You can add edit and add your own custom statuses in the section below.</p>"},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertTaskCoreStatusSettings",featureFlag:"",notice:null}]},{text:"Custom Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:`<p>You should first <b>select and install a CSS Snippet or Theme</b> to style custom checkboxes.</p><p>Then, use the buttons below to set up your custom statuses, to match your chosen CSS checkboxes.</p><p><b>Note</b> Any statuses with the same symbol as any earlier statuses will be ignored. You can confirm the actually loaded statuses by running the 'Create or edit task' command and looking at the Status drop-down.</p><p></p><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Statuses">documentation</a> to get started!</p>`},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertCustomTaskStatusSettings",featureFlag:"",notice:null}]}];var or=require("obsidian");var Yn=class{validate(e){let t=[];return t.push(...this.validateSymbol(e)),t.push(...this.validateName(e)),t.push(...this.validateNextSymbol(e)),t}validateStatusCollectionEntry(e){let[t,n,i,s]=e,a=[];if(a.push(...this.validateType(s)),t===i&&s!=="NON_TASK"&&a.push(`Status symbol '${t}' toggles to itself`),a.length>0)return a;let o=re.createFromImportedValue(e).configuration;return a.push(...this.validateSymbolTypeConventions(o)),a.push(...this.validate(o)),a}validateSymbol(e){return Yn.validateOneSymbol(e.symbol,"Task Status Symbol")}validateNextSymbol(e){return Yn.validateOneSymbol(e.nextStatusSymbol,"Task Next Status Symbol")}validateName(e){let t=[];return e.name.length===0&&t.push("Task Status Name cannot be empty."),t}validateType(e){let t=Vt[e],n=[];return t||n.push(`Status Type "${e}" is not a valid type`),t=="EMPTY"&&n.push('Status Type "EMPTY" is not permitted in user data'),n}validateSymbolTypeConventions(e){let t=[],n=e.symbol,i=new Re,s=n==="X"?"x":n,a=i.bySymbol(s);return a.type!=="EMPTY"&&(e.nextStatusSymbol!==a.nextStatusSymbol&&t.push(`Next Status Symbol for symbol '${n}': '${e.nextStatusSymbol}' is inconsistent with convention '${a.nextStatusSymbol}'`),e.type!==a.type&&t.push(`Status Type for symbol '${n}': '${e.type}' is inconsistent with convention '${a.type}'`)),t}static validateOneSymbol(e,t){let n=[];return e.length===0&&n.push(`${t} cannot be empty.`),e.length>1&&n.push(`${t} ("${e}") must be a single character.`),n}};var $n=new Yn,Ft=class extends or.Modal{constructor(t,n,i){super(t.app);this.plugin=t;this.saved=!1;this.error=!1;this.statusSymbol=n.symbol,this.statusName=n.name,this.statusNextSymbol=n.nextStatusSymbol,this.statusAvailableAsCommand=n.availableAsCommand,this.type=n.type,this.isCoreStatus=i}statusConfiguration(){return new tt(this.statusSymbol,this.statusName,this.statusNextSymbol,this.statusAvailableAsCommand,this.type)}display(){return W(this,null,function*(){let{contentEl:t}=this;t.empty();let n=t.createDiv(),i;new or.Setting(n).setName("Task Status Symbol").setDesc("This is the character between the square braces. (It can only be edited for Custom statuses, and not Core statuses.)").addText(l=>{i=l,l.setValue(this.statusSymbol).onChange(c=>{this.statusSymbol=c,Ft.setValid(l,$n.validateSymbol(this.statusConfiguration()))})}).setDisabled(this.isCoreStatus).then(l=>{Ft.setValid(i,$n.validateSymbol(this.statusConfiguration()))});let s;new or.Setting(n).setName("Task Status Name").setDesc("This is the friendly name of the task status.").addText(l=>{s=l,l.setValue(this.statusName).onChange(c=>{this.statusName=c,Ft.setValid(l,$n.validateName(this.statusConfiguration()))})}).then(l=>{Ft.setValid(s,$n.validateName(this.statusConfiguration()))});let a;new or.Setting(n).setName("Task Next Status Symbol").setDesc("When clicked on this is the symbol that should be used next.").addText(l=>{a=l,l.setValue(this.statusNextSymbol).onChange(c=>{this.statusNextSymbol=c,Ft.setValid(l,$n.validateNextSymbol(this.statusConfiguration()))})}).then(l=>{Ft.setValid(a,$n.validateNextSymbol(this.statusConfiguration()))}),new or.Setting(n).setName("Task Status Type").setDesc("Control how the status behaves for searching and toggling.").addDropdown(l=>{["TODO","IN_PROGRESS","DONE","CANCELLED","NON_TASK"].forEach(f=>{l.addOption(f,f)}),l.setValue(this.type).onChange(f=>{this.type=re.getTypeFromStatusTypeString(f)})}),re.tasksPluginCanCreateCommandsForStatuses()&&new or.Setting(n).setName("Available as command").setDesc("If enabled this status will be available as a command so you can assign a hotkey and toggle the status using it.").addToggle(l=>{l.setValue(this.statusAvailableAsCommand).onChange(c=>W(this,null,function*(){this.statusAvailableAsCommand=c}))});let o=t.createDiv(),u=new or.Setting(o);u.addButton(l=>(l.setTooltip("Save").setIcon("checkmark").onClick(()=>W(this,null,function*(){let c=$n.validate(this.statusConfiguration());if(c.length>0){let f=c.join(`
`)+`

Fix errors before saving.`;new or.Notice(f);return}this.saved=!0,this.close()})),l)),u.addExtraButton(l=>(l.setIcon("cross").setTooltip("Cancel").onClick(()=>{this.saved=!1,this.close()}),l))})}onOpen(){this.display()}static setValidationError(t){t.inputEl.addClass("tasks-settings-is-invalid")}static removeValidationError(t){t.inputEl.removeClass("tasks-settings-is-invalid")}static setValid(t,n){n.length===0?Ft.removeValidationError(t):Ft.setValidationError(t)}};var Lt=class extends Ee.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.customFunctions={insertTaskCoreStatusSettings:this.insertTaskCoreStatusSettings.bind(this),insertCustomTaskStatusSettings:this.insertCustomTaskStatusSettings.bind(this)};this.plugin=t}saveSettings(t){return W(this,null,function*(){yield this.plugin.saveSettings(),t&&this.display()})}display(){let{containerEl:t}=this;t.empty(),this.containerEl.addClass("tasks-settings"),t.createEl("h3",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),t.createEl("h4",{text:"Task Format Settings"}),new Ee.Setting(t).setName("Task Format").setDesc(Lt.createFragmentWithHTML('<p>The format that Tasks uses to read and write tasks.</p><p><b>Important:</b> Tasks currently only supports one format at a time. Selecting Dataview will currently <b>stop Tasks reading its own emoji signifiers</b>.</p><p>See the <a href="https://publish.obsidian.md/tasks/Reference/Task+Formats/About+Task+Formats">documentation</a>.</p>')).addDropdown(i=>{for(let s of Object.keys(Nr))i.addOption(s,Nr[s].displayName);i.setValue(X().taskFormat).onChange(s=>W(this,null,function*(){Ge({taskFormat:s}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Global filter Settings"}),new Ee.Setting(t).setName("Global task filter").setDesc(Lt.createFragmentWithHTML('<p><b>Recommended: Leave empty if you want all checklist items in your vault to be tasks managed by this plugin.</b></p><p>Use a global filter if you want Tasks to only act on a subset of your "<code>- [ ]</code>" checklist items, so that a checklist item must include the specified string in its description in order to be considered a task.<p><p>For example, if you set the global filter to <code>#task</code>, the Tasks plugin will only handle checklist items tagged with <code>#task</code>.</br>Other checklist items will remain normal checklist items and not appear in queries or get a done date set.</p><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Global+Filter">documentation</a>.</p>')).addText(i=>{i.setPlaceholder("e.g. #task or TODO").setValue(be.get()).onChange(s=>W(this,null,function*(){be.set(s),yield this.plugin.saveSettings()}))}),new Ee.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(i=>{let s=X();i.setValue(s.removeGlobalFilter).onChange(a=>W(this,null,function*(){Ge({removeGlobalFilter:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Global Query"}),fC(new Ee.Setting(t).setDesc(Lt.createFragmentWithHTML('<p>A query that is automatically included at the start of every Tasks block in the vault. Useful for adding default filters, or layout options.</p><p>See the <a href="https://publish.obsidian.md/tasks/Queries/Global+Query">documentation</a>.</p>')).addTextArea(i=>{let s=X();i.inputEl.rows=4,i.setPlaceholder(`# For example...
path does not include _templates/
limit 300
show urgency`).setValue(s.globalQuery).onChange(a=>W(this,null,function*(){Ge({globalQuery:a}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Task Statuses"});let{headingOpened:n}=X();Db.forEach(i=>{this.addOneSettingsBlock(t,i,n)}),t.createEl("h4",{text:"Date Settings"}),new Ee.Setting(t).setName("Set created date on every added task").setDesc(Lt.createFragmentWithHTML(`Enabling this will add a timestamp \u2795 YYYY-MM-DD before other date values, when a task is created with 'Create or edit task', or by completing a recurring task.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Dates#Created+date">documentation</a>.</p>`)).addToggle(i=>{let s=X();i.setValue(s.setCreatedDate).onChange(a=>W(this,null,function*(){Ge({setCreatedDate:a}),yield this.plugin.saveSettings()}))}),new Ee.Setting(t).setName("Set done date on every completed task").setDesc(Lt.createFragmentWithHTML('Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Dates#Done+date">documentation</a>.</p>')).addToggle(i=>{let s=X();i.setValue(s.setDoneDate).onChange(a=>W(this,null,function*(){Ge({setDoneDate:a}),yield this.plugin.saveSettings()}))}),new Ee.Setting(t).setName("Use filename as Scheduled date for undated tasks").setDesc(Lt.createFragmentWithHTML('Save time entering Scheduled (\u23F3) dates.</br>If this option is enabled, any undated tasks will be given a default Scheduled date extracted from their file name.</br>The date in the file name must be in one of <code>YYYY-MM-DD</code> or <code>YYYYMMDD</code> formats.</br>Undated tasks have none of Due (\u{1F4C5} ), Scheduled (\u23F3) and Start (\u{1F6EB}) dates.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Use+Filename+as+Default+Date">documentation</a>.</p>')).addToggle(i=>{let s=X();i.setValue(s.useFilenameAsScheduledDate).onChange(a=>W(this,null,function*(){Ge({useFilenameAsScheduledDate:a}),yield this.plugin.saveSettings()}))}),new Ee.Setting(t).setName("Folders with default Scheduled dates").setDesc("Leave empty if you want to use default Scheduled dates everywhere, or enter a comma-separated list of folders.").addText(i=>W(this,null,function*(){let s=X();yield this.plugin.saveSettings(),i.setValue(Lt.renderFolderArray(s.filenameAsDateFolders)).onChange(a=>W(this,null,function*(){let o=Lt.parseCommaSeparatedFolders(a);Ge({filenameAsDateFolders:o}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Recurring task Settings"}),new Ee.Setting(t).setName("Next recurrence appears on the line below").setDesc(Lt.createFragmentWithHTML('Enabling this will make the next recurrence of a task appear on the line below the completed task. Otherwise the next recurrence will appear before the completed one.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Recurring+Tasks">documentation</a>.</p>')).addToggle(i=>{let{recurrenceOnNextLine:s}=X();i.setValue(s).onChange(a=>W(this,null,function*(){Ge({recurrenceOnNextLine:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Auto-suggest Settings"}),new Ee.Setting(t).setName("Auto-suggest task content").setDesc(Lt.createFragmentWithHTML('Enabling this will open an intelligent suggest menu while typing inside a recognized task line.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Auto-Suggest">documentation</a>.</p>')).addToggle(i=>{let s=X();i.setValue(s.autoSuggestInEditor).onChange(a=>W(this,null,function*(){Ge({autoSuggestInEditor:a}),yield this.plugin.saveSettings()}))}),new Ee.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(i=>{let s=X();i.setLimits(0,3,1).setValue(s.autoSuggestMinMatch).setDynamicTooltip().onChange(a=>W(this,null,function*(){Ge({autoSuggestMinMatch:a}),yield this.plugin.saveSettings()}))}),new Ee.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(i=>{let s=X();i.setLimits(3,12,1).setValue(s.autoSuggestMaxItems).setDynamicTooltip().onChange(a=>W(this,null,function*(){Ge({autoSuggestMaxItems:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Dialog Settings"}),new Ee.Setting(t).setName("Provide access keys in dialogs").setDesc(Lt.createFragmentWithHTML('If the access keys (keyboard shortcuts) for various controls in dialog boxes conflict with system keyboard shortcuts or assistive technology functionality that is important for you, you may want to deactivate them here.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Create+or+edit+Task#Keyboard+shortcuts">documentation</a>.</p>')).addToggle(i=>{let s=X();i.setValue(s.provideAccessKeys).onChange(a=>W(this,null,function*(){Ge({provideAccessKeys:a}),yield this.plugin.saveSettings()}))})}addOneSettingsBlock(t,n,i){let s=t.createEl("details",{cls:"tasks-nested-settings",attr:he({},n.open||i[n.text]?{open:!0}:{})});s.empty(),s.ontoggle=()=>{i[n.text]=s.open,Ge({headingOpened:i}),this.plugin.saveSettings()};let a=s.createEl("summary");if(new Ee.Setting(a).setHeading().setName(n.text),a.createDiv("collapser").createDiv("handle"),n.notice!==null){let o=s.createEl("div",{cls:n.notice.class,text:n.notice.text});n.notice.html!==null&&o.insertAdjacentHTML("beforeend",n.notice.html)}n.settings.forEach(o=>{if(!(o.featureFlag!==""&&!f_(o.featureFlag))&&(o.type==="checkbox"?new Ee.Setting(s).setName(o.name).setDesc(o.description).addToggle(u=>{let l=X();l.generalSettings[o.settingName]||Rn(o.settingName,o.initialValue),u.setValue(l.generalSettings[o.settingName]).onChange(c=>W(this,null,function*(){Rn(o.settingName,c),yield this.plugin.saveSettings()}))}):o.type==="text"?new Ee.Setting(s).setName(o.name).setDesc(o.description).addText(u=>{let l=X();l.generalSettings[o.settingName]||Rn(o.settingName,o.initialValue);let c=f=>W(this,null,function*(){Rn(o.settingName,f),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,Ee.debounce)(c,500,!0))}):o.type==="textarea"?new Ee.Setting(s).setName(o.name).setDesc(o.description).addTextArea(u=>{let l=X();l.generalSettings[o.settingName]||Rn(o.settingName,o.initialValue);let c=f=>W(this,null,function*(){Rn(o.settingName,f),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,Ee.debounce)(c,500,!0)),u.inputEl.rows=8,u.inputEl.cols=40}):o.type==="function"&&this.customFunctions[o.settingName](s,this),o.notice!==null)){let u=s.createEl("p",{cls:o.notice.class,text:o.notice.text});o.notice.html!==null&&u.insertAdjacentHTML("beforeend",o.notice.html)}})}static parseCommaSeparatedFolders(t){return t.split(",").map(n=>n.trim()).map(n=>n.replace(/^\/|\/$/g,"")).filter(n=>n!=="")}static renderFolderArray(t){return t.join(",")}insertTaskCoreStatusSettings(t,n){let{statusSettings:i}=X();i.coreStatuses.forEach(s=>{Rb(t,s,i.coreStatuses,i,n,n.plugin,!0)})}insertCustomTaskStatusSettings(t,n){let{statusSettings:i}=X();i.customStatuses.forEach(l=>{Rb(t,l,i.customStatuses,i,n,n.plugin,!1)}),t.createEl("div"),new Ee.Setting(t).addButton(l=>{l.setButtonText("Add New Task Status").setCta().onClick(()=>W(this,null,function*(){He.addStatus(i.customStatuses,new tt("","","",!1,"TODO")),yield Fi(i,n)}))}).infoEl.remove();let a=[["AnuPpuccin Theme",bb()],["Aura Theme",vb()],["Ebullientworks Theme",Eb()],["ITS Theme & SlRvb Checkboxes",wb()],["Minimal Theme",Ob()],["Things Theme",Sb()],["LYT Mode Theme (Dark mode only)",kb()]];for(let[l,c]of a)new Ee.Setting(t).addButton(h=>{let T=`${l}: Add ${c.length} supported Statuses`;h.setButtonText(T).onClick(()=>W(this,null,function*(){yield dC(c,i,n)}))}).infoEl.remove();new Ee.Setting(t).addButton(l=>{l.setButtonText("Add All Unknown Status Types").setCta().onClick(()=>W(this,null,function*(){let f=this.plugin.getTasks().map(T=>T.status),h=Re.getInstance().findUnknownStatuses(f);h.length!==0&&(h.forEach(T=>{He.addStatus(i.customStatuses,T)}),yield Fi(i,n))}))}).infoEl.remove(),new Ee.Setting(t).addButton(l=>{l.setButtonText("Reset Custom Status Types to Defaults").setWarning().onClick(()=>W(this,null,function*(){He.resetAllCustomStatuses(i),yield Fi(i,n)}))}).infoEl.remove()}},ma=Lt;ma.createFragmentWithHTML=t=>createFragment(n=>n.createDiv().innerHTML=t);function Rb(r,e,t,n,i,s,a){let o=r.createEl("pre");o.addClass("row-for-status"),o.textContent=new re(e).previewText();let u=new Ee.Setting(r);u.infoEl.replaceWith(o),a||u.addExtraButton(l=>{l.setIcon("cross").setTooltip("Delete").onClick(()=>W(this,null,function*(){He.deleteStatus(t,e)&&(yield Fi(n,i))}))}),u.addExtraButton(l=>{l.setIcon("pencil").setTooltip("Edit").onClick(()=>W(this,null,function*(){let c=new Ft(s,e,a);c.onClose=()=>W(this,null,function*(){c.saved&&He.replaceStatus(t,e,c.statusConfiguration())&&(yield Fi(n,i))}),c.open()}))}),u.infoEl.remove()}function dC(r,e,t){return W(this,null,function*(){He.bulkAddStatusCollection(e,r).forEach(i=>{new Ee.Notice(i)}),yield Fi(e,t)})}function Fi(r,e){return W(this,null,function*(){Ge({statusSettings:r}),He.applyToStatusRegistry(r,Re.getInstance()),yield e.saveSettings(!0)})}function fC(r){let{settingEl:e,infoEl:t,controlEl:n}=r,i=n.querySelector("textarea");i!==null&&(e.style.display="block",t.style.marginRight="0px",i.style.minWidth="-webkit-fill-available")}var Mb=require("obsidian");var yu=class extends Mb.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return c_(s,t.ch)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){var a,o,u;let n=t.query,i=t.editor.getCursor();return((u=(o=(a=Zs()).buildSuggestions)==null?void 0:o.call(a,n,i.ch,this.settings))!=null?u:[]).map(l=>gt(he({},l),{context:t}))}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let f=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(f);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var xb=(r,e)=>{let t,n=new Promise((a,o)=>{t=a});return e(r,a=>{let o=a.map(u=>u.toFileLineString()).join(`
`);t(o)}).open(),n};var Ab=(r,e)=>{let t=Fo({line:"",path:""});return new sn({app:r,task:t,onSubmit:e})};var Cb=r=>({createTaskLineModal:()=>xb(r,Ab)});var Tu=class extends Pb.Plugin{get apiV1(){return Cb(app)}onload(){return W(this,null,function*(){Mo.registerConsoleLogger(),console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new ma({plugin:this})),y_({metadataCache:this.app.metadataCache,vault:this.app.vault,workspace:this.app.workspace}),yield this.loadTaskStatuses();let t=new Uo({obsidianEvents:this.app.workspace});this.cache=new Mn({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new Wo({plugin:this}),this.queryRenderer=new gu({plugin:this,events:t}),this.registerEditorExtension(z_()),this.registerEditorSuggest(new yu(this.app,X())),new Lo({plugin:this})})}loadTaskStatuses(){return W(this,null,function*(){let{statusSettings:t}=X();He.applyToStatusRegistry(t,Re.getInstance())})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return W(this,null,function*(){let t=yield this.loadData();Ge(t),yield this.loadTaskStatuses()})}saveSettings(){return W(this,null,function*(){yield this.saveData(X())})}getTasks(){var t;return(t=this.cache)==null?void 0:t.getTasks()}};
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
